{"pages":[{"title":"Understanding Gradient Descent in Neural Network","url":"/2019/08/gradient-descent/","text":"Gradient Descent is an optimization method used in neural network, where the weight parameters \\boldsymbol{w} are updated recursively by subtracting a small percentage \\alpha of the gradient of the loss function \\nabla \\mathcal{L}, in order to minimize the loss function. \\boldsymbol{w}_i = \\boldsymbol{w}_{i-1} - \\alpha\\nabla \\mathcal{L}(\\boldsymbol{w}_{i-1}) MathematicsLet’s prove that the gradient descent method would lead to smaller losses after each step. Without loss of generality, we assume that the initial weight parameter \\boldsymbol{w}_0 is a two dimensional vector, (x_0, y_0). Given a new vector (x, y) that are close to (x_0, y_0), the Taylor series expansion of the loss function \\mathcal{L} can be approximated by the first-order partial derivatives only: \\begin{align} \\mathcal{L}(x, y) &= \\mathcal{L}(x_0, y_0) + \\dfrac{\\partial\\mathcal{L}(x_0, y_0)}{\\partial x}(x - x_0) + \\dfrac{\\partial\\mathcal{L}(x_0, y_0)}{\\partial y}(y - y_0) \\\\ &= \\mathcal{L}(x_0, y_0) + \\nabla \\mathcal{L}(x_0, y_0) \\cdot (\\Delta x, \\Delta y) \\end{align}Since we would like to find x and y that minimize \\mathcal{L}(x, y), which is the same as minimizing the dot product above, with the constraint that (x, y) having close Eulidean distance to (x_0, y_0) in order to satisfy the Taylor approximation. |(\\Delta x, \\Delta y)| \\leq \\epsilonTo achieve this we select the vector (x, y) such that: (\\Delta x, \\Delta y) = - \\alpha \\nabla \\mathcal{L}(x_0, y_0) \\text{, or simply} \\\\ (x, y) = (x_0 - \\alpha\\cdot\\dfrac{\\partial\\mathcal{L}(x_0, y_0)}{\\partial x}, y_0 - \\alpha\\cdot\\dfrac{\\partial\\mathcal{L}(x_0, y_0)}{\\partial y})Given an \\epsilon, we choose \\alpha such that the above constraint is satisfied. The negative sign ensure that the dot product is minimized. We therefore have proved that \\mathcal{L}(x, y) will descend at each iteration provided that the loss function is differentiable and a sufficiently small \\alpha is used. ExampleLet’s say we have a training set of 4 that maps three binary features to a binary response. \\begin{bmatrix} 0 & 0 & 1 \\\\ 1 & 1 & 1 \\\\ 1 & 0 & 1 \\\\ 0 & 1 & 1 \\end{bmatrix} \\rightarrow \\begin{bmatrix} 0 \\\\ 1 \\\\ 1 \\\\ 0 \\\\ \\end{bmatrix}We first observe that the first feature has a 100% correlation with the response and can reasonably be used for future predictions. Now we construct a neural network to see if it can capture this relationship. First create a neural network class and randomly initialize three weights between -1 and 1 for each feature. 12345import numpy as npclass NeuralNetwork(): def __init__(self): np.random.seed(1) self.weights = 2 * np.random.random((3, 1)) - 1 Define the sigmoid activation function \\sigma: \\hat{y} = \\sigma(wx) = \\dfrac{1}{1 + e^{-wx}}12def sigmoid(self, x): return 1 / (1 + np.exp(-x)) Define the loss function as the mean square error: \\mathcal{L}(w) = (\\hat{y} - y)^2Calculate the gradient w.r.t. weights w: \\dfrac{\\partial \\mathcal{L}(w)}{\\partial w} = 2(\\hat{y} - y)\\dfrac{\\partial \\hat{y}}{\\partial w} = 2(\\hat{y} - y) \\ \\hat{y}(1-\\hat{y})\\cdot x^T12def gradient(self, x, y, y_hat): return np.dot(x.T, (2 * (y_hat - y) * (y_hat * (1 - y_hat)))) Forward and backward propogation.123456789def forward_propogation(self, x): x = inputs.astype(float) return self.sigmoid(np.dot(x, self.weights))def backward_propogation(self, x, y, alpha=1, iterations=10000): for i in range(iterations): y_hat = self.forward_propogation(x) self.weights -= alpha * self.gradient(x, y, y_hat) Testing our initial hypothesis.12345678910111213141516171819if __name__ == \"__main__\": nn = NeuralNetwork() print('\\nrandom synoptic weights') print(nn.weights) x = np.array([[0, 0, 1], [1, 1, 1], [1, 0, 1], [0, 1, 1]]) y = np.array([[0, 1, 1, 0]]).T nn.backward_propogation(x, y) print('\\nweights after training') print(nn.weights) outputs = nn.forward_propogation(x) print('\\noutput after training') print(outputs) 123456789101112131415random synoptic weights[[-0.16595599] [ 0.44064899] [-0.99977125]]weights after training[[10.38061249] [-0.20642264] [-4.98461681]]output after training[[0.0067959 ] [0.99445652] [0.99548577] [0.00553541]] We can see that the neural network learns to put substantial weights on the first feature and makes very accurate predictions in-sample with 10,000 iterations.","tags":"math"},{"title":"Notes on Word2Vec, Stanford Open Course","url":"/2019/07/w2v/","text":"The Word2Vec is an iteration based Natural Language Proceessing (NLP) framework for learning word vectors, developed by Thomas Mikolov. For each word position t in a large corpus of text T we define a fixed window size m and the likelihood function L(\\theta): L(\\theta) = \\prod_{t=1}^T\\prod_{j\\in[-m, m] \\neq 0} p(w_{t+j}|w_t;\\theta)We define the objective function J(\\theta) as the average negative log-likelihood: J(\\theta) = -\\dfrac{1}{T}\\log L(\\theta) = -\\dfrac{1}{T}\\sum_{t=1}^T\\sum_{j\\in [-m, m]\\neq 0} \\log p(w_{t+j}|w_t;\\theta)Say a word w_1 is more likely to appear together with w_2 than w_3, we want to define a probability measure p such that: p(w_2|w_1) > p(w_3|w_1)We achieve this by creating two word vectors \\textbf{v}_w (center) and \\textbf{u}_w (outside) for each word w and using the dot product to represent the similarity of two words. The we use the softmax function to transform the dot products into a probability measure. Note that a softmax function amplifies probabilities for the largest values while still assign some probabilities to smaller values. p(w_o|w_c) = \\text{softmax}(\\textbf{u}_{o}^T\\textbf{v}_{c}) = \\dfrac{\\exp(\\textbf{u}_{o}^T\\textbf{v}_{c})}{\\sum_{w\\in\\mathcal{W}} \\exp(\\textbf{u}_{w}^T\\textbf{v}_{c})}Gradient CalculationWe can now derive the gradient of the objective function. First look at \\partial J(\\theta)/\\partial \\textbf{v}_c: \\begin{align} \\dfrac{\\partial J(\\theta)}{\\partial \\textbf{v}_c} &= -\\dfrac{1}{T}\\sum_{t=1}^T\\sum_{j\\in [-m, m]\\neq 0} \\dfrac{\\partial}{\\partial \\textbf{v}_c}\\log \\dfrac{\\exp(\\textbf{u}_{o}^T\\textbf{v}_{c})}{\\sum_{w\\in\\mathcal{W}} \\exp(\\textbf{u}_{w}^T\\textbf{v}_{c})} \\end{align}Looking at the derivative inside the double summation and use the fact that: \\dfrac{\\partial \\textbf{x}^T\\textbf{a}}{\\partial \\textbf{x}} = \\dfrac{\\partial \\textbf{a}^T\\textbf{x}}{\\partial \\textbf{x}} = aTherefore, \\begin{align} \\dfrac{\\partial J(t, j, \\theta)}{\\partial \\textbf{v}_c} &= \\dfrac{\\partial}{\\partial \\textbf{v}_c}\\log \\dfrac{\\exp(\\textbf{u}_{o}^T\\textbf{v}_{c})}{\\sum_{w\\in\\mathcal{W}} \\exp(\\textbf{u}_{w}^T\\textbf{v}_{c})} \\\\ &= \\textbf{u}_o - \\sum_{w\\in\\mathcal{W}} p(w|w_c)\\textbf{u}_w \\\\ \\end{align}Computing the other derivative w.r.t. \\textbf{u}_o \\begin{align} \\dfrac{\\partial J(t, j, \\theta)}{\\partial \\textbf{u}_o} &= \\dfrac{\\partial}{\\partial \\textbf{u}_o}\\log \\dfrac{\\exp(\\textbf{u}_{o}^T\\textbf{v}_{c})}{\\sum_{w\\in\\mathcal{W}} \\exp(\\textbf{u}_{w}^T\\textbf{v}_{c})} \\\\ &= \\textbf{v}_c [1- \\dfrac{1}{\\sum_{w\\in\\mathcal{W}} \\exp(\\textbf{u}_{w}^T\\textbf{v}_{c})}] \\\\ \\end{align}We used two vector for each word such that the optimization is easier. Eventually we average the two vectors for a given word. We can now use gradient descent to update the model parameters \\theta. \\theta_{new} = \\theta_{old} + \\alpha \\nabla_\\theta J(\\theta)Since \\nabla_\\theta J(\\theta) can be expensive to calculate for the entire corpus of text, we use stochastic gradient descent which updates \\theta with randomly selected samples of text. Examplerequests Requests is a library for making HTTP requests in Python. HTTP functions as a request–response protocol in the client–server computing model. A web browser, for example, may be the client and an application running on a computer hosting a website may be the server. The client submits an HTTP request message to the server. The server, which provides resources such as HTML files and other content, or performs other functions on behalf of the client, returns a response message to the client. The response contains completion status information about the request and may also contain requested content in its message body. A Uniform Resource Locator (URL) is a reference to a web resource, typically includes a protocol (http), a hostname (www.website.com), and a file name (index.html). bs4 Beautiful Soup is a Python library for pulling data out of HTML and XML files, and it can work with a parser to provide functionality of navigating, searching, and modifying the parse tree. Both HTML and XML are markup languages designed for storing and transporting data. re Provides regular expression matching operations. nltk The Natural Language Toolkit is a Python platform for working with human language data. It provides interfaces to lexical resources as well as a suite of text processing libraries. gensim Gensim is an open-source library for unsupervised topic modeling and natural language processing, using modern statistical machine learning. 1234567891011import requestsimport bs4import reimport nltkfrom nltk.corpus import stopwordsfrom gensim.models import Word2Vecurl = 'https://en.wikipedia.org/wiki/Python_(programming_language)'response = requests.get(url).contentsoup = bs4.BeautifulSoup(response, \"lxml\").find_all('p')raw_data = \"\".join([s.text for s in soup]) Perform data cleaning and retain only key words from the parsed data.12345data = raw_data.lower()data = re.sub('[^a-zA-Z]', ' ', data)data = re.sub(r'\\s+', ' ', data)words = [nltk.word_tokenize(sentence) for sentence in nltk.sent_tokenize(data)]words = [[w for w in words[i] if w not in stopwords.words('english')] for i in range(len(words))] Train Word2Vec model.1model = Word2Vec(words, min_count=2) View the word vector for the word ‘python’:1model.wv['python'] 123456789101112131415161718192021array([ 0.00272543, 0.00044483, -0.002916 , -0.00091269, -0.0028646 , 0.00312438, -0.00202833, 0.00418179, 0.00512605, 0.00398485, 0.00383619, -0.00527396, 0.00136241, 0.00048289, 0.00393969, 0.00363039, 0.00516506, 0.00065952, 0.00279527, -0.00289068, -0.0002257 , -0.00423192, 0.00389712, 0.00435556, -0.00169954, 0.00372895, -0.00204547, 0.00031502, -0.000558 , 0.00302919, -0.00329071, -0.00445723, -0.00090491, -0.00073062, 0.0055988 , -0.00180256, -0.00032414, 0.00129002, -0.00077443, -0.00511642, 0.00082947, 0.00207873, 0.00064075, 0.00320432, 0.00252466, 0.00165025, 0.00274325, 0.00557919, 0.00422611, -0.00348751, 0.00488516, 0.00238723, -0.0034958 , 0.00119023, -0.0009317 , -0.00051728, -0.00448227, -0.00145251, 0.00098566, -0.00352017, -0.00017685, 0.00388307, 0.00305843, -0.00614224, 0.00319819, -0.0038121 , 0.00025529, -0.00525783, -0.00364403, 0.00531866, -0.00040134, 0.00509736, -0.00279795, -0.00520586, 0.00088609, -0.00209225, 0.00341286, 0.00403736, -0.00360165, -0.0025662 , -0.00442059, -0.00286324, -0.00441705, -0.00248354, -0.00311305, -0.0017566 , -0.00094437, 0.00274204, -0.00165205, -0.00576063, -0.00485601, 0.00124242, -0.00536304, -0.00042135, -0.00091981, 0.00247618, -0.0041995 , -0.00123214, -0.00465355, 0.00184935], dtype=float32) View words that are most similar to ‘python’:1model.wv.most_similar('python') 12345678910[('revision', 0.3588007390499115), ('system', 0.35286271572113037), ('feature', 0.33182504773139954), ('integer', 0.3286311626434326), ('systems', 0.3157789707183838), ('x', 0.3120567798614502), ('numbers', 0.30488497018814087), ('supports', 0.29797300696372986), ('language', 0.28043025732040405), ('major', 0.2673966884613037)] Some other resources: stackabuse, skymind and google code Reference: Deep Learning for Natural Language Processing, Standford University","tags":"tech"},{"title":"Notes on High Frequency Data Model","url":"/2019/07/high-freq-data-model/","text":"Hypothesis Test and Confidence IntervalA formal statistical data analysis includes: hypothesis testings: seeing whether a structure is present confidence interval: setting error limits on estimates prediction interval: setting error limits on future outcomes We will discuss a typical setting as follow: Let \\beta be the unknown parameter, and \\hat{\\beta}_n is the parameter estimator based on n observations Let \\hat{\\sigma}^2_n be the estimator of \\sigma^2_n, equal to var(\\sqrt{n}(\\hat{\\beta}_n - \\beta)) In rare circumstances where \\sqrt{n}(\\hat{\\beta}_n - \\beta)/\\hat{\\sigma} is independent of the unknown \\beta, such as in regression settings where the error terms \\epsilon_i are i.i.d. normally distributed, we can show that it follows a t-distribution with n-1 degree of freedom. \\dfrac{\\sqrt{n}(\\hat{\\beta}_n - \\beta)}{\\hat{\\sigma}} \\sim t_{n-1} However, asymptotically as n\\rightarrow\\infty, the Central Limit Theorem applies which release us from the assumption restriction above. Under a variety of regular conditions: \\lim_{n\\rightarrow\\infty} \\dfrac{\\sqrt{n}(\\hat{\\beta}_n - \\beta)}{\\hat{\\sigma}} \\sim \\mathcal{N}(0, 1) The 1-\\alpha confidence interval can then be computed as: \\beta \\in CI = \\hat{\\beta}_n \\pm t^{\\alpha}_{n-1}\\hat{\\sigma}_n/\\sqrt{n} \\\\ \\text{or asymptotically, swapping } t^{\\alpha}_{n-1} \\text{ by } z^{\\alpha} The 1-\\alpha hypothesis test of \\beta=\\beta_0 would: accept H_0 that \\beta=\\beta_0 if \\beta \\in CI reject H_0 that \\beta=\\beta_0 if \\beta \\notin CI The p-value is \\alpha such that the hypothesis test is indifference between accept or reject. In practice, t-distribution is typically used for regression data as it is more conservative (t^{\\alpha}_{n-1} > z^{\\alpha}). For non-regression data, normal distribution is often used. Some background on LLN and CLT: Given n i.i.d. random variable X_i. Let \\bar{X} = \\sum X_i/n The Law of Large Numbers states that if \\mathbb{E}|X|","tags":"math"},{"title":"My LeetCode Solutions","url":"/2019/07/leetcode/","text":"Navigation01. Two Sum02. Add Two Numbers07. Reverse Integer09. Palindrome Number11. Container With Most Water14. Longest Common Prefix19. Remove Nth Node From End of List21. Merge Two Sorted Lists26. Remove Duplicates from Sorted Array27. Remove Element28. Implement strStr()35. Search Insert Position36. Valid Sudoku37. Sudoku Solver38. Count and Say51. N-Queens52. N-Queens II53. Maximum Subarray58. Length of Last Word66. Plus One67. Add Binary69. Sqrt(x)70. Climbing Stairs80. Remove Duplicates from Sorted Array II82. Remove Duplicates from Sorted List II83. Remove Duplicates from Sorted List88. Merge Sorted Array94. Binary Tree Inorder Traversal96. Unique Binary Search Trees100. Same Tree 30/100 Completed 01. Two Sum &#8634;Given an array of integers, return indices of the two numbers such that they add up to a specific target. You may assume that each input would have exactly one solution, and you may not use the same element twice. Example: 1234Given nums = [2, 7, 11, 15], target = 9,Because nums[0] + nums[1] = 2 + 7 = 9,return [0, 1]. My Solution 1 Brute Force Approach. Time Complexity: O(N^2) Space Complexity: O(1) 1234567class Solution: def twoSum(self, nums: List[int], target: int) -&gt; List[int]: for i in range(len(nums)): for j in range(i+1, len(nums)): if (nums[i] + nums[j]) == target: return [i, j] My Solution 2 One-Pass Hash Table. Time Complexity: O(N) Space Complexity: O(N) The idea of hashing is to distribute the key-value pairs across an array of buckets. Given a key, the hash function computes the location of the value. By using a hash table we reduce the look up time to near constant, assuming the hash function is O(1). However, the hash function need to be chosen carefully to avoid a collision, which would degenerate the look up time to O(N). 123456789class Solution: def twoSum(self, nums: List[int], target: int) -&gt; List[int]: dict = &#123;&#125; for i in range(len(nums)): if target-nums[i] not in dict: dict[nums[i]] = i else: return [dict[target-nums[i]], i] 02. Add Two Numbers &#8634;You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list. You may assume the two numbers do not contain any leading zero, except the number 0 itself. Example: 123Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)Output: 7 -&gt; 0 -&gt; 8Explanation: 342 + 465 = 807. My Solution Time Complexity: O(max(m, n)) Space Complexity: O(max(m, n)) 1234567891011121314151617181920212223242526272829303132333435363738# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def addTwoNumbers(self, l1: ListNode, l2: ListNode) -&gt; ListNode: l3 = ListNode(0) tmp1, tmp2, tmp3 = l1, l2, l3 add_one = 0 while (tmp1 or tmp2) or add_one: if tmp1 and tmp2: tmp3.val = (tmp1.val + tmp2.val + add_one) % 10 add_one = (tmp1.val + tmp2.val + add_one) // 10 &gt; 0 tmp1, tmp2 = tmp1.next, tmp2.next elif tmp1 and not tmp2: tmp3.val = (tmp1.val + add_one) % 10 add_one = (tmp1.val + add_one)// 10 &gt; 0 tmp1 = tmp1.next elif not tmp1 and tmp2: tmp3.val = (tmp2.val + add_one) % 10 add_one = (tmp2.val + add_one) // 10 &gt; 0 tmp2 = tmp2.next else: tmp3.val = 1 add_one = 0 if (tmp1 or tmp2) or add_one: tmp3.next = ListNode(0) tmp3 = tmp3.next return l3 7. Reverse Integer &#8634;Given a 32-bit signed integer, reverse digits of an integer. Example 1: 12Input: 123Output: 321 My Solution Time Complexity: O(\\log N) Space Complexity: O(1) 1234567891011121314class Solution: def reverse(self, x: int) -&gt; int: is_neg = x &lt; 0 if is_neg: x = -x a, b = x % 10, x // 10 while b: if a &gt; 2**31 / 10: return 0 a = a * 10 + b % 10 b = b // 10 if is_neg: return -a else: return a 9. Palindrome Number &#8634;Determine whether an integer is a palindrome. An integer is a palindrome when it reads the same backward as forward. Example 1: 12Input: 121Output: true My Solution Time Complexity: O(\\log N) Space Complexity: O(1) 12345678910111213141516class Solution: def isPalindrome(self, x: int) -&gt; bool: if x &lt; 0: return False elif x &lt; 10: return True a, b = x % 10, x // 10 if a == 0: return False while b &gt; a: a = a * 10 + b % 10 b = b // 10 print(a, b) if a // 10 == 0: return a == b else: return (a == b) or (a // 10 == b) Alternative Solution One-Liner. Time Complexity: O(N) Space Complexity: O(N) 123class Solution: def isPalindrome(self, x: int) -&gt; bool: return str(x) == str(x)[::-1] 11. Container With Most Water &#8634;Given n non-negative integers a1, a2, …, an , where each represents a point at coordinate (i, ai). n vertical lines are drawn such that the two endpoints of line i is at (i, ai) and (i, 0). Find two lines, which together with x-axis forms a container, such that the container contains the most water. Note: You may not slant the container and n is at least 2. The above vertical lines are represented by array [1,8,6,2,5,4,8,3,7]. In this case, the max area of water (blue section) the container can contain is 49. Example: 12Input: [1,8,6,2,5,4,8,3,7]Output: 49 My Solution 1 Brute Force. Time Complexity: O(N^2) Space Complexity: O(1) 123456789class Solution: def maxArea(self, height: List[int]) -&gt; int: s = set() for i in range(len(height)): for j in range(i + 1, len(height)): s.add((j-i) * min(height[i], height[j])) return sorted(s)[-1] My Solution 2 Two Pointer Approach. Time Complexity: O(N) Space Complexity: O(1) 123456789101112131415class Solution: def maxArea(self, height: List[int]) -&gt; int: m = 0 l = 0 r = len(height) - 1 while r != l: if height[r] &lt;= height[l]: m = max(m, (r-l) * height[r]) r -= 1 else: m = max(m, (r-l) * height[l]) l += 1 return m 14. Longest Common Prefix &#8634;Write a function to find the longest common prefix string amongst an array of strings. If there is no common prefix, return an empty string “”. Example 1: 12Input: [\"flower\",\"flow\",\"flight\"]Output: \"fl\" My Solution Vertical Scanning. Time Complexity: O(N \\cdot min\\ M) where N is the number of strings and M is the length of the string Space Complexity: O(1) 12345678910111213141516171819202122class Solution: def longestCommonPrefix(self, strs: List[str]) -&gt; str: if strs: tmp = \"\" curr_str = \"\" for i in range(len(strs[0])): curr_str = strs[0][i] for j in range(1, len(strs)): try: if strs[j][i] != curr_str: return tmp except IndexError: return tmp tmp += curr_str return tmp else: return \"\" 19. Remove Nth Node From End of List &#8634;Given a linked list, remove the n-th node from the end of list and return its head. Example: 123Given linked list: 1-&gt;2-&gt;3-&gt;4-&gt;5, and n = 2.After removing the second node from the end, the linked list becomes 1-&gt;2-&gt;3-&gt;5. My Solution 1 Two Pass Algorithm. Time Complexity: O(N) Space Complexity: O(1) 123456789101112131415161718192021222324# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def removeNthFromEnd(self, head: ListNode, n: int) -&gt; ListNode: tmp = head length = 0 while tmp: length += 1 tmp = tmp.next tmp = head if length == n: head = head.next else: for i in range(length - n - 1): tmp = tmp.next tmp.next = tmp.next.next return head My Solution 2 One Pass Algorithm. Time Complexity: O(N) Space Complexity: O(1) 1234567891011121314class Solution: def removeNthFromEnd(self, head: ListNode, n: int) -&gt; ListNode: tmp1, tmp2 = head, head for i in range(n): tmp2 = tmp2.next if tmp2: while tmp2.next: tmp1, tmp2 = tmp1.next, tmp2.next tmp1.next = tmp1.next.next return head else: return head.next 21. Merge Two Sorted Lists &#8634;Merge two sorted linked lists and return it as a new list. The new list should be made by splicing together the nodes of the first two lists. Example: 12Input: 1-&gt;2-&gt;4, 1-&gt;3-&gt;4Output: 1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4 My Solution12345678910111213141516171819202122232425262728293031323334353637383940# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def mergeTwoLists(self, l1: ListNode, l2: ListNode) -&gt; ListNode: l3 = ListNode(\"\") tmp1, tmp2, tmp3 = l1, l2, l3 while tmp1 or tmp2: if tmp1 and tmp2: if tmp1.val &lt;= tmp2.val: tmp3.val = tmp1.val tmp1 = tmp1.next else: tmp3.val = tmp2.val tmp2 = tmp2.next if tmp1 or tmp2: tmp3.next = ListNode(0) tmp3 = tmp3.next elif tmp1 and not tmp2: tmp3.val = tmp1.val tmp1 = tmp1.next if tmp1: tmp3.next = ListNode(0) tmp3 = tmp3.next elif not tmp1 and tmp2: tmp3.val = tmp2.val tmp2 = tmp2.next if tmp2: tmp3.next = ListNode(0) tmp3 = tmp3.next return l3 Alternative Solution Recursion.1234567class Solution: def mergeTwoLists(self, l1: ListNode, l2: ListNode) -&gt; ListNode: if l1 and l2: if l1.val &gt; l2.val: l1, l2 = l2, l1 # keep l1 always point to the smallest node l1.next = self.mergeTwoLists(l1.next, l2) # each step, connect the current smallest node to the already linked list return l1 or l2 # short-circuit evaluation, if l1 not None, return l1, else, return l2 26. Remove Duplicates from Sorted Array &#8634;Given a sorted array nums, remove the duplicates in-place such that each element appear only once and return the new length. Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory. Example 1:12345Given nums = [1,1,2],Your function should return length = 2, with the first two elements of nums being 1 and 2 respectively.It doesn't matter what you leave beyond the returned length. My Solution 1 Two Pointers. Time Complexity: O(N) Space Complexity: O(1) 123456789101112class Solution: def removeDuplicates(self, nums: List[int]) -&gt; int: if nums: tmp = 0 for i in range(1, len(nums)): if nums[i] != nums[tmp]: tmp += 1 nums[tmp] = nums[i] return tmp + 1 else: return 0 27. Remove Element Array &#8634;Given an array nums and a value val, remove all instances of that value in-place and return the new length. Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory. The order of elements can be changed. It doesn’t matter what you leave beyond the new length. Example 1: 1Given nums = [3,2,2,3], val = 3, My Solution Two Pointer. Time Complexity: O(N) Space Complexity: O(1) 123456789class Solution: def removeElement(self, nums: List[int], val: int) -&gt; int: new_array_ptr = 0 for i in range(len(nums)): if nums[i] != val: nums[new_array_ptr] = nums[i] new_array_ptr += 1 return new_array_ptr 28. Implement strStr() &#8634;Implement strStr(). Return the index of the first occurrence of needle in haystack, or -1 if needle is not part of haystack. Example 1: 12Input: haystack = \"hello\", needle = \"ll\"Output: 2 My Solution1234567891011class Solution: def strStr(self, haystack: str, needle: str) -&gt; int: if needle: length = len(needle) for i in range(len(haystack)): if haystack[i:i+length] == needle: return i return -1 else: return 0 35. Search Insert Position &#8634;Given a sorted array and a target value, return the index if the target is found. If not, return the index where it would be if it were inserted in order. You may assume no duplicates in the array. Example 1: 12Input: [1,3,5,6], 5Output: 2 My Solution1234567class Solution: def searchInsert(self, nums: List[int], target: int) -&gt; int: for i in range(len(nums)): if nums[i] &gt;= target: return i return len(nums) 36. Valid Sudoku &#8634;Determine if a 9x9 Sudoku board is valid. Only the filled cells need to be validated according to the following rules: Each row must contain the digits 1-9 without repetition.Each column must contain the digits 1-9 without repetition.Each of the 9 3x3 sub-boxes of the grid must contain the digits 1-9 without repetition. The Sudoku board could be partially filled, where empty cells are filled with the character ‘.’. Example 1: 12345678910111213Input:[ [\"5\",\"3\",\".\",\".\",\"7\",\".\",\".\",\".\",\".\"], [\"6\",\".\",\".\",\"1\",\"9\",\"5\",\".\",\".\",\".\"], [\".\",\"9\",\"8\",\".\",\".\",\".\",\".\",\"6\",\".\"], [\"8\",\".\",\".\",\".\",\"6\",\".\",\".\",\".\",\"3\"], [\"4\",\".\",\".\",\"8\",\".\",\"3\",\".\",\".\",\"1\"], [\"7\",\".\",\".\",\".\",\"2\",\".\",\".\",\".\",\"6\"], [\".\",\"6\",\".\",\".\",\".\",\".\",\"2\",\"8\",\".\"], [\".\",\".\",\".\",\"4\",\"1\",\"9\",\".\",\".\",\"5\"], [\".\",\".\",\".\",\".\",\"8\",\".\",\".\",\"7\",\"9\"]]Output: true My Solution Two Liner.123456789class Solution: def isValid(self, l: List[str]) -&gt; bool: tmp = [i for i in l if i != '.'] return len(set(tmp)) == len(tmp) def isValidSudoku(self, board: List[List[str]]) -&gt; bool: box = [[board[i][j] for i in range(col, col+3) for j in range(row, row+3)] for col in (0, 3, 6) for row in (0, 3, 6)] return all([self.isValid(l) for l in [*box, *board, *zip(*board)]]) 37. Sudoku Solver &#8634;Write a program to solve a Sudoku puzzle by filling the empty cells. A sudoku solution must satisfy all of the following rules: Each of the digits 1-9 must occur exactly once in each row.Each of the digits 1-9 must occur exactly once in each column.Each of the the digits 1-9 must occur exactly once in each of the 9 3x3 sub-boxes of the grid.Empty cells are indicated by the character ‘.’. Example 1:123456789101112131415161718192021222324Input:[ [\"5\",\"3\",\".\",\".\",\"7\",\".\",\".\",\".\",\".\"], [\"6\",\".\",\".\",\"1\",\"9\",\"5\",\".\",\".\",\".\"], [\".\",\"9\",\"8\",\".\",\".\",\".\",\".\",\"6\",\".\"], [\"8\",\".\",\".\",\".\",\"6\",\".\",\".\",\".\",\"3\"], [\"4\",\".\",\".\",\"8\",\".\",\"3\",\".\",\".\",\"1\"], [\"7\",\".\",\".\",\".\",\"2\",\".\",\".\",\".\",\"6\"], [\".\",\"6\",\".\",\".\",\".\",\".\",\"2\",\"8\",\".\"], [\".\",\".\",\".\",\"4\",\"1\",\"9\",\".\",\".\",\"5\"], [\".\",\".\",\".\",\".\",\"8\",\".\",\".\",\"7\",\"9\"]]Output:[ [\"5\",\"3\",\"4\",\"6\",\"7\",\"8\",\"9\",\"1\",\"2\"], [\"6\",\"7\",\"2\",\"1\",\"9\",\"5\",\"3\",\"4\",\"8\"], [\"1\",\"9\",\"8\",\"3\",\"4\",\"2\",\"5\",\"6\",\"7\"], [\"8\",\"5\",\"9\",\"7\",\"6\",\"1\",\"4\",\"2\",\"3\"], [\"4\",\"2\",\"6\",\"8\",\"5\",\"3\",\"7\",\"9\",\"1\"], [\"7\",\"1\",\"3\",\"9\",\"2\",\"4\",\"8\",\"5\",\"6\"], [\"9\",\"6\",\"1\",\"5\",\"3\",\"7\",\"2\",\"8\",\"4\"], [\"2\",\"8\",\"7\",\"4\",\"1\",\"9\",\"6\",\"3\",\"5\"], [\"3\",\"4\",\"5\",\"2\",\"8\",\"6\",\"1\",\"7\",\"9\"]] My Solution DFS with Backtracking. Adapted from this solution. 1234567891011121314151617181920212223242526272829303132333435363738394041class Solution: def __init__(self): self.row = [[0 for i in range(10)] for j in range(9)] self.col = [[0 for i in range(10)] for j in range(9)] self.box = [[0 for i in range(10)] for j in range(9)] def solve(self, board: List[List[str]], x:int, y:int) -&gt; bool: if y == 9: return True next_x = (x + 1) % 9 next_y = (y + 1) if next_x == 0 else y if board[y][x] != '.': return self.solve(board, next_x, next_y) for val in range(1, 10): box_index = int(y/3)*3 + int(x/3) if (not self.row[y][val] and not self.col[x][val] and not self.box[box_index][val]): self.row[y][val] = 1 self.col[x][val] = 1 self.box[box_index][val] = 1 board[y][x] = str(val) if self.solve(board, next_x, next_y): return True self.row[y][val] = 0 self.col[x][val] = 0 self.box[box_index][val] = 0 board[y][x] = '.' return False def solveSudoku(self, board: List[List[str]]) -&gt; None: for y in range(9): for x in range(9): if board[y][x] != '.': val = int(board[y][x]) box_index = int(y/3)*3 + int(x/3) self.row[y][val] = 1 self.col[x][val] = 1 self.box[box_index][val] = 1 self.solve(board, 0, 0) 38. Count and Say &#8634;The count-and-say sequence is the sequence of integers with the first five terms as following: 123451. 12. 113. 214. 12115. 111221 1 is read off as “one 1” or 11.11 is read off as “two 1s” or 21.21 is read off as “one 2, then one 1” or 1211. Given an integer n where 1 ≤ n ≤ 30, generate the nth term of the count-and-say sequence. Note: Each term of the sequence of integers will be represented as a string. Example 1:1234Input: 1Output: \"1\"Input: 4Output: \"1211\" My Solution12345678910111213141516171819202122class Solution: def countAndSay(self, n: int) -&gt; str: res = '1' for i in range(1, n): # 1, ... n-1 tmp = res[0] count = 0 res_new = '' for j in range(0, len(res)): if res[j] == tmp: count += 1 elif res[j] != tmp: res_new += str(count) + str(tmp) count = 1 tmp = res[j] if j == len(res)-1: res_new += str(count) + str(tmp) res = res_new return res 51. N-Queens &#8634;The n-queens puzzle is the problem of placing n queens on an n×n chessboard such that no two queens attack each other.Given an integer n, return all distinct solutions to the n-queens puzzle. Each solution contains a distinct board configuration of the n-queens’ placement, where ‘Q’ and ‘.’ both indicate a queen and an empty space respectively. Example: 123456789101112Input: 4Output: [ [\".Q..\", // Solution 1 \"...Q\", \"Q...\", \"..Q.\"], [\"..Q.\", // Solution 2 \"Q...\", \"...Q\", \".Q..\"]] My Solution DFS with Backtracking.123456789101112131415161718192021222324252627282930313233class Solution: def isEmpty(self, row: int, col: int) -&gt; bool: for i in range(row): for j in range(self.n): if self.board[i][j] == 'Q' and (i == row or j == col or i - j == row - col or i + j == row + col): return False return True def solve(self, row: int) -&gt; bool: if row == self.n: return True for col in range(self.n): if self.isEmpty(row, col): self.board[row][col] = 'Q' if self.solve(row + 1): self.result.append([i[:] for i in self.board]) self.board[row][col] = '.' return False def solveNQueens(self, n: int) -&gt; List[List[str]]: self.n = n self.board = [['.' for i in range(n)] for j in range(n)] self.result = [] self.solve(0) return [[''.join(i) for i in j] for j in self.result] Alternative Solution DFS with Backtracking. Speed is improved by keeping queen’s location in list rather than altering the board during recursion. 123456789101112def solveNQueens(self, n): def DFS(queens, xy_dif, xy_sum): p = len(queens) if p==n: result.append(queens) return None for q in range(n): if q not in queens and p-q not in xy_dif and p+q not in xy_sum: DFS(queens+[q], xy_dif+[p-q], xy_sum+[p+q]) result = [] DFS([],[],[]) return [ [\".\"*i + \"Q\" + \".\"*(n-i-1) for i in sol] for sol in result] 52. N-Queens II &#8634;Same as 51. 53. Maximum Subarray &#8634;Given an integer array nums, find the contiguous subarray (containing at least one number) which has the largest sum and return its sum. Example: 123Input: [-2,1,-3,4,-1,2,1,-5,4],Output: 6Explanation: [4,-1,2,1] has the largest sum = 6. My Solution One Pass. Time Complexity: O(N) 1234567lass Solution: def maxSubArray(self, nums: List[int]) -&gt; int: for i in range(1, len(nums)): if nums[i-1] &gt; 0: nums[i] += nums[i-1] return max(nums) My Solution 2 Divide and Conquer. Time Complexity: O(N\\log N) 123456789101112131415161718192021222324252627class Solution: def conquer(self, nums, l, m, r) -&gt; int: tmp, lsum = 0, -10**6 for i in range(m, l-1, -1): tmp = tmp + nums[i] if tmp &gt; lsum: lsum = tmp tmp, rsum = 0, -10**6 for i in range(m+1, r+1): tmp = tmp + nums[i] if tmp &gt; rsum: rsum = tmp return lsum + rsum def divide(self, nums, l, r): if l == r: return nums[l] else: m = (l + r) // 2 return max(self.divide(nums, l, m), self.divide(nums, m+1, r), self.conquer(nums, l, m, r)) def maxSubArray(self, nums: List[int]) -&gt; int: return self.divide(nums, 0, len(nums)-1) 58. Length of Last Word &#8634;Given a string s consists of upper/lower-case alphabets and empty space characters ‘ ‘, return the length of last word in the string. If the last word does not exist, return 0. Note: A word is defined as a character sequence consists of non-space characters only. Example: 12Input: \"Hello World\"Output: 5 My Solution123456789class Solution: def lengthOfLastWord(self, s: str) -&gt; int: if not s: return 0 i, j = len(s)-1, 0 while s[i] == ' ' and i &gt;= 0: i -= 1 while s[i-j] != ' ' and i-j &gt;= 0: j += 1 return j Alternative Solution One Liner.1return 0 if not s.split() else len(s.split()[-1]) 66. Plus One &#8634;Given a non-empty array of digits representing a non-negative integer, plus one to the integer. The digits are stored such that the most significant digit is at the head of the list, and each element in the array contain a single digit. You may assume the integer does not contain any leading zero, except the number 0 itself. Example 1: 123Input: [1,2,3]Output: [1,2,4]Explanation: The array represents the integer 123. My Solution Recursion.123456789101112131415class Solution: def plusOne(self, digits: List[int]) -&gt; List[int]: return self.plusOneFunc(digits, len(digits)-1) def plusOneFunc(self, l, i): if l[i] == 9: l[i] = 0 if i != 0: return self.plusOneFunc(l, i-1) else: l = [1] + l else: l[i] += 1 return l 67. Add Binary &#8634;Given two binary strings, return their sum (also a binary string). The input strings are both non-empty and contains only characters 1 or 0. Example 1: 12Input: a = \"11\", b = \"1\"Output: \"100\" Alternative Solution Recursion.1234567891011class Solution: def addBinary(self, a: str, b: str) -&gt; str: if len(a)==0: return b if len(b)==0: return a if a[-1] == '1' and b[-1] == '1': return self.addBinary(self.addBinary(a[0:-1],b[0:-1]),'1')+'0' elif a[-1] == '0' and b[-1] == '0': return self.addBinary(a[0:-1],b[0:-1])+'0' else: return self.addBinary(a[0:-1],b[0:-1])+'1' 69. Sqrt(x) &#8634;Implement int sqrt(int x). Compute and return the square root of x, where x is guaranteed to be a non-negative integer. Since the return type is an integer, the decimal digits are truncated and only the integer part of the result is returned. Example 1: 12Input: 4Output: 2 My Solution Binary Search.1234567891011class Solution: def mySqrt(self, x: int) -&gt; int: l, r = 0, x while l &lt;= r: m = (l + r) // 2 if m*m &lt;= x &lt; (m+1)*(m+1): return m elif m*m &gt; x: r = m else: l = m + 1 70. Climbing Stairs &#8634;You are climbing a stair case. It takes n steps to reach to the top. Each time you can either climb 1 or 2 steps. In how many distinct ways can you climb to the top? Note: Given n will be a positive integer. Example 1: 12345Input: 2Output: 2Explanation: There are two ways to climb to the top.1. 1 step + 1 step2. 2 steps My Solution Recursion. Time Complexity: O(2^N) Space Complexity: O(N) 1234class Solution: def climbStairs(self, n: int) -&gt; int: if n == 0 or n == 1: return 1 return self.climbStairs(n - 1) + self.climbStairs(n - 2) My Solution 2 Fibonacci Number. Time Complexity: O(N) Space Complexity: O(1) 12345def climbStairs(self, n: int) -&gt; int: a, b = 0, 1 for i in range(n): a, b = b, a + b return b 80. Remove Duplicates from Sorted Array II &#8634;Given a sorted array nums, remove the duplicates in-place such that duplicates appeared at most twice and return the new length. Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory. Example 1: 12345Given nums = [1,1,1,2,2,3],Your function should return length = 5, with the first five elements of nums being 1, 1, 2, 2 and 3 respectively.It doesn't matter what you leave beyond the returned length. My Solution1234567891011121314151617181920class Solution: def removeDuplicates(self, nums: List[int]) -&gt; int: if nums: tmp = 0 dup = False for i in range(1, len(nums)): if nums[i] == nums[tmp] and not dup: tmp += 1 dup = True nums[tmp] = nums[i] elif nums[i] == nums[tmp] and dup: pass elif nums[i] != nums[tmp]: tmp += 1 dup = False nums[tmp] = nums[i] return tmp + 1 else: return 0 Alternative Solution1234567def removeDuplicates(self, nums): i = 0 for n in nums: if i &lt; 2 or n &gt; nums[i-2]: nums[i] = n i += 1 return i 82. Remove Duplicates from Sorted List II &#8634;Given a sorted linked list, delete all nodes that have duplicate numbers, leaving only distinct numbers from the original list. Example 1: 12Input: 1-&gt;2-&gt;3-&gt;3-&gt;4-&gt;4-&gt;5Output: 1-&gt;2-&gt;5 My Solution123456789101112131415161718192021222324# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def deleteDuplicates(self, head: ListNode) -&gt; ListNode: init = ListNode(0) prev = init prev.next = head curr = head while curr: if curr.next and curr.val == curr.next.val: while curr.next and curr.val == curr.next.val: curr.next = curr.next.next prev.next = curr.next curr = curr.next else: curr = curr.next prev = prev.next return init.next 83. Remove Duplicates from Sorted List &#8634;Given a sorted linked list, delete all duplicates such that each element appear only once. Example 1: 12Input: 1-&gt;1-&gt;2Output: 1-&gt;2 My Solution1234567891011121314# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def deleteDuplicates(self, head: ListNode) -&gt; ListNode: tmp = head while tmp: while tmp.next and tmp.val == tmp.next.val: tmp.next = tmp.next.next tmp = tmp.next return head 88. Merge Sorted Array &#8634;Given two sorted integer arrays nums1 and nums2, merge nums2 into nums1 as one sorted array. Note: The number of elements initialized in nums1 and nums2 are m and n respectively.You may assume that nums1 has enough space (size that is greater or equal to m + n) to hold additional elements from nums2.Example: 12345Input:nums1 = [1,2,3,0,0,0], m = 3nums2 = [2,5,6], n = 3Output: [1,2,2,3,5,6] My Solution1234567891011class Solution: def merge(self, nums1: List[int], m: int, nums2: List[int], n: int) -&gt; None: while m &gt; 0 and n &gt; 0: if nums1[m-1] &gt; nums2[n-1]: nums1[m+n-1] = nums1[m-1] m -= 1 else: nums1[m+n-1] = nums2[n-1] n -= 1 if n &gt; 0: nums1[:n] = nums2[:n] 94. Binary Tree Inorder Traversal &#8634;Given a binary tree, return the inorder traversal of its nodes’ values. Example: 12345678Input: [1,null,2,3] 1 \\ 2 / 3Output: [1,3,2] My Solution Recursion.123456789101112131415161718# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def inorderTraversal(self, root: TreeNode) -&gt; List[int]: res = [] self.func(root, res) return res def func(self, root, res): if root: self.func(root.left, res) res.append(root.val) self.func(root.right, res) Alternative Solution Iteration.1234567891011def inorderTraversal(self, root): res, stack = [], [] while True: while root: stack.append(root) root = root.left if not stack: return res node = stack.pop() res.append(node.val) root = node.right 96. Unique Binary Search Trees &#8634;Given n, how many structurally unique BST’s (binary search trees) that store values 1 … n? Example: 12345678910Input: 3Output: 5Explanation:Given n = 3, there are a total of 5 unique BST's: 1 3 3 2 1 \\ / / / \\ \\ 3 2 1 1 3 2 / / \\ \\ 2 1 2 3 My Solution DP.123456789class Solution: def numTrees(self, n: int) -&gt; int: f = [1] for i in range(1, n+1): tmp = 0 for j in range(i): tmp += f[j] * f[i-j-1] f.append(tmp) return f[n] 100. Same Tree &#8634;Given two binary trees, write a function to check if they are the same or not. Two binary trees are considered the same if they are structurally identical and the nodes have the same value. Example 1: 1234567Input: 1 1 / \\ / \\ 2 3 2 3 [1,2,3], [1,2,3]Output: true My Solution Recursion.123456789101112131415161718# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def isSameTree(self, p: TreeNode, q: TreeNode) -&gt; bool: if p and q: return p.val == q.val and self.isSameTree(p.left, q.left) and self.isSameTree(p.right, q.right) if not p and not q: return True return False","tags":"tech"},{"title":"Bitcoin Analysis (2): Momentum Strategies","url":"/2019/07/algo-2/","text":"In this research I studied on the performance of simple and exponential moving average crossover strategies, with window sizes chosen by optimizing in-sample PNL, sharpe ratio and 30-day maximum drawdown. The calibrated strategy performs well, earning 500% cumulative return compared to baseline and a sharpe ratio of 1.30. The the 30-day maximum drawdown is similar to the baseline. Strategy P&amp;L Sharpe Ratio Maximum Drawdown 0 Baseline 0.28 -1.48 0.35 1 MA 1.54 1.30 0.37 2 EWMA 1.45 1.10 0.38 MotivationIt is no secret that price manipulations have always plagued the rising crypto-market. In this [paper], the auther studies large transactions behind the tether coin, and showed more evidence supporting that each large move in the crypto-market usually only come from the act of only a few. In this type of regime, I argue that technical indicator may be a better bet to profit compared to any attempt to apply fundamental analysis, because an increase in price no longer comes from the increase in a crypto’s intrinsic value, but rather speculation and manipulation. In this exercise I will mainly focus on moving average crossover techniques and its optimization. Packages123456789101112131415161718import itertoolsfrom IPython.display import display, HTML, Imageimport matplotlib.pyplot as pltimport matplotlib.ticker as tickerimport numpy as npimport pandas as pdfrom pandas.plotting import register_matplotlib_convertersimport warningsregister_matplotlib_converters()warnings.filterwarnings(\"ignore\")plt.rcParams['font.family'] = \"serif\"plt.rcParams['font.serif'] = \"DejaVu Serif\"plt.rcParams['figure.figsize'] = (12, 6)plt.rcParams['figure.dpi'] = 150plt.rcParams['lines.linewidth'] = 0.75pd.set_option('max_row', 10) Function12def disp(df): return display(HTML(df.to_html(max_rows=10, header=True).replace('&lt;table border=\"1\" class=\"dataframe\"&gt;','&lt;table&gt;'))) Data ExplorationI got the preliminary bitcoin data from bitcoincharts. Data include price and volume information recorded by Bitstamp and split by seconds. This provide great granularity that can be grouped into any desirable levels later on. 123data = pd.read_csv('bitstampUSD.csv', header=None, names=['time', 'price', 'volume'])data['time'] = pd.to_datetime(data['time'], unit='s')data.set_index('time', inplace=True) Get 3-month treasury data. 12url = 'https://fred.stlouisfed.org/graph/fredgraph.csv?id=DTB3'tr = pd.read_csv(url, index_col=0, parse_dates=True) Data are grouped in to daily, with average applied to price and sum applied to trade volume. The backtest period is selected to be from 2018 to 2019, where the market was in continuous downturn. This ensure that our strategy performs well in adverse scenarios. 12345df1 = data.loc['2018-01-01':'2019-01-01'].resample('1D').agg(&#123;'price': np.mean, 'volume': np.sum&#125;)df2 = tr.loc['2018-01-01':'2019-01-01']df = df1.join(df2).replace('.', np.NaN).fillna(method='ffill').fillna(method='bfill').rename(&#123;'DTB3': 'tr'&#125;, axis=1)df.tr = df.tr.astype(float)/100disp(df) price volume tr time 2018-01-01 13386.429268 7688.030685 0.0142 2018-01-02 14042.643870 16299.669303 0.0142 2018-01-03 14947.898046 12275.001197 0.0139 2018-01-04 14802.363927 15004.018593 0.0139 2018-01-05 15967.972719 16248.914680 0.0137 ... ... ... ... 2018-12-28 3752.739978 13055.718407 0.0235 2018-12-29 3862.153295 6901.382332 0.0235 2018-12-30 3783.210991 5736.453708 0.0235 2018-12-31 3745.258717 6667.163737 0.0240 2019-01-01 3709.889253 5149.606277 0.0240 123plt.plot(df.price, c='tab:grey')plt.ylabel('Bitcoin Price in USD')plt.show() Simple Moving AverageA simple moving average strategy use the cross-over point of two moving averages as the trading signal. Here we use grid-search to find out the window size pair that optimizes our desired metrics, namely P&amp;L, Sharpe ratio and 30-day maximum drawdown. 123456789101112131415161718192021222324252627282930313233def moving_average(df0, ma1, ma2, transactionFee=0, runBaseline=False, returnStats=True, ewma=False): df = df0.copy() if ewma: df['ma'+str(ma1)] = df.price.ewm(span=ma1).mean() df['ma'+str(ma2)] = df.price.ewm(span=ma2).mean() else: df['ma'+str(ma1)] = df.price.rolling(ma1).mean() df['ma'+str(ma2)] = df.price.rolling(ma2).mean() df['ind'] = df['ma'+str(ma1)] &gt; df['ma'+str(ma2)] df.dropna(inplace=True) df['buy'] = (df.ind != df.ind.shift(1)) &amp; df.ind &amp; (df.index != df.index[0]) df['sell'] = (df.ind != df.ind.shift(1)) &amp; df.ind.shift(1) &amp; (df.buy.cumsum() &gt; 0) if runBaseline: df.ind = 1 df.buy = 1 df['pnl'] = df.ind * (df.buy.cumsum() &gt; 0) * df.price.shift(-1) / df.price df.pnl = df.pnl * np.where(df.ind != df.ind.shift(1), 1-transactionFee, 1) df.dropna(inplace=True) df.pnl.replace(0, 1, inplace=True) if returnStats: df['tr_daily'] = (1 + df.tr)**(1/365) - 1 pnl = round(df.pnl.cumprod()[-1], 2) sharpe_ratio = round(np.mean(df.pnl-1-df.tr_daily) / np.std(df.pnl-1) * np.sqrt(365), 2) mdd_dur = 30 max_draw_down = round(np.max(df.pnl.cumprod().rolling(mdd_dur).max() - df.pnl.cumprod().shift(mdd_dur)), 2) return pnl, sharpe_ratio, max_draw_down else: return df First let’s compute the baseline results, from a simple buy and hold strategy. 123pnl, spr, mdd = moving_average(df, 1, 1, runBaseline=True)comp = pd.DataFrame(&#123;'Strategy': 'Baseline', 'P&amp;L': pnl, 'Sharpe Ratio': spr, 'Maximum Drawdown': mdd&#125;, index=[0])disp(comp) Strategy P&amp;L Sharpe Ratio Maximum Drawdown 0 Baseline 0.28 -1.48 0.35 Performing grid-search for the optimal window size pair. Note that 25bps of transaction fee is added, this is to reflect the typical fee charged by crypto exchanges. I used coinbase pro’s fee here as an example. 12345678910111213fee = 0.0025test_range = np.arange(1, 61)result_ma = pd.DataFrame(columns=['Strategy','MA1', 'MA2', 'P&amp;L', 'Sharpe Ratio', 'Maximum Drawdown'])# grid-searchfor ma1 in test_range: for ma2 in test_range: if ma2 &gt; ma1 + 3: pnl, spr, mdd = moving_average(df, ma1, ma2, transactionFee=fee) result_ma = result_ma.append(&#123;'Strategy': 'MA', 'MA1': ma1, 'MA2': ma2, 'P&amp;L': pnl, 'Sharpe Ratio': spr, 'Maximum Drawdown': mdd&#125;, ignore_index=True) 1disp(result_ma.sort_values('P&amp;L', ascending=False).head()) Strategy MA1 MA2 P&amp;L Sharpe Ratio Maximum Drawdown 2 MA 1 7 1.54 1.30 0.37 3 MA 1 8 1.31 0.86 0.34 12 MA 1 17 1.26 0.81 0.33 11 MA 1 16 1.26 0.81 0.32 9 MA 1 14 1.25 0.78 0.32 1disp(result_ma.sort_values('Sharpe Ratio', ascending=False).head()) Strategy MA1 MA2 P&amp;L Sharpe Ratio Maximum Drawdown 2 MA 1 7 1.54 1.30 0.37 3 MA 1 8 1.31 0.86 0.34 11 MA 1 16 1.26 0.81 0.32 12 MA 1 17 1.26 0.81 0.33 9 MA 1 14 1.25 0.78 0.32 1disp(result_ma.sort_values('Maximum Drawdown', ascending=True).head()) Strategy MA1 MA2 P&amp;L Sharpe Ratio Maximum Drawdown 1129 MA 26 59 0.51 -3.38 0.04 1099 MA 25 60 0.54 -3.19 0.04 1130 MA 26 60 0.52 -3.29 0.04 1160 MA 27 60 0.52 -3.35 0.04 1128 MA 26 58 0.54 -3.01 0.06 Choosing 1-7 as our selected window pair. Plotting the PNL over the 1-year backtest period. 1234567891011bt = df.copy()bt['Baseline: Buy and Hold'] = bt.price/bt.price[0]bt['Strategy 1: MA 1-7'] = moving_average(df.copy(), 1, 7, returnStats=False).pnl.cumprod()bt['Strategy 2: MA 1-7 with Fee'] = moving_average(df.copy(), 1, 7, transactionFee=fee, returnStats=False).pnl.cumprod()plt.plot(bt.iloc[:, 3], c='tab:grey')plt.plot(bt.iloc[:, 4], c='tab:red')plt.plot(bt.iloc[:, 5], c='tab:red', alpha=0.5)plt.legend(bt.columns[3:6], frameon=False)plt.ylabel('Cumulative Asset Value Based on $1 Investment')plt.show() It seems that the trading fee does not have a material impact on the result. We plot the buy/sell signals as follow. 12345678bt = df.copy()ma = moving_average(bt, 1, 7, transactionFee=fee, returnStats=False)plt.plot(bt.price, c='black', label='Bitcoin Price')plt.plot(ma.price.loc[ma.buy], '^', markersize=3, color='g', label='Buy Signal')plt.plot(ma.price.loc[ma.sell], 'v', markersize=3, color='r', label='Sell Signal')plt.legend()plt.show() EWMAPerform the same grid-search optimization using EWMA (Exponentially Weighted Moving Averages). 123456789101112test_range = np.arange(1, 61)result_ewma = pd.DataFrame(columns=['Strategy','MA1', 'MA2', 'P&amp;L', 'Sharpe Ratio', 'Maximum Drawdown'])# grid-searchfor ma1 in test_range: for ma2 in test_range: if ma2 &gt; ma1 + 3: pnl, spr, mdd = moving_average(df, ma1, ma2, transactionFee=fee, ewma=True) result_ewma = result_ewma.append(&#123;'Strategy': 'EWMA', 'MA1': ma1, 'MA2': ma2, 'P&amp;L': pnl, 'Sharpe Ratio': spr, 'Maximum Drawdown': mdd&#125;, ignore_index=True) 1disp(result_ewma.sort_values('P&amp;L', ascending=False).head()) Strategy MA1 MA2 P&amp;L Sharpe Ratio Maximum Drawdown 0 EWMA 1 5 1.45 1.10 0.38 1 EWMA 1 6 1.39 0.98 0.39 5 EWMA 1 10 1.38 1.01 0.32 10 EWMA 1 15 1.36 0.99 0.38 6 EWMA 1 11 1.31 0.87 0.31 1disp(result_ewma.sort_values('Sharpe Ratio', ascending=False).head()) Strategy MA1 MA2 P&amp;L Sharpe Ratio Maximum Drawdown 0 EWMA 1 5 1.45 1.10 0.38 5 EWMA 1 10 1.38 1.01 0.32 10 EWMA 1 15 1.36 0.99 0.38 1 EWMA 1 6 1.39 0.98 0.39 12 EWMA 1 17 1.31 0.89 0.38 1disp(result_ewma.sort_values('Maximum Drawdown', ascending=True).head()) Strategy MA1 MA2 P&amp;L Sharpe Ratio Maximum Drawdown 797 EWMA 17 42 0.51 -2.34 0.18 1069 EWMA 25 30 0.53 -2.22 0.18 1068 EWMA 25 29 0.51 -2.29 0.18 1067 EWMA 24 60 0.67 -1.92 0.18 1066 EWMA 24 59 0.67 -1.92 0.18 Selecting 1-7 as our window pair. Plotting the cumulative strategy return and buy/sell signals. 1234567891011bt = df.copy()bt['Baseline: Buy and Hold'] = bt.price/bt.price[0]bt['Strategy 1: EMWA 1-5 (Best PNL)'] = moving_average(df.copy(), 1, 5, returnStats=False, ewma=True).pnl.cumprod()bt['Strategy 2: EMWA 1-5 (Best PNL) with Fee'] = moving_average(df.copy(), 1, 5, transactionFee=fee, returnStats=False, ewma=True).pnl.cumprod()plt.plot(bt.iloc[:, 3], c='tab:grey')plt.plot(bt.iloc[:, 4], c='tab:blue')plt.plot(bt.iloc[:, 5], c='tab:blue', alpha=0.5)plt.legend(bt.columns[3:6], frameon=False)plt.ylabel('Cumulative Asset Value Based on $1 Investment')plt.show() 12345678bt = df.copy()ma = moving_average(bt, 1, 5, transactionFee=fee, returnStats=False, ewma=True).copy()plt.plot(bt.price, c='black', label='Bitcoin Price')plt.plot(ma.price.loc[ma.buy], '^', markersize=3, color='g', label='Buy Signal')plt.plot(ma.price.loc[ma.sell], 'v', markersize=3, color='r', label='Sell Signal')plt.legend()plt.show() Comparing the MA and EWMA strategies. 1234567891011bt = df.copy()bt['Baseline: Buy and Hold'] = bt.price/bt.price[0]bt['Strategy 1: Moving Average 1-7'] = moving_average(df.copy(), 1, 7, transactionFee=fee, returnStats=False).pnl.cumprod()bt['Strategy 2: EWMA 1-5'] = moving_average(df.copy(), 1, 5, transactionFee=fee, returnStats=False, ewma=True).pnl.cumprod()plt.plot(bt.iloc[:, 3], c='tab:grey')plt.plot(bt.iloc[:, 4], c='tab:red')plt.plot(bt.iloc[:, 5], c='tab:blue')plt.legend(bt.columns[3:6], frameon=False)plt.ylabel('Cumulative Asset Value Based on $1 Investment')plt.show() As we can see, the MA strategy slightly outperforms the EWMA strategy in all three metrics. 123comp = comp.append(result_ma.iloc[2, [0, 3, 4, 5]], ignore_index=True)comp = comp.append(result_ewma.iloc[0, [0, 3, 4, 5]], ignore_index=True)disp(comp) Strategy P&amp;L Sharpe Ratio Maximum Drawdown 0 Baseline 0.28 -1.48 0.35 1 MA 1.54 1.30 0.37 2 EWMA 1.45 1.10 0.38 ImplementationStarting 08-01-2019, I have implemented the optimal MA strategy on a VPS (virtual private server), running 24/7 through the coinbase pro api. Will post update on this periodically.","tags":"tech"},{"title":"Bitcoin Analysis (1): A Classification Approach","url":"/2019/07/algo-1/","text":"In this research I looked at intraday Bitcoin trading based on price and volume information using classification models. Strategy Precision P&amp;L Sharpe Ratio 10 MLP Classifier 0.55 2.06 1.79 3 KNN 0.50 1.95 1.85 0 Baseline 0.00 1.69 1.14 4 Decision Tree 0.49 1.61 1.84 5 Random Forest 0.53 1.55 1.16 8 XGBoost 0.52 1.33 0.86 9 SVC 0.47 1.31 0.73 1 Logistic Regression 0.47 1.14 0.47 7 Gradient Boost 0.48 1.06 0.33 6 AdaBoost 0.50 0.86 -0.09 2 Linear Discriminant Analysis 0.47 0.85 -0.17 Packages1234567891011121314151617181920212223242526import warningsimport itertoolsimport numpy as npimport pandas as pdfrom sklearn import treefrom sklearn.svm import SVCimport matplotlib.pyplot as pltfrom xgboost import XGBClassifierimport matplotlib.ticker as tickerfrom sklearn.decomposition import PCAfrom imblearn.over_sampling import SMOTEfrom sklearn.metrics import confusion_matrixfrom multiprocessing import set_start_methodfrom sklearn.tree import DecisionTreeClassifierfrom IPython.display import display, HTML, Imagefrom sklearn.neural_network import MLPClassifierfrom sklearn.preprocessing import StandardScalerfrom sklearn.neighbors import KNeighborsClassifierfrom sklearn.linear_model import LogisticRegressionfrom sklearn.model_selection import KFold, GridSearchCVfrom pandas.plotting import register_matplotlib_convertersfrom sklearn.discriminant_analysis import LinearDiscriminantAnalysisfrom sklearn.ensemble import RandomForestClassifier, AdaBoostClassifier, GradientBoostingClassifierregister_matplotlib_converters()warnings.filterwarnings(\"ignore\") 123456plt.rcParams['font.family'] = \"serif\"plt.rcParams['font.serif'] = \"DejaVu Serif\"plt.rcParams['figure.figsize'] = (12, 6)plt.rcParams['figure.dpi'] = 100plt.rcParams['lines.linewidth'] = 0.75pd.set_option('max_row', 10) FunctionThis is a customized function used to plot confusion matrix in python. 12def disp(df, max_rows=10): return display(HTML(df.to_html(max_rows=max_rows, header=True).replace('&lt;table border=\"1\" class=\"dataframe\"&gt;','&lt;table&gt;'))) Data ExplorationI got the preliminary bitcoin data from bitcoincharts. Data include price and volume information recorded by Bitstamp and split by seconds. This provide great granularity that can be grouped into any desirable levels later on. 123data = pd.read_csv('bitstampUSD.csv', header=None, names=['time', 'price', 'volume'])data['time'] = pd.to_datetime(data['time'], unit='s')data.set_index('time', inplace=True) Get 3-month treasury bill price. 12url = 'https://fred.stlouisfed.org/graph/fredgraph.csv?id=DTB3'tr = pd.read_csv(url, index_col=0, parse_dates=True) We first resample our data by hour. Since most Bitcoin exchanges nowadays have transaction fees, which renders retail trading at a high frequency level unattainable. Therefore I leave out the second and minute level data and combine them into hours. Note that I average the price while summing the volume within an hour. A 2 year data window from 2017 to 2019 is used, as this is when Bitcoin and other crypto has come into the attention of the larger public, and mostly importantly, started to be heavily traded. Therefore the training set will be more representative of any future trading environment. The plot below illustrates the total dollar amount traded per hours over time. 1234df0 = data.resample('H').agg(&#123;'price': np.mean, 'volume': np.sum&#125;).fillna(method='ffill')plt.plot(df0.volume * df0.price, c='black')plt.title('Bitcoin Dollar Volume in Dollar Term')plt.show() 123456df1 = data.loc['2017-07-01':'2019-06-30'].resample('H').agg(&#123;'price': np.mean, 'volume': np.sum&#125;).fillna(method='ffill')df2 = tr.loc['2017-07-01':'2019-06-30']df = df1.join(df2).replace('.', np.NaN).fillna(method='ffill').fillna(method='bfill').rename(&#123;'DTB3': 'tr'&#125;, axis=1)df.tr = df.tr.astype(float)/100disp(df) price volume tr time 2017-07-01 00:00:00 2473.427264 200.793669 0.0104 2017-07-01 01:00:00 2463.946180 228.853771 0.0104 2017-07-01 02:00:00 2441.314976 475.068038 0.0104 2017-07-01 03:00:00 2449.063866 177.876034 0.0104 2017-07-01 04:00:00 2453.192311 120.916328 0.0104 ... ... ... ... 2019-06-30 19:00:00 11173.875377 389.958860 0.0208 2019-06-30 20:00:00 11276.492157 372.471619 0.0208 2019-06-30 21:00:00 11340.807808 295.522323 0.0208 2019-06-30 22:00:00 11037.539360 963.543871 0.0208 2019-06-30 23:00:00 10838.165248 1152.810243 0.0208 123plt.plot(df.price, c='black')plt.title('Bitcoin Price 2017-07-01 to 2019-06-30')plt.show() We then created several more data fields intending to extract more information from the previous n-hour window 1234567891011interval = [6, 12, 24, 48, 120] # 0.25, 0.5, 1, 2, 5 daysfor i in interval: for c in ['price', 'volume']: df[c+'_change_'+str(i)+'H'] = df[c]/df[c].shift(i)-1 df[c+'_high_'+str(i)+'H'] = df[c].rolling(i).max().shift(1) / df[c] df[c+'_low_'+str(i)+'H'] = df[c].rolling(i).min().shift(1) / df[c] df[c+'_avg_'+str(i)+'H'] = df[c].rolling(i).mean().shift(1) / df[c] df[c+'_std_'+str(i)+'H'] = df[c].rolling(i).std().shift(1) / df[c] * np.sqrt(24/i)df.dropna(inplace=True)disp(df.head()) price volume tr price_change_6H price_high_6H price_low_6H price_avg_6H price_std_6H volume_change_6H volume_high_6H volume_low_6H volume_avg_6H volume_std_6H price_change_12H price_high_12H price_low_12H price_avg_12H price_std_12H volume_change_12H volume_high_12H volume_low_12H volume_avg_12H volume_std_12H price_change_24H price_high_24H price_low_24H price_avg_24H price_std_24H volume_change_24H volume_high_24H volume_low_24H volume_avg_24H volume_std_24H price_change_48H price_high_48H price_low_48H price_avg_48H price_std_48H volume_change_48H volume_high_48H volume_low_48H volume_avg_48H volume_std_48H price_change_120H price_high_120H price_low_120H price_avg_120H price_std_120H volume_change_120H volume_high_120H volume_low_120H volume_avg_120H volume_std_120H time 2017-07-06 00:00:00 2607.823311 233.619901 0.0102 0.005149 1.001294 0.994877 0.998116 0.005057 -0.539692 2.172459 1.271991 1.710225 0.606196 0.019447 1.001294 0.980924 0.991722 0.010182 -0.137448 2.604881 0.986408 1.724699 0.659083 0.012479 1.001294 0.973805 0.985347 0.008630 -0.708220 3.444264 0.815879 1.940980 0.748083 0.019561 1.008966 0.973805 0.990540 0.006865 0.552344 4.357035 0.644187 1.832178 0.620839 0.054336 1.008966 0.916032 0.966001 0.011353 0.163482 8.713623 0.498690 1.772706 0.491582 2017-07-06 01:00:00 2592.974565 229.561261 0.0102 -0.005044 1.007028 1.001879 1.004691 0.004088 -0.415935 1.872772 1.017680 1.541597 0.657009 0.011195 1.007028 0.988929 0.999000 0.009511 -0.622775 2.650935 1.003848 1.741677 0.698711 0.011259 1.007028 0.979381 0.991506 0.009179 -0.707043 3.505159 0.830303 1.872374 0.713401 0.009083 1.014744 0.979381 0.996615 0.006895 0.168152 4.434067 0.830303 1.872115 0.625493 0.052367 1.014744 0.921278 0.971965 0.011479 0.003091 8.867680 0.507507 1.805239 0.499861 2017-07-06 02:00:00 2595.240970 111.498601 0.0102 -0.005029 1.006148 0.999127 1.002969 0.005542 -0.624789 3.855797 2.058871 2.929583 1.561810 0.009963 1.006148 0.989687 0.999049 0.008379 -0.765640 4.551893 2.058871 3.302634 1.296594 0.016319 1.006148 0.978526 0.991104 0.009312 -0.861432 7.216670 1.709488 3.647934 1.347291 0.000808 1.013858 0.978526 0.995932 0.006872 -0.870219 9.129174 1.709488 3.860618 1.283035 0.063050 1.013858 0.920474 0.971530 0.011491 -0.765300 18.257410 1.044891 3.716808 1.029132 2017-07-06 03:00:00 2601.939179 154.465403 0.0102 0.001575 1.003558 0.996555 0.999547 0.005543 -0.640708 2.783251 0.721835 1.914348 1.612821 0.013029 1.003558 0.987139 0.997297 0.007360 -0.329707 3.285718 0.721835 2.187443 1.098140 0.017659 1.003558 0.976007 0.989220 0.009328 -0.719538 4.131480 0.721835 2.446232 0.882973 -0.004151 1.011248 0.976007 0.993385 0.006859 -0.848249 6.589761 0.721835 2.685895 0.903309 0.062422 1.011248 0.918104 0.969522 0.011449 -0.131612 13.178846 0.721835 2.663309 0.746976 2017-07-06 04:00:00 2594.198903 323.934946 0.0102 -0.006510 1.006553 0.999528 1.002792 0.005453 -0.093037 1.273228 0.344201 0.771118 0.713993 0.006701 1.006553 0.993343 1.001348 0.005868 -0.345152 1.566764 0.344201 1.023516 0.558260 0.021535 1.006553 0.978919 0.992897 0.009496 -0.492401 1.970058 0.344201 1.115490 0.427613 -0.005803 1.014265 0.978919 0.996261 0.006822 0.102404 2.598252 0.344201 1.225214 0.392388 0.057479 1.014265 0.920843 0.972906 0.011490 1.679001 6.284212 0.344201 1.269372 0.356447 PCADue to the large number of features created in the last step, we use PCA to reduce the dimensionality of the data. Aside from price, 15 other principal components are retained. Since we mostly care about predicting accuracy, therefore we are okay with losing some interpretability in the PCA process. 12345X = StandardScaler().fit_transform(df.iloc[:, 3:])comp = 15pca = PCA(n_components=comp)X_pca = pca.fit_transform(X)np.round(pca.explained_variance_ratio_, 2) array([0.29, 0.23, 0.13, 0.06, 0.05, 0.03, 0.03, 0.02, 0.02, 0.02, 0.01, 0.01, 0.01, 0.01, 0.01]) 1np.round(np.sum(pca.explained_variance_ratio_), 2) 0.93 123df_pca = pd.DataFrame(X_pca, index=df.index, columns = ['PC' + str(i) for i in range(1, comp+1)])df = pd.DataFrame(df.iloc[:, 0:3]).join(df_pca)disp(df.head()) price volume tr PC1 PC2 PC3 PC4 PC5 PC6 PC7 PC8 PC9 PC10 PC11 PC12 PC13 PC14 PC15 time 2017-07-06 00:00:00 2607.823311 233.619901 0.0102 1.204847 -1.442388 -0.936078 0.562964 -1.802252 -0.126177 -2.115852 0.258446 0.547159 -0.005956 -0.345683 -0.077257 -0.389290 -0.253596 0.501094 2017-07-06 01:00:00 2592.974565 229.561261 0.0102 1.072486 -0.509851 -1.208146 1.100969 -1.991122 0.106322 -1.995090 0.089313 0.690748 -0.003055 -0.152291 -0.266696 -0.403753 -0.415290 0.602009 2017-07-06 02:00:00 2595.240970 111.498601 0.0102 6.313332 0.286169 -0.274636 1.772318 -3.465762 0.816421 -5.245687 0.737407 1.652572 0.043234 0.118171 -0.658779 -0.606447 -0.557087 0.499793 2017-07-06 03:00:00 2601.939179 154.465403 0.0102 1.986983 -0.820551 -1.195466 0.697308 -1.574198 0.289253 -1.100313 0.593288 0.655685 -0.005791 -0.018679 -0.152047 -0.354950 -0.493463 0.640942 2017-07-06 04:00:00 2594.198903 323.934946 0.0102 -1.350755 -0.873287 -1.805126 0.663435 -0.972641 0.036059 -0.009574 0.000981 0.200082 0.315963 -0.225084 -0.120908 -0.308701 -0.390018 0.597231 ModelingTrain and test sets are created for modeling purpose. Since it is time series data, randomization will not be performed. Rather, both train and test sets are chosen such that they both include a market upturn and market downturn. 12train = df.loc['2017-07-01':'2018-06-30']test = df.loc['2018-07-01':'2019-06-30'] Here we specify some modeling parameters. The trading frequency is set to one day. 12345trade_interval = '1H'trade_interval_min = 60ann_factor = 24 * 365training_threshold = 0.0075transaction_fee = 0.0025 Create a model engine that fit the train data and use grid search CV to tune the parameter grid. A long trade will be executed only if the model predict a next-5-day up move in the last 24 consecutive hours. This limits the frequency of trade which reduce the impact of the relatively large transaction fee per trade. The training threshold is set to 75 bps, which means the model is train to identify a potential up move of more than 75 bps in the next 5 days. 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950def run_model(Model, model_name, param, param_init, param_grid, search=False): # prepare data train_copy = train.resample(trade_interval).first() test_copy = test.resample(trade_interval).first() train_copy.dropna(inplace=True) test_copy.dropna(inplace=True) indicator = 24 # hr offset = 120 # hr X_train = train_copy.iloc[:-offset, 3:] Y_train = (train_copy.price.shift(-offset)/train_copy.price)[:-offset] &gt; (1 + training_threshold) X_test = test_copy.iloc[:-offset, 3:] Y_test = (test_copy.price.shift(-offset)/test_copy.price)[:-offset] &gt; (1 + training_threshold) # run model if search: model = GridSearchCV(estimator=Model(**param_init), cv=KFold(n_splits=5, random_state=0), scoring='precision', param_grid=param_grid).fit(X_train, Y_train) print(f'cv precision: &#123;round(model.best_score_, 2)&#125;, best param: &#123;model.best_params_&#125;') else: model = Model(**param).fit(X_train, Y_train) Y_pred = model.predict(X_test) cm = confusion_matrix(Y_test, Y_pred) precision = round(cm[1][1]/(cm[1][1] + cm[0][1]), 2) # calculate pnl # test_copy['ind'] = np.append(Y_pred, False) # test_copy['pnl'] = test_copy.ind * (test_copy.price.shift(-1) / test_copy.price) test_copy['pred'] = np.append(Y_pred, [False] * offset) test_copy['ind'] = test_copy.pred.rolling(indicator).sum() == indicator test_copy['buy'] = test_copy.ind.rolling(offset).sum() &gt; 0 test_copy['pnl'] = test_copy.buy * (test_copy.price.shift(-1) / test_copy.price) test_copy.pnl.replace(0, 1, inplace=True) test_copy.dropna(inplace=True) test_copy['fee'] = np.where(test_copy.ind != test_copy.ind.shift(1), 1-transaction_fee, 1) test_copy.pnl *= test_copy.fee test_pnl = round(test_copy.pnl.cumprod()[-1], 2) test_spr = round(np.mean(test_copy.pnl - 1 - test_copy.tr/(ann_factor)) / (test_copy.pnl - 1).std() * np.sqrt(ann_factor), 2) print(f'test precision: &#123;precision&#125;; pnl: &#123;test_pnl&#125;, spr: &#123;test_spr&#125;') return test_copy.pnl, precision, test_pnl, test_spr Baseline12345678910baseline = test.resample(trade_interval).first()baseline['pnl'] = baseline.price / baseline.price.shift(1) - 1baseline_pnl = round(baseline.price.iloc[-1] / baseline.price.iloc[0], 2)baseline_spr = round(np.mean(baseline.pnl - baseline.tr/(ann_factor)) / baseline.pnl.std() * np.sqrt(ann_factor), 2)result = test[['price']].copy().rename(&#123;'price': 'Baseline'&#125;, axis=1)/test.price.iloc[0]*1000comp = pd.DataFrame(&#123;'Strategy': 'Baseline', 'Precision': 'NA', 'P&amp;L': baseline_pnl, 'Sharpe Ratio': baseline_spr&#125;, index=[0])print(f'test precision: &#123;np.NaN&#125;; pnl: &#123;baseline_pnl&#125;, spr: &#123;baseline_spr&#125;') test precision: nan; pnl: 1.69, spr: 1.14 Logistic Regression12345678910111213Model = LogisticRegressionmodel_name = 'Logistic Regression'param = &#123;'class_weight':'balanced', 'solver':'liblinear', 'random_state': 0, 'C': 0.001, 'penalty': 'l2'&#125;param_init = &#123;'random_state': 0, 'class_weight': 'balanced'&#125;param_grid = &#123;'C': [1e-2, 1e-1, 1, 10], 'penalty': ['l1', 'l2']&#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.52, best param: {‘C’: 0.01, ‘penalty’: ‘l1’}test precision: 0.47; pnl: 1.14, spr: 0.47 Linear Discriminant Analysis123456789Model = LinearDiscriminantAnalysismodel_name = 'Linear Discriminant Analysis'param = &#123;'solver': 'svd', 'n_components': None&#125;param_init = &#123;&#125;param_grid = &#123;'solver': ['svd', 'lsqr'], 'n_components': [None, 5, 10, 25]&#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.5, best param: {‘n_components’: None, ‘solver’: ‘svd’}test precision: 0.47; pnl: 0.85, spr: -0.17 KNN123456789Model = KNeighborsClassifiermodel_name = 'KNN'param = &#123;'p': 2, 'leaf_size': 2, 'n_neighbors': 100&#125;param_init = &#123;'p': 2&#125;param_grid = &#123;'n_neighbors': [5, 25, 100], 'leaf_size': [2, 25, 100]&#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.53, best param: {‘leaf_size’: 2, ‘n_neighbors’: 100}test precision: 0.5; pnl: 1.95, spr: 1.85 Decision Tree1234567891011Model = DecisionTreeClassifiermodel_name = 'Decision Tree'param = &#123;'random_state':0, 'criterion': 'gini', 'max_depth': None, 'max_features': 10&#125;param_init = &#123;'random_state':0&#125;param_grid = &#123;'criterion': ['gini', 'entropy'], 'max_depth': [None, 5, 10, 25], 'max_features': [None, 'auto', 5, 10]&#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.53, best param: {‘criterion’: ‘gini’, ‘max_depth’: 10, ‘max_features’: 5}test precision: 0.49; pnl: 1.61, spr: 1.84 Random Forest12345678910111213141516Model = RandomForestClassifiermodel_name = 'Random Forest'param = &#123;'class_weight':'balanced', 'random_state': 0, 'criterion': 'entropy', 'max_depth': 10, 'max_features': 5, 'n_estimators': 200&#125;param_init = &#123;'class_weight':'balanced', 'random_state': 0, 'n_estimators': 200&#125;param_grid = &#123;'criterion': ['gini', 'entropy'], 'max_depth': [5, 25], 'max_features': [5, 10]&#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.53, best param: {‘criterion’: ‘gini’, ‘max_depth’: 5, ‘max_features’: 10}test precision: 0.53; pnl: 1.55, spr: 1.16 AdaBoost123456789Model = AdaBoostClassifiermodel_name = 'AdaBoost'param = &#123;'random_state': 0, 'algorithm': 'SAMME.R', 'n_estimators': 200, 'learning_rate': 0.1&#125;param_init = &#123;'random_state': 0, 'algorithm': 'SAMME.R', 'n_estimators': 200&#125;param_grid = &#123;'learning_rate': [1e-2, 1e-1, 1, 10]&#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.52, best param: {‘learning_rate’: 0.01}test precision: 0.5; pnl: 0.86, spr: -0.09 Gradient Boost1234567891011121314Model = GradientBoostingClassifiermodel_name = 'Gradient Boost'param = &#123;'random_state': 0, 'warm_start': True, 'n_estimators': 200, 'max_depth': 10, 'max_features': 10, 'learning_rate': 0.1&#125;param_init = &#123;'random_state': 0, 'warm_start': True, 'n_estimators': 200,&#125;param_grid = &#123;'max_depth': [5, 25], 'max_features': [5, 10], 'learning_rate': [1e-2, 1e-1, 1, 10]&#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.54, best param: {‘learning_rate’: 10, ‘max_depth’: 5, ‘max_features’: 5}test precision: 0.48; pnl: 1.06, spr: 0.33 XGBoost1set_start_method('forkserver', force=True) # enabling multi-threading 12345678910111213141516Model = XGBClassifiermodel_name = 'XGBoost'param = &#123;'n_jobs':4, 'seed':0, 'n_estimators': 200, 'max_depth': 5, 'min_child_weight': 1, 'gamma': 10, 'learning_rate': 0.01&#125;param_init = &#123;'n_jobs':4, 'seed':0, 'n_estimators': 200&#125;param_grid = &#123;'max_depth': [5, 25], 'min_child_weight': [1, 5], 'gamma': [1e-2, 1e-1, 1, 10], 'learning_rate': [1e-2, 1e-1, 1, 10]&#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.52, best param: {‘gamma’: 10, ‘learning_rate’: 0.01, ‘max_depth’: 25, ‘min_child_weight’: 1}test precision: 0.52; pnl: 1.33, spr: 0.86 SVC12345678910Model = SVCmodel_name = 'SVC'param = &#123;'probability':True, 'class_weight':'balanced', 'C': 10, 'gamma': 0.01&#125;param_init = &#123;'probability':True, 'class_weight':'balanced'&#125;param_grid = &#123;'C': [1e-2, 1e-1, 1, 10], 'gamma': [1e-2, 1e-1, 1, 10]&#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.64, best param: {‘C’: 0.1, ‘gamma’: 1}test precision: 0.47; pnl: 1.31, spr: 0.73 MLP Classificer12345678910111213141516Model = MLPClassifiermodel_name = 'MLP Classifier'param = &#123;'random_state': 0, 'hidden_layer_sizes': (25, 25), 'alpha': 0.01&#125;param_init = &#123;'random_state': 0&#125;param_grid = &#123;# 'hidden_layer_sizes': [x for x in itertools.product((5, 25, 100),repeat=2)], 'alpha' : [1e-2, 1e-1, 1, 10], # 'activation' : ['identity', 'logistic', 'tanh', 'relu'], # 'solver' : ['lbfgs', 'sgd', 'adam'], # 'learning_rate' : ['constant', 'invscaling', 'adaptive'], # 'max_itr' : [100, 200, 1000] &#125;a, b, c, d = run_model(Model, model_name, param, param_init, param_grid, search=True)result = result.join(a.cumprod() * 1000).rename(&#123;'pnl': model_name&#125;, axis=1).dropna()comp = comp.append(&#123;'Strategy': model_name, 'Precision': b, 'P&amp;L': c, 'Sharpe Ratio': d&#125;, ignore_index=True) cv precision: 0.53, best param: {‘alpha’: 1}test precision: 0.55; pnl: 2.06, spr: 1.79 ResultThe results are summarized as follow. 1disp(comp.replace('NA', 0).sort_values('P&amp;L', ascending=False), 20) Strategy Precision P&amp;L Sharpe Ratio 10 MLP Classifier 0.55 2.06 1.79 3 KNN 0.50 1.95 1.85 0 Baseline 0.00 1.69 1.14 4 Decision Tree 0.49 1.61 1.84 5 Random Forest 0.53 1.55 1.16 8 XGBoost 0.52 1.33 0.86 9 SVC 0.47 1.31 0.73 1 Logistic Regression 0.47 1.14 0.47 7 Gradient Boost 0.48 1.06 0.33 6 AdaBoost 0.50 0.86 -0.09 2 Linear Discriminant Analysis 0.47 0.85 -0.17 Plotting the cumulative return for each strategy with transaction fee reflected. 123456plt.plot(result)plt.legend(result.columns, frameon=False)plt.xticks(rotation=30)plt.gca().xaxis.set_major_locator(ticker.MultipleLocator(30))plt.ylabel('Cumulative Value Based on $1000 Investment')plt.show()","tags":"tech"},{"title":"Pricing A Variance Swap","url":"/2019/07/variance-swap/","text":"In this article I examine the risk-neutral pricing of a variance swap, which can be constructed with this elegant formula: \\sigma^2_{strike} = \\dfrac{2e^{rT}}{T}\\Bigg[\\int_0^{S_0e^{rT}} \\dfrac{1}{K^2} P(K) dK + \\int^{\\infty}_{S_0e^{rT}} \\dfrac{1}{K^2}C(K)dK\\Bigg] Static Portfolio Replicationproposition Let f:(0, \\infty)\\rightarrow\\mathbb{R} be twice continuous differentiable so that for any k>0 and any s>0, then, f(s) = f(k) + f'(k)(s-k) + \\int_0^kf''(K)(K-s)^+dK + \\int_k^{\\infty}f''(K)(s-K)^+dKproof We will prove the case in which s>k; similar proof can be sketched for the other case. When s>k, we have \\int_0^kf''(K)(K-s)^+dK = 0. The the second integral can be simplified as: \\int_k^{\\infty}f''(K)(s-K)^+dK = \\int_k^sf''(K)(s-K)dKUsing integration by part: du = f''(K)dK ,\\;\\; v = s-K \\\\ \\rightarrow u = f'(K) ,\\;\\; dv = -dKAnd, \\begin{align} \\int_k^s vdu &= uv |^s_k - \\int_k^s udv \\\\ &= f'(K)(s-K) |^s_k - \\int_k^s -f'(K)dK \\\\ &= -f'(K)(s-k) + f(s) - f(k) \\;\\;\\square \\end{align} The above formula shows that any twice-differentiable continuous time-T payoff f(S_T) can be replicated using a static portfolio of: f(k) \\text{ zero-coupon bond} \\\\ f'(k) \\text{ forward at } k \\\\\\ f''(K) \\text{ puts across a continuum of strike } K \\text{ from } 0 \\text{ to } k \\\\ f''(K) \\text{ calls across a continuum of strike } K \\text{ from } k \\text{ to } \\inftyIn practice, discrete set of strike can be used to approximately replicate. For example, given S_0=100 and payoff function f(S_T) = \\log S_T. Here we choose to replicate with k=100 (Though we can theoretically replicate the payoff f with any k\\in(0, \\infty), a k close to S_0 is typically chosen) and a discrete set of option strikes with increment of 5 capping at 200. In this replicating portfolio we will hold: \\log 100 \\text{ zero-coupon bond} \\\\ \\dfrac{1}{100} \\text{ forward at } 100 \\\\ -\\dfrac{5}{97.5^2} \\text{ put striked at } 97.5 \\\\ \\vdots \\\\ -\\dfrac{5}{2.5^2} \\text{ put striked at } 2.5 \\\\ \\text{and} \\\\ -\\dfrac{5}{102.5^2} \\text{ call striked at } 102.5 \\\\ \\vdots \\\\ -\\dfrac{5}{197.5^2} \\text{ put striked at } 197.5 \\\\Variance SwapA variance swap is an over-the-counter financial derivative that allows a party to trade on the future variance of a given underlying security. For example, a trader would pay the realized variance of log-price changes in exchange of a fixed payment called variance strike, normalized by the vega notional into dollar terms. The payoff of the VS is: \\text{Payoff (VS)} = N(\\sigma^2_{realized} - \\sigma^2_{strike})We can calculate the variance strike which results in a zero discounted expectation of the payoff (per unit of vega notional). \\sigma^2_{strike} = \\mathbb{E}\\sigma^2_{realized}Assuming that the underlying process follows a geometric Brownian motion with local volatility \\sigma_t: \\dfrac{dS_t}{S_t} = \\mu_t dt + \\sigma_t dW \\\\ \\rightarrow d\\log S_t = (\\mu_t - \\sigma_t^2/2)dt + \\sigma_t dW \\\\ \\rightarrow logS_T \\sim \\mathcal{N}(logS_0 + rT -\\dfrac{1}{2} \\int_0^T \\sigma^2_tdt, \\;[\\dfrac{1}{T}\\int_0^T \\sigma^2_tdt]\\;T)Therefore the realized variance of \\log S_T is: \\sigma^2_{realized} = \\dfrac{1}{T}\\int_0^T \\sigma_t^2dtFurthermore, if we combine the SDE of dS_t and d\\log S_t, \\dfrac{dS_t}{S_t} - d\\log S_t = \\dfrac{\\sigma^2_t}{2}dtTaking integral on both sides, \\int_0^T\\dfrac{dS_t}{S_t} - \\log \\dfrac{S_T}{S_0} = \\int_0^T \\dfrac{\\sigma^2_t}{2}dtCombining with the formula for the realizead variance of \\log S_t, \\sigma^2_{realized} = \\dfrac{2}{T}[\\int_0^T\\dfrac{dS_t}{S_t} - \\log \\dfrac{S_T}{S_0}]Using the proposition proven above, we can create a static replication portfolio and replicate the \\log S_T payoff. \\begin{align} \\sigma^2_{strike} &= \\mathbb{E}\\sigma^2_{realized} \\\\ &= \\mathbb{E}\\{\\dfrac{2}{T}[\\int_0^T\\dfrac{dS_t}{S_t} - \\log \\dfrac{S_T}{S_0}]\\} \\\\ &= \\dfrac{2}{T}[rT - \\log \\dfrac{S^{\\ast}}{S_0} - \\dfrac{Se^{rT} - S^{\\ast}}{S^{\\ast}} - \\int_0^{S^{\\ast}} \\dfrac{-1}{K^2} (K-S_T)^+dK - \\int^{\\infty}_{S^{\\ast}} \\dfrac{-1}{K^2}(S_T-K)^+dK] \\end{align}If we choose the cutoff as the forward price S^{\\ast} = S_0e^{rT}, we can largely simplified the formula as follow: \\sigma^2_{strike} = \\dfrac{2e^{rT}}{T}[\\int_0^{S_0e^{rT}} \\dfrac{1}{K^2} P(K) dK + \\int^{\\infty}_{S_0e^{rT}} \\dfrac{1}{K^2}C(K)dK]In conclusion, if we assume a GBM underlying process, the fair-value variance strike can be calculated as the sum of calls and puts across a continuum of strikes. Practical ConsiderationIn practice, variance swap is costly to implement, requires constant hedging and an entire array of options. The advantage of a variance swap is that it is purely exposed to volatility risk, as oppose to an option which contains directional risk. The P&amp;L of a variance swap depends directly on the difference between realized and implied volatility. Since historically the implied volatility has been above realized volatility, a.k.a. variance risk premium, volatility arbitrage (rolling short variance trade) can be carried out with variance swaps. Reference Variance and Volatility Swaps, FinancialCAD Corporation, http://docs.fincad.com/support/developerFunc/mathref/VarianceSwaps.htm","tags":"math"},{"title":"Star Gazing in Fiji","url":"/2019/07/fiji/","text":"A sublime view of the galaxy from the Barefoot Kuata Island. Shot with the Rokinon 10mm lens.","tags":"travel"},{"title":"Simluating A Financial Exchange with Socket Server","url":"/2019/06/financial-exchange/","text":"On my 20-hour flight back to China, I created a simple financial exchange in python which multiple traders can connect to and place limit order on. This exchange will carry a basic order book, in order to process new orders and keep track of existing orders. The codes are uploaded to this repo. Socket.SocketThe backbone of this exercise is built on the communication between an exchange (server) and a trader (client). The python socket library is used. Here we created a socket instance by passing two parameters: AF_INET refers to the address family ipv4; SOCK_STREAM refers to TCP protocols. We then set the options for this socket: here SO_REUSEADDR tells the kernel to reuse a local socket in TIME_WAIT state before timeout. 12server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) For a server, we want to bind to all interfaces and not just the local host. Therefor we specify an empty string and a randomly chosen port when binding the server. 12port = 8000server.bind((\"\", port)) For the client, we need to bind and communicate to the server created above. We create another socket instance also called server in a separte file, and connect to the local host with the same port. 1234server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)host = 'localhost'port = 8000server.connect((host, port)) Select.SelectWe have now created server and client files and need to let them communicate in time. We use the select method from the select library to listen to a list of sockets while filtering out the ones which new activities. We will have infinite loops in both the serve and client files so that we are always listening. The server will listen to itself (in order to broadcast new trader entrance) and all the clients. 12345connection_list = [server, &lt;potential new clients&gt;]read_sockets, write_sockets, error_sockets = select.select( connection_list, [], [])for socket in read_sockets: ... The client will listen to the console input (for user input) and the server (for responses on previous request). 12345socket_list = [server, sys.stdin]read_sockets, write_sockets, error_sockets = select.select( socket_list, [], [])for socket in read_sockets: ... Code file &amp; IllustrationWe now open up the exchange.py and trader.py files in order. exchange.py:123Liu at RONGJIAs-MacBook in ~/Desktop$ python3 exchange.py--- exchange initiated --- trader.py:1234567Liu at RONGJIAs-MacBook in ~/Desktop$ python3 trader.py localhost 8000--- connected to exchange ---trader (127.0.0.1:54945) successfully connected to the exchangeinstructions: enter add_order &lt;price&gt; &lt;quantity&gt; &lt;is_bid&gt; to add limit orders enter bid_ask to request the current bid-ask spread on the exchange Acting as trader, we added 6 new limit orders and requesting the current bid-ask spread information, which prints the top 3 levels from the bid and ask books.12345678910111213141516171819202122232425[127.0.0.1:54945]: add_order 80 100 1[exchange]: trader (127.0.0.1:54945) has successfully added an limit order (price:80 quantity:100)[127.0.0.1:54945]: add_order 90 100 1[exchange]: trader (127.0.0.1:54945) has successfully added an limit order (price:90 quantity:100)[127.0.0.1:54945]: add_order 100 100 1[exchange]: trader (127.0.0.1:54945) has successfully added an limit order (price:100 quantity:100)[127.0.0.1:54945]: add_order 110 100 0[exchange]: trader (127.0.0.1:54945) has successfully added an limit order (price:110 quantity:100)[127.0.0.1:54945]: add_order 120 100 0[exchange]: trader (127.0.0.1:54945) has successfully added an limit order (price:120 quantity:100)[127.0.0.1:54945]: add_order 130 100 0[exchange]: trader (127.0.0.1:54945) has successfully added an limit order (price:130 quantity:100)[127.0.0.1:54945]: bid_ask&#123; \"bids\": &#123; \"100\": 100, \"90\": 100, \"80\": 100 &#125;, \"asks\": &#123; \"110\": 100, \"120\": 100, \"130\": 100 &#125;&#125; We can open up another terminal session and run the trader.py to simulate the entrance of a second trader (do not close the previous sessions). We can check that the bid-ask spread is what we last saw from trader 1. 1234567891011121314151617181920Liu at RONGJIAs-MacBook in ~/Desktop$ python3 trader.py localhost 8000--- connected to exchange ---trader (127.0.0.1:54950) successfully connected to the exchangeinstructions: enter add_order &lt;price&gt; &lt;quantity&gt; &lt;is_bid&gt; to add limit orders enter bid_ask to request the current bid-ask spread on the exchange[127.0.0.1:54950]: bid_ask&#123; \"bids\": &#123; \"100\": 100, \"90\": 100, \"80\": 100 &#125;, \"asks\": &#123; \"110\": 100, \"120\": 100, \"130\": 100 &#125;&#125; The second trader then add a bid order with price equals to 110 which is higher or equal to the current lowest ask price. This triggers an order execution on the exchange, and the order book ask quantity at price 100 is reduced by 10. 123456789101112131415[127.0.0.1:54950]: add_order 110 10 1[exchange]: trader (127.0.0.1:54950) has successfully executed an limit order (price:110 quantity:10)[127.0.0.1:54950]: bid_ask&#123; \"bids\": &#123; \"100\": 100, \"90\": 100, \"80\": 100 &#125;, \"asks\": &#123; \"110\": 90, \"120\": 100, \"130\": 100 &#125;&#125; Further ImprovementsObviously this is just a starting point towards building a more robust financial exchanges. Many improvements can be made to exchange functionality, orderbook data structure and user interface. Another interesting application would be extending this to create a strategy backtester. During this project I came across Beej’s Guide to Network Programming, which is a valuable online resource for further studies on network programming. I also found the networking examples in this repo super helpful.","tags":"tech"},{"title":"Uncovering the Term Structure of Volatility Skew","url":"/2019/06/spx-vol-term-struct/","text":"In this research, we aim to extract a term structure from the implied volatility skewness under the Black-Scholes framework and S&amp;P 500 adjusted close prices. With the daily close prices over the period of 1970-2018, we calibrate a local volatility function by fitting the BS-implied density based on the Dupire formula (which is the aggregation of a bunch of log-normal densities at each strike, since volatility is not constant and depended on strike) to the observed S&amp;P 500 log return distribution. We start by asssuming that the local volatility as a function of the log-in-the-moneyness x for a fixed maturity window of T business days. \\sigma(x) = g(x) \\\\ \\text{ where } x=log(K/S_0)Under the Black-Scholes framework with risk-free rate r=0, a call option premium for S_0=1 is: C(K, T) = \\Phi(d1) - K\\Phi(d2) \\\\ d_{\\text{1, 2}} = \\dfrac{log(1/K) \\pm (\\sigma^2/2)T}{\\sigma\\sqrt{T}}If we assume that there exists a probability density function f_{S_T}, we have: C(K, T) = \\int^{\\infty}_K(S_T-K)f_{S_T}(S_T)dS_TTaking partial derivative w.r.t. K, we get the Dupire formula: \\dfrac{\\partial C}{\\partial K} = \\int^{\\infty}_K -f_{S_T}(S_T)dS_T \\\\ \\dfrac{\\partial^2 C}{\\partial K^2} = f_{S_T}(K)We can approximate the second-order derivative numerically: f_{S_T}(K) \\approx \\dfrac{C(K + \\Delta K) - 2C(K) + C(K - \\Delta K)}{(\\Delta K)^2}We previously defined that x = log(K). Given any \\Delta K, let us define \\Delta x such that: \\Delta x = \\dfrac{\\Delta K}{K} \\\\ \\text{therefore, } \\Delta K = e^{x}\\Delta xWe define r_T as the T period log return, and that r_T=log(S_T). Based on chain rule: f_{r_T}(x) = f_{S_T}(K) \\times KSo in conclusion we have: f_{r_T}(x) = f_{S_T}(K) \\times K \\approx \\dfrac{C(e^x + e^x\\Delta x) - 2C(e^x) + C(e^x - e^x\\Delta x)}{e^x(\\Delta x)^2} \\\\ \\text{where } C(x) = \\Phi(\\dfrac{-x + (\\sigma(x)^2/2)T}{\\sigma(x)\\sqrt{T}}) - e^x\\Phi(\\dfrac{-x - (\\sigma(x)^2/2)T}{\\sigma(x)\\sqrt{T}}) \\text{, and } \\sigma(x) = g(x)The goal is to find the optimal volatility function g(x) such that f_{r_T}(x) fits to the historical distribution of r_T. Here we use a quadratic form for g(x): g(x) = ax^2 + bx + cUsing sum of square as the objective function, we obtained a set of coefficients of a, b, and c that fit the Dupire density to the empirical density of S&amp;P 500 log returns. This following graph shows the skewness coefficient b plotted against term windows. We can observe that overall as the time-window increases, the skewness decreases (in absolute values). We also see that the skewness hit a local minimum (in absolute values) at T=100, or 6 month time. This phenomenon is also observed in future trading, and could potentially be explained by the fact that market tends to recover from the left-skewed losses in 6 month time on average. Click on this link to see the jupyter notebook.","tags":"math"},{"title":"Creating a Tags Page for Apollo","url":"/2019/05/apollo-add-tags/","text":"Recently I updated my hexo theme, and as much as I love some of the perks in NexT (e.g. index side bar), I eventually decided to publish with a more simplistic design. I spent quite some time these two days to iron out the kinks during the transition to a cleaner, Apollo-based theme. I have uploaded my fully customized theme, named arctic, on github. In this post I will discuss a solution for creating a customized tags page. Creating the Tags PageThe original Apollo theme does not come with a tags layout. Though you can create a tags directory with built-in hexo command hexo new page tags, you have to create your own tags layout file in the themmes/layout directory. Most layouts suggested on the web are only showing the tags in the tags page, with links to another page which shows the articles, such as this blog and his implementation. I actually wanted to show the articles on the same page under each tags. Now the tags page looks like this: Here a few simple steps to follow: Step 1In themes/layout/mixins/post.jade add in the following codes directly below any existing code.123456789101112//- Tag Pagemixin tagList() .archive - site.tags.each(function (t) &#123; h2.archive-year!= __(t.name) - site.tags.findOne(&#123;name: t.name&#125;).posts.sort('date', -1).forEach(function (item) &#123; .post-item +postInfo(item) a.post-title-link(href= url_for(item.path)) != item.title - &#125;) - &#125;) The command site.tags.findOne({name: t.name}) returns a warehouse object created by the developers of Hexo. Step 2Under themes/apollo/layout/ create a file named tags.jade with the following code.123456789101112extends partial/layoutblock container include mixins/post +tagList()block pagination include mixins/paginator +home()block copyright include partial/copyright Step 3Configure your theme .config.yml file1234menu: HOME: / TAGS: /tags/ ABOUT: /about/ Configure your site .config.yml file12# Directorytag_dir: tags Now run command line code hexo new page tags to create the tags page and hexo clean &amp;&amp; hexo g &amp;&amp; hexo d to deploy the change. Reference: https://blessing.studio/get-hexo-posts-by-category-or-tag/","tags":"tech"},{"title":"PCA: A Deeper Dive","url":"/2019/04/pca-deep-dive/","text":"PCA finds low dimensional representation of a dataset that contains as much as possible of the variation. As each of the n observations lives on a p-dimensional space, and not all dimensions are equally interesting. Linear Algebra ReviewLet A be a n\\times n matrix. With n=2, \\ 3, the determinant of A can be calculated as follow. det(\\begin{bmatrix} a & b \\\\ c & d \\\\ \\end{bmatrix} ) = ad - bc\\begin{align} det ( \\begin{bmatrix} a & b & c \\\\ d & e & f \\\\ g & h & i \\\\ \\end{bmatrix} ) &= aei + bfg + cdh - cdg - bdi - afh \\\\ &= a \\times det( \\begin{bmatrix} e & f \\\\ h & i \\\\ \\end{bmatrix} ) + b \\times det( \\begin{bmatrix} d & f \\\\ g & i \\\\ \\end{bmatrix} ) + c \\times det( \\begin{bmatrix} d & e \\\\ g & h \\\\ \\end{bmatrix} ) \\end{align}Properties of determinant: \\begin{align} det(A^T) &= det(A) \\\\ det(A^{-1}) &= det(A)^{-1} \\\\ det(AB) &= det(A)det(B) \\end{align}A real number \\lambda is an eigenvalue of A if there exists a non-zero vector x (eigenvector) in \\mathbb{R}^n such that: Ax = \\lambda xThe determinant of matrix A - \\lambda I is called the characteristic polynomial of A. The equation det(A - \\lambda I) is called the characteristic equation of A, where the eigenvalues \\lambda are the real roots of the equation. It can be shown that: \\prod_{i=1}^n \\lambda_i = det(A) \\\\ \\sum_{i=1}^n \\lambda_i = \\sum_{i=1}^n a_{i, \\ i} = trace(A)Matrix A is invertible if there exists a n\\times n matrix B such that AB = BA = I. A square matrix is invertible if and only if its determinant is non-zero. A non-square matrix do not have an inverse. Matrix A is called diagonalizable if and only if it has linearly independent eigenvectors. Let \\textbf{U} denote the eigen vectors of A and \\textbf{D} denote the diagonal \\lambda vector. Then: A = \\textbf{UDU}^{-1} \\rightarrow A^x = \\textbf{UD}^x\\textbf{U}^{-1}If matrix A is symmmetric, then: all eigenvalues of A are reall numbers all eigenvectors of A from distrinct eigenvalues are orthogonal Matrix A is positive semi-definite if and only if any of the following: for any n\\times 1 matrix x, x^TAx \\geq 0 all eigenvalues of A are non-negative all the upper left submatrices A_K have non-negative determinants. Matrix A is positive definite if and only if any of the following: for any n\\times 1 matrix x, x^TAx > 0 all eigenvalues of A are positive all the upper left submatrices A_K have positive determinants. All covariance, correlation matrices must be symmetric and positive semi-definite. If there is no perfect linear dependence between random variables, then it must be positive definite. Let A be an invertible matrix, the LU decomposition breaks down A as the product of a lower triangle matrix L and upper triangle matrix U. Some applications are: solve Ax=b: LUx=b \\rightarrow Ly=b \\text{ ; } Ux=y solve det(A): det(A) = det(L)\\ det(U)=\\prod L_{i, \\ i}\\prod U_{j, \\ j} Let A be a symmetric positive definite matrix, the Cholesky decomponsition expand on the LU decomposition and breaks down A=U^TU, where U is a unique upper triangular matrix with positive diagonal entries. Cholesky decomposition can be used to generate correltaed random variables in Monte Carlo simulation Matrix InterpretationConsider a n\\times p matrix: \\begin{bmatrix} x_{11} & x_{12} & x_{13} & \\dots & x_{1p} \\\\ x_{21} & x_{22} & x_{23} & \\dots & x_{2p} \\\\ \\vdots & \\vdots & \\vdots & \\ddots & \\vdots \\\\ x_{n1} & x_{n2} & x_{n3} & \\dots & x_{np} \\end{bmatrix}To find the first principal component F^1, we define it as the normalized linear combination of X that has the largest variance, where its loading \\phi^1_j are normalized: \\sum^p_{j=1} (\\phi^1_j)^2 = 1 F^1 = \\phi^1_1X_1 + \\phi^1_2X_2 + \\dots + \\phi^1_pX_pOr equivalently, for each score: F^1_i = \\sum_{j=1}^{p} \\phi^1_jx_{ij} In matrix form: \\begin{bmatrix} x_{11} & x_{12} & x_{13} & \\dots & x_{1p} \\\\ x_{21} & x_{22} & x_{23} & \\dots & x_{2p} \\\\ \\vdots & \\vdots & \\vdots & \\ddots & \\vdots \\\\ x_{n1} & x_{n2} & x_{n3} & \\dots & x_{np} \\end{bmatrix}\\times \\begin{bmatrix} \\phi^1_1 \\\\ \\phi^1_2 \\\\ \\vdots \\\\ \\phi^1_p \\\\ \\end{bmatrix}= \\begin{bmatrix} f^1_1 \\\\ f^1_2 \\\\ \\vdots \\\\ f^1_n \\\\ \\end{bmatrix}Finally, the first principal component loading vector \\phi^1 solves the optimization problem that maximize the sample variance of the scores f^1. An objective function can be formulated as follow and solved via an eigen decomposition: \\text{maximize }\\{\\ \\dfrac{1}{n}\\sum_{i=1}^n(f^1_i)^2\\ \\} \\text{ subject to } \\sum^p_{j=1} (\\phi^1_j)^2 = 1To find the second principal component loading \\phi^2, use the same objective function with \\phi^2 replacement and include an additional constraint that \\phi^2 is orthogonal to \\phi^1. Geometric InterpretationThe p\\times k loading matrix L = [\\phi^1 \\dots \\phi^k] defines a linear transformation that projects the data from the feature space \\mathbb{R}^p into a subspace \\mathbb{R}^k, in which the data has the most variance. The result of the projection is the factor matrix F = [F^1 \\dots F^k], also known as the principal components. \\underbrace{ \\begin{bmatrix} x_{11} & x_{12} & x_{13} & \\dots & x_{1p} \\\\ x_{21} & x_{22} & x_{23} & \\dots & x_{2p} \\\\ \\vdots & \\vdots & \\vdots & \\ddots & \\vdots \\\\ x_{n1} & x_{n2} & x_{n3} & \\dots & x_{np} \\end{bmatrix} }_{data} \\times \\underbrace{ \\begin{bmatrix} \\phi^1_1 & \\dots & \\phi^k_1\\\\ \\phi^1_2 & \\dots & \\phi^k_2\\\\ \\vdots & \\ddots & \\vdots \\\\ \\phi^1_p & \\dots & \\phi^k_p\\\\ \\end{bmatrix} }_{loadings}= \\underbrace{ \\begin{bmatrix} f^1_1 & \\dots & f^k_1 \\\\ f^1_2 & \\dots & f^k_2 \\\\ \\vdots & \\ddots & \\vdots \\\\ f^1_n & \\dots & f^k_n \\\\ \\end{bmatrix} }_{\\text{principal components} \\\\ \\text{or, factor scores}}In other words, the principal components vectors F^1 ... F^k forms a low-dimensional linear subspace that are the closest (shortest average squared Euclidean distance) to the observations. Eigen DecompositionGiven n\\times p data matrix X, the objective of PCA is to find a lower dimension representation factor matrix F, from which a n\\times p matrix \\tilde{X} can be constructed where distance between the covariance matrices cov(X) and cov(\\tilde{X}) are minimized. The covariance matrix of X is a p\\times p symmetric positive semi-definite matrix, therefore we have the following decomposition where \\textbf{u}‘s’ are p\\times 1 eigenvectors of cov(X) and \\lambda‘s are the eigenvalues. Note that \\textbf{u} can be a zero vector if the columns of cov(X) are linearly dependent. \\begin{align} cov(X) &= \\dfrac{1}{n-1}X^TX \\\\ &=\\dfrac{1}{n-1} \\begin{bmatrix} \\textbf{u}_1 & \\dots & \\textbf{u}_p \\end{bmatrix} \\begin{bmatrix} \\lambda_1 & \\dots & 0 \\\\ \\vdots & \\ddots & \\vdots \\\\ 0 & \\dots & \\lambda_p \\end{bmatrix} \\begin{bmatrix} \\textbf{u}_1 & \\dots & \\textbf{u}_p \\end{bmatrix}^T \\\\ &= \\dfrac{1}{n-1}\\sum_{i=1}^p \\lambda_i\\textbf{u}_i\\textbf{u}_i^T \\end{align}If we ignore the constant 1/(n-1), and define the p\\times p loading matrix L_0=[\\textbf{u}_1, \\dots, \\textbf{u}_p] and n\\times p factor matrix F_0 where F_0^TF_0=\\Lambda. Then: X = F_0L_0^TNow comes the PCA idea: Let’s rank the \\lambda_i‘s in descending order, pick k < p such that: \\dfrac{1}{n-1}\\sum_{i=1}^{k} \\lambda_i\\textbf{u}_i\\textbf{u}_i^T \\approx \\dfrac{1}{n-1}\\sum_{i=1}^p \\lambda_i\\textbf{u}_i\\textbf{u}_i^T = cov(X) \\\\ \\text{and we denote it } cov(\\tilde{X}) \\text{, i.e. } cov(\\tilde{X}) = \\dfrac{1}{n-1}\\sum_{i=1}^{k} \\lambda_i\\textbf{u}_i\\textbf{u}_i^TNow we observe that the matrix cov(\\tilde{X}) is also a p\\times p positive semi-definite matrix. Following similar decomposition, we obtain a p\\times k matrix L and n\\times k matrix F, where: \\tilde{X} = FL^THere we have it, a dimension-reduced n\\times k factor matrix F, where its projection back to n\\times p space, \\tilde{X}, has similar covariance as the original n\\times p dataset X. Practical ConsiderationsPCA excels at identifying latent variables from the measurable variables. PCA can only be applied to numeric data, while categorical variables need to be binarized beforehand. Centering: yes. Scaling: if the range and scale of the variables are different, correlation matrix is typically used to perform PCA, i.e. each variables are scaled to have standard deviation of 1 otherwise if the variables are in the same units of measure, using the covariance matrix (not standardizing) the variables could reveal interesting properties of the data Uniqueness: each loading vector \\phi^1 is unique up to a sign flip, as the it can take on opposite direction in the same subspace. Same applies to the score vector Z^1, as var(Z^1) = var(-Z^1) Propotional of Variance Explained: we can compute the total variance in a data set in the first formula below. The variance explained by the m-th principal component is: \\dfrac{1}{n} \\sum_{i=1}^n (z^m_i)^2. Therefore, the second formula can be computed for the PVE: \\sum_{j=1}^p Var(X_j) = \\sum_{j=1}^p [ \\dfrac{1}{n} \\sum_{i=1}^n x^2_{ij} ] \\\\ PVE^m = \\dfrac{\\sum_{i=1}^n (z^m_i)^2}{\\sum_{j=1}^p\\sum_{i=1}^n x^2_{ij}} Reference: An Introduction to Statistical Learning with Applications in R, James, Witten, Hastie and Tibshirani FINM 33601 Lecture Note, Y. Balasanov, University of Chicago","tags":"math"},{"title":"Notes on ISLR","url":"/2019/04/islr/","text":"This is a study note on the book An Introduction to Statistical Learning with Applications in R, with my own experimental R-code for each topic. Navigation00. Introduction01. Linear Model02. Tree-Based Method03. Unsupervised Learning Introduction &#8634;Suppose we observe a quantitative response Y and p different predicting variables X = (X_1, X_2...X_p). We assume that there is a underlying relationship f between Y and X: Y=f(X) + \\epsilonWe want to estimate f mainly for two purpose: prediction: in the case where Y is not easily obtained, we want to estimate f with \\hat{f}, and use \\hat{f} to predict Y with \\hat{Y}. Here \\hat{f} can be a black box, such as highly non-linear approaches which offers accuracy over interpretability. \\hat{Y} = \\hat{f}(X) inference: in the case where we are more interested in how Y is affected by the change in each X_n. We need to know the exact form of \\hat{f}. For example, linear model is often used which offer interpretable inference but sometimes inaccurate. FeatureThere are important and subtle differences between a feature and a variable. variable: raw data feature: data that is transformed, derived from raw data. A feature can be more predictive and have a direct relationship with the target variable, but it isn’t immediately represented by the raw variable. The need for feature engineering arises from limitations of modeling algorithms: the curse of dimensionality (leading to statistical insiginificance) the need to represent the signal in a meaningful and interpretable way the need to capture complex signals in the data accurately computational feasibility when the number of features gets large. Feature TransformationThe Occam’s Razor principle states that a simpler solutions are more likely to be corret than complex ones. Consider the following example of modeling a exponentially distributed response. After applying a log transformation, we can view the relation from a different viewpoint provided by the new feature space, in which a simpler model may achieve more predictive power than a complex model in the original input space.123456789x1 &lt;- runif(100, 1,10)x2 &lt;- exp(x1)df &lt;- data.frame(x1 = x1, x2 = x2)df$logx2 &lt;- log(df$x2)ssoptions(repr.plot.width=6, repr.plot.height=3)p1 &lt;- ggplot(data = df, aes(x = x1, y = x2)) + geom_point(size=0.3)p2 &lt;- ggplot(data = df, aes(x = x1, y = logx2)) + geom_point(size=0.3)grid.arrange(p1, p2, nrow=1) Consider another classification problem, in which we want to identify the boundary between the two classes. A complex model would draw a circle as the divider. A simpler approach would be to create a new feature with distances of each point from the origin. The divider becomes a much simpler straight line.123456789101112131415161718x1 &lt;- runif(1000,-1,1)x2 &lt;- runif(1000,-1,1)class &lt;- ifelse(sqrt(x1^2 +x2^2) &lt; 0.5, \"A\", \"B\")df &lt;- data.frame(x1 = x1, x2 = x2, class = class)p1 &lt;- ggplot(data = df, aes(x = x1, y = x2, color = class)) + geom_point(size=1)df$dist_from_0 &lt;- sqrt(df$x1^2 + df$x2^2)p2 &lt;- ggplot(data = df, aes(x = 0, y = dist_from_0, color = class)) + geom_point(position = \"jitter\", size=1) + theme(axis.title.x=element_blank(), axis.text.x=element_blank(), axis.ticks.x=element_blank()) + annotate(\"segment\", x = -0.5, xend = 0.5, y = 0.5, yend = 0.5)options(repr.plot.width=8, repr.plot.height=3)grid.arrange(p1, p2, nrow=1) Feature SelectionFor p predictive variables, there are a total of 2^p models. We use feature selection to choose a smaller subset of the variable to model. Forward Selection We begin with the null model with no variables and an intercept. We then fit n simple linear regression to choose our first variable with the lowest RSS. Same way to choose the next variable to be added until some stoppoing rule. Backward Selection We begin with the full model and remove the variable with the largest coefficient p-value. Re-fit and remove the next. Mixed Selection We begin with the null model and the forward selection technique. Whenever the p-value for a variable exceeds a threshold we remove it. Regression ProblemsIn regression problems the variables are quantitative, we use mean squared error, or MSE, to measure the quality of estimator \\hat{f}: MSE = \\dfrac{\\sum_{i=1}^n [y_i - \\hat{f}(x_i)]^2}{n}A fundamental property of statistical learning that holds regardless of the particular dataset and statistical method is that as model flexibility increases, we can observe a monotone decrease in training MSE and an U-shape in test MSE. Bias vs VarianceThe bias-variance trade off decompose the expected test MSE of a single data point x_0: \\begin{align} \\mathbb{E}MSE^{test}(x_0) &= \\mathbb{E}[y_0 - \\hat{f}(x_0)]^2 \\\\ &= Var[\\hat{f}(x_0)] + Bias[\\hat{f}(x_0)]^2 + Var[\\epsilon] \\end{align}where: variance refers to the variance of the estimator among different datasets. A highly flexible \\hat{f} lead to a high variance, as even small variance in data induce change in the \\hat{f}‘s form. bias refers to the error due to estimator \\hat{f} inflexibility. For example, using linear \\hat{f} to estimate non-linear relationship leads to high bias. Classification ProblemsIn regression problems the variables are qualitative, we use error rate to measure the quality of estimator \\hat{f}: \\text{error rate} = \\dfrac{\\sum_{i=1}^n \\textbf{1}\\{y_i \\neq \\hat{f}(x_i)\\}}{n}The Bayes ClassifierThe Bayes classifier predict the classification based on the combination of the prior probability and its likelihood given predictor values. With categories C_1, C_2, C_3..., and predictor values \\textbf{x} = (x_1, x_2, x_3...), \\hat{y} is assigned to category C_k which has the maximum posterior probability: \\hat{y} = \\hat{f}^{Bayes}(\\textbf{x}) = C_k, \\;where\\; k = argmax_k \\;p(C_k | \\textbf{x})Where: p(C_k | \\textbf{x}) = \\dfrac{p(x_1, x_2, x_3...|C_k)p(C_k)}{p(x_1, x_2, x_3...)}The naive Bayes classifier assumes independence between the predictor X_i‘s, and the formula becomes: \\hat{y} = \\hat{f}^{naiveBayes}(\\textbf{x}) = C_k, where\\; k = argmax_k \\;p(C_k) \\times \\prod p(x_i | C_k)When x_i is continuous, the Guassian naive Bayes classifier assumes that p(x_i | C_k) \\sim \\mathcal{N}(\\mu_{i, C_k}, \\sigma^2_{i, C_k}) In R, we use the naiveBayes function from the e1071 package to predict Survival from the Titanic dataset.1234567891011121314151617181920library(e1071)library(caret)set.seed(9999)df=as.data.frame(Titanic)df &lt;- df[rep.int(seq_len(nrow(df)), df$Freq),]df$Freq &lt;- NULL# create a 75/25 train/test splitpartition &lt;- createDataPartition(df$Survived, list=FALSE, p=0.75)train &lt;- df[partition, ]test &lt;- df[-partition, ]# fit naive bayes classifierbayes &lt;- naiveBayes(Survived ~ ., data=train)# 10-fold validationbayes.cv &lt;- train(Survived ~ ., data=train, method = \"nb\", trControl = trainControl(method = \"cv\", number = 10)) Viewing the model results, the prior probabilities p(C_k) are shown in the “A-priori probabilities” section.1234567891011&gt; bayesNaive Bayes Classifier for Discrete PredictorsCall:naiveBayes.default(x = X, y = Y, laplace = laplace)A-priori probabilities:Y No Yes0.6767554 0.3232446 The likelihood p(x_i | C_k) are shown in the “Conditional probabilities” section123456789101112131415Conditional probabilities: ClassY 1st 2nd 3rd Crew No 0.09481216 0.10554562 0.34615385 0.45348837 Yes 0.28838951 0.15730337 0.24344569 0.31086142 SexY Male Female No 0.91323792 0.08676208 Yes 0.53183521 0.46816479 AgeY Child Adult No 0.03130590 0.96869410 Yes 0.06928839 0.93071161 The confusionMatrix function from the caret package returns a test Accuracy of 0.7978, which corresponds to an Bayes error rate of 0.2023. \\text{error rate}^{Bayes} = 1 - \\mathbb{E}max_k\\;p[Y=C_k|X=(x_1, x_2, x_3...)]Theoretically, the Bayes classifier produces the lowest error rate if we know the true conditional probability p(C_k | \\textbf{x}), which is not the case with real data. Therefore, the Bayes classifier serves as an unattainable gold standard against which to compare other methods.123456789&gt; confusionMatrix(predict(bayes, test), test$Survived)Confusion Matrix and Statistics ReferencePrediction No Yes No 343 82 Yes 29 95 Accuracy : 0.7978 With 10-fold cross validation, the test error rate is 0.2095.123456789&gt; confusionMatrix(predict(bayes.cv, test), test$Survived)Confusion Matrix and Statistics ReferencePrediction No Yes No 332 75 Yes 40 102 Accuracy : 0.7905 K-Nearest NeighborsThe KNN classifier estimate the conditional probability p(C_k | \\textbf{x}) based on the set of K predictors in the training data that are the most similar to \\textbf{x}, representing by \\mathcal{N}. \\hat{y} = \\hat{f}^{KNN}(\\textbf{x}) = C_k, \\;where\\; k = argmax_k \\;p(C_k | \\textbf{x}) \\\\ with\\; p(C_k | \\textbf{x}) = \\dfrac{\\sum_{i\\in\\mathcal{N}}\\textbf{1}_{y_i = C_k}}{K}Note that the p(C_k | \\textbf{x}) is one minus the \\mathcal{N}-local error rate of a C_k estimate , and therefore with KNN we are picking the C_k that minimizes the \\mathcal{N}-local error rate given \\textbf{x}. When K=1, the estimator \\hat{f}^{KNN} produces a training error rate of 0, but the test error rate might be quite high due to overfitting. The method is therefore very flexible with low bias and high variance. As K\\rightarrow\\infty, the estimator becomes more linear. In R, we use the knn function (with K=1) in the class library to predict Survival from the Titanic dataset.1234567891011121314151617181920212223242526272829303132library(e1071)library(class)set.seed(9999)df &lt;- as.data.frame(Titanic)df &lt;- df[rep.int(seq_len(nrow(df)), df$Freq),]df$Freq &lt;- NULL# The \"knn\" function in the \"class\" library only works with numeric datadf$iClass &lt;- as.integer(df$Class)df$iSex &lt;- as.integer(df$Sex)df$iAge &lt;- as.integer(df$Age)df$iSurvived &lt;- as.integer(df$Survived)# Create random 75/25 train/test splittrain_ind &lt;- sample(seq_len(nrow(df)), size = floor(0.75 * nrow(df)))df_train &lt;- df[train_ind, c(5:7)]df_test &lt;- df[-train_ind, c(5:7)]df_train_cl &lt;- df[train_ind, 4]df_test_cl &lt;- df[-train_ind, 4]# Fit KNNknn &lt;- knn(train = df_train, test = df_test, cl = df_train_cl, k=1)# 10-fold CVknn.cv &lt;- tune.knn(x = df[, c(5:7)], y = df[, 4], k = 1:20, tunecontrol=tune.control(sampling = \"cross\"), cross=10) The confusion matrix shows an error rate of 0.1942.123456789&gt; confusionMatrix(knn, df_test_cl)Confusion Matrix and Statistics ReferencePrediction No Yes No 364 101 Yes 6 80 Accuracy : 0.8058 Now run KNN with the tune wrapper to perform 10-fold cross validation. The result recommends KNN with K=1, which turns out to be the same as what we originally tested.1234567891011&gt; knn.cvParameter tuning of ‘knn.wrapper’:- sampling method: 10-fold cross validation- best parameters: k 1- best performance: 0.2157576 Summarizing the test error rate for naiveBayes and KNN.12naiveBayes (cv10): 0.2095KNN (cv10, K=1): 0.1942 Linear Model &#8634;Simple Linear RegressionA simple linear regression assumes that: Y \\sim \\beta_0 + \\beta_1XCoefficient EstimateGiven data points (x_i, y_i), let \\hat{y_i} = \\hat{\\beta_0} + \\hat{\\beta_1}x_i. We define the residual sum of squares, or RSS, as: RSS = \\sum (y_i - \\hat{y_i})^2Minimizing RSS as an objective function, we can solve for \\hat{\\beta_0}, \\hat{\\beta_1}: \\begin{align} \\hat{\\beta_1} &= \\dfrac{\\sum (x_i - \\bar{x})(y_i - \\bar{y})}{\\sum (x_i-\\bar{x})^2} \\\\ \\hat{\\beta_0} &= \\bar{y} - \\hat{\\beta_1}\\bar{x} \\end{align}Coefficient Estimate - Gaussian ResidualFurthermore, if we assume the individual error terms are i.i.d Gaussian, i.e.: Y = \\beta_0 + \\beta_1x + \\epsilon \\\\ \\text{where, } \\epsilon \\sim \\mathcal{N}(0, \\sigma^2)We now have a conditional pdf of Y given x: p(y_i|x_i; \\beta_0, \\beta_1, \\sigma^2) = \\dfrac{1}{\\sqrt{2\\pi\\sigma^2}}e^{-\\dfrac{[y_i - (\\beta_0 + \\beta_1x_i)]^2}{2\\sigma^2}}The maximum log-likelihood estimator \\hat{l}for the paramter estimate b_0, b_1, and s^2 can be computed as follow: \\begin{align} \\hat{l}(b_0, b_1, s^2| x_i, y_i) &= log \\prod p(y_i|x_i; b_0, b_1, s^2) \\\\ &= -\\dfrac{n}{2}log{2\\pi} - nlogs - \\dfrac{1}{2s^2}\\sum [y_i - (b_0+b_1x)]^2 \\end{align}Setting the partial-derivative of the estimator with respect to each of the parameter to zero, we can obtain the maximum likelihood parameters: \\begin{align} \\hat{\\beta_1} &= \\dfrac{\\sum (x_i - \\bar{x})(y_i - \\bar{y})}{\\sum (x_i-\\bar{x})^2} \\\\ \\hat{\\beta_0} &= \\bar{y} - \\hat{\\beta_1}\\bar{x} \\\\ \\hat{\\sigma^2} &= \\dfrac{1}{n}\\sum [y_i - (b_0+b_1x_i)]^2 \\end{align}MLE, or maximum likelihood estimation, is a frequentist approach for estimating model parameters based on the assumed underlying model form and error distribution, by maximizing the probability of seeing what we saw in the data. MLE is a near-optimal method of estimation, and is optimal in many cases. If we assume a Gaussian error distribution and a linear model, then the conclusion above states that maximizing the MLE objective function is the SAME as minimizing the RSS objective function. More on frequentist vs Bayesian in this SOA work paper. Also see this CMU lecture note and for more detail regarding the derivation. Model FitRecall that we assume there is a underlying relationship f between Y and X: Y=f(X) + \\epsilonThe residual standard error, or RSE, estimates the standard deviation of \\epsilon. Note that RSE is an absolute measure of the lack of fit of the model and depends on units of Y. RSE = \\sqrt{RSS/(n-2)}The R^2 measures the proportion of variance explained by the regression. TSS is the total sum of squares which measures the total variance in Y R^2 = 1 - \\dfrac{RSS}{TSS}In a simple regression setting, R^2 = Corr(X, Y)^2 Residual PlotHere is a good article on how to interpret your residual plot. Summarizing the approaches for different residual issues: Y-axis Unbalanced: transform target X-axis Unbalanced: transform predictor Heteroscedasticity: transform target/predictor Non-Linearity: transform predictor; create non-linear model Outlier: transform target/predictor; remove/assess the outlier; Multiple Linear RegressionThe multiple linear regression takes the form: Y = \\beta_0 + \\beta_1X_1 + \\beta_2X_2 + \\dots + \\beta_pX_p + \\epsilonF-statisticWe use the F-statistic to test the null hypothesis that there are no relationships between the predictors and target variable. H_0: \\beta_1 = \\beta_2 = \\dots = \\beta_p = 0 \\\\ H_a: \\text{ at least one } \\beta \\text{ is non-zero}We calculate the F-statistic as follow: F = \\dfrac{(TSS - RSS)/p}{RSS/(n-p-1)}We expect F=1 if H_0 is true. Potential ProblemsNon-Linearity Residual plots are useful to detect whether the underlying relationship f is non-linear. One of the solutions to this problem is to fit transformations of the predictors such as log{X}, \\sqrt{X}, and X^2. Collinearity This is where two or more predictors are closely correlated with each other, or “collinear”. Collinearity reduces the accuracy of the coefficient estimates by increasing its standard deviation and p-value. One way to detect collinearity is from the correlation matrix or the “pairs” plot in R. There are two solutions: dropping one of the collinear predictor, or combine the collinear predictors into a single predictor. Multi-collinearity This is where collinearity exist between three or more predictors when none of the pairwise correlations are high. The best way to assess multi-collinearity if through variance inflation factor, or VIF. VIF(\\beta_j) = \\dfrac{var(\\beta_j) \\text{ in full model}}{var(\\beta_j) \\text{ in single } \\beta_j \\text{ model}}A VIF of 1 indicates no collinearity. A VIF of 10+ indicates high collinearity. Outliers Use residual plot to detect and potentially remove outliers. Linear Model Selection and RegularizationLinear model can be improved by using alternative fitting procedures, which produce better prediction accuracy and model interpretability. Subset Selection Select a subset of the original predictors and then fit the model. Shrinkage/Regularization Fit the model by shrinking coefficient estimates towards zero, therefore reducing variances of the coefficient estimates. Dimension Reduction Project the predictors onto a M-dimensional subspace, then use the M projections as predictors to fit a linear model with least square. Subset SelectionThe beset subset selection fits a separate least square regression for each combination from the p predictors, creating 2^p models to compare. The forward stepwise selection and backward stepwise selection fits a total of 1+p(p+1)/2 models. Specifically, at each step a predictor is added/removed to the model only if it gives the greatest additional improvement (lowest RSS or highest adjusted R^2) among all the predictors. After the selection process, we need to determine the optimal model that gives the lowest potential test error, either through: Cross-validation, or Adjusted train error Example 1: \\boldsymbol{C_p} := \\dfrac{1}{n}(RSS + 2d\\hat{\\sigma}^2), where d is the number of predictors in the subset, and \\hat{\\sigma}^2 is the variance of error estimated using the full models containing all p predictors. Essentially, a penalty term 2d\\hat{\\sigma}^2 is added to the train RSS to adjust for the fact that the training error tends to underestimate the test error. Example 2: \\boldsymbol{AIC} = \\dfrac{1}{n\\hat{\\sigma}^2}(RSS + 2d\\hat{\\sigma}^2). The AIC, or Akaike information criterion, uses the maximum likelihood function to assess the relative quality of statistical models give a set of data. In linear models with Gaussian error terms, the maximum likelihood function is equivalent to RSS, and therefore C_p and AIC are proportional to each other. Example 3: \\boldsymbol{BIC} = \\dfrac{1}{n\\hat{\\sigma}^2}(RSS + log(n)d\\hat{\\sigma}^2) Example 4: \\boldsymbol{Adjusted}\\; \\boldsymbol{R^2} = 1 - \\dfrac{RSS/(n-d-1)}{TSS/(n-1)}. While RSS always decreases in the stepwise selection as the number of predictors increases, RSS/(n-d-1) may or may not decrease. ShrinkageRidge RegressionRecall that in least square regression, the coefficient \\beta are estimated by minimizing the objective function RSS. Objective\\ Function = RSS = \\sum (y_i - \\hat{y_i})^2In ridge regression, the objective function include an additional shrinkage penalty, where \\lambda>0 is a tuning parameter. Note that we do not want to shrink the intercept \\beta_0, which is simply a measure of the mean of the responses: Objective\\ Function = RSS + \\lambda\\sum_{i>0}\\beta_i^2 As \\lambda increases, the variance decreases and the bias increases. The model fit usually is improved initially as the variance decreases, but worsen at some point when bias starts to increases rapidly. Cross-validation is often used to select the optimal \\lambda. As \\lambda\\rightarrow\\infty, the coefficient approaches 0. The ridge regression works when the linear model has low bias and high variance, e.g. when the underlying relationship is close to linear. The ridge regression trades off a small increase in bias for large decrease in variance. Additionally, it is important to standardize all features when applying regularization. Imagining a feature in dollar and in thousand dollar: the model with the dollar feature will have much higher coefficient compared to the thousand dollar one, leading to larger regularization effect for the dollar feature. Lasso RegressionAlthough the ridge regression shrinks the coefficients, it does not eliminiate excess predictors. Model interpretation might be an issue for the ridge regression where the number of predictors are large. The lasso regression overcomes this issue and force some coefficients to be exactly 0. Objective\\ Function = RSS + \\lambda\\sum_{i>0}|\\beta_i|However, there are limitations of feature selections using regularization techniques such as lasso, such as model interpretability. In addition, the feature we selected are optimized in linear models, and may not necessarily translate to other model forms. Note the difference between L2 (ridge) and L1 (lasso) penalty: when the coefficients (absolute value) are greater than 1 (when the parameters are large), the L2 penalty is greater than the L1, and ridge provides more shrinkage. when the coefficients (absolute value) are smaller than 1 (when the parameters are small), the L1 penalty is greater than the L2, and lasso provides more shrinkage. In R, we use the glmnet package to compute ridge and lasso regressions to predict mpg from the mtcars built-in data set.1234567891011121314151617181920212223242526272829303132333435363738394041library(glmnet)library(caret)set.seed(9999)# datadf &lt;- as.data.frame(mtcars)x &lt;- model.matrix(mpg~., df)[, -1]y &lt;- df$mpg# 75/25 train/test splitpartition &lt;- createDataPartition(df$mpg, list = FALSE, p = .75)df_train &lt;- df[partition, ]df_test &lt;- df[-partition, ]x_train &lt;- x[partition, ]x_test &lt;- x[-partition, ]y_train &lt;- y[partition]y_test &lt;- y[-partition]# fit regressionm1 &lt;- lm(mpg ~ ., df_train)m1.pred &lt;- predict(m1, df_test)m1.mse &lt;- round(mean((y_test - m1.pred)^2), 2)# fit ridge regressionm2 &lt;- cv.glmnet(x_train, y_train, alpha=0, nfolds=6)m2.bestlambda &lt;- m2$lambda.minm2.pred &lt;- predict(m2, s=m2.bestlambda, x_test)m2.mse &lt;- round(mean((y_test - m2.pred)^2), 2)# fit lasso regressionm3 &lt;- cv.glmnet(x_train, y_train, alpha=1, nfolds=6)m3.bestlambda &lt;- m3$lambda.minm3.pred &lt;- predict(m3, s=m3.bestlambda, x_test)m3.mse &lt;- round(mean((y_test - m3.pred)^2), 2)# get coefficientsm2.best &lt;- glmnet(x_train, y_train, alpha=0, lambda=m2.bestlambda)m3.best &lt;- glmnet(x_train, y_train, alpha=1, lambda=m3.bestlambda)comp &lt;- cbind(coef(m1), coef(m2.best), coef(m3.best))colnames(comp) &lt;- c(\"original\", \"ridge\", \"lasso\") The test MSE are as follow. Note that both ridge and lasso regression perform better than the original regression.123456&gt; m1.mse[1] 16.64&gt; m2.mse[1] 3.66&gt; m3.mse[1] 6.61 We also made a comparison of the coefficients, based on the normal regression and the regularized regression with cv-optimal lambda.1234567891011121314&gt; comp11 x 3 sparse Matrix of class \"dgCMatrix\" original ridge lasso(Intercept) -19.52071389 19.420775180 14.002192375cyl 1.69431225 -0.275408324 . disp 0.01185998 -0.004705579 . hp -0.01449594 -0.011129305 -0.002545135drat 3.08676192 1.272808791 1.334526777wt -3.19280650 -1.137507747 -2.254408320qsec 1.02473436 0.117671597 0.331182874vs 0.97127211 0.677494227 . am 2.63740010 1.633418877 1.703501439gear 3.36943552 0.794847062 1.571031414carb -1.45443855 -0.588427657 -1.162118484 Resampling MethodResampling methods involve repeatedly drawing samples from a training set to re-fit the model. Cross-ValidationWe often use the test error rate to determine and compare how well a statistical learning model perform. However, in the absence of a large designated test set, the test error rate can be difficult to estimate. The train error rate is often quite different from the test error rate. Therefore, cross-validation can be used to estimate the test error rates by creating validation sets off the train data. A k-fold cross validation involves randomly dividing the observations into k-groups. The process is repeated k-times where each group is treated as a validation set while fitting the remaining k-1 groups. The k-fold CV test MSE is the average of all the MSE from each validation set: MSE_{CV} = \\dfrac{1}{k}\\sum_{i=1}^{k} MSE_iThe leave-one-out cross validation, or LOOCV, is a special case of k-fold CV with k=1. Since LOOCV requires fitting the model n times, with n being equal to number of train data points. The k-fold CV with k=5\\ or \\ 10 are more feasible computationally as it only needs to fit the model 5\\ or\\ 10 times. BootstrapBootstrap provides a measure of accruacy of either a parameter estimate or a given statistical learning method. It can be used to estimate variance of a parameter by repeatedly re-sampling the same data set with replacement (i.e. duplicate data entries allowed) while re-calculating the parameter based on each re-sample. Hyper-Parameter TuningWe specify numerious constants called hyperparameter during our modeling process, e.g. \\lambda, \\alpha, etc. To set these constant such that our model can predict accruately while avoiding over-complexity and overfitting, we tune our hyperparameter with cross validation. For more details see the auto claim notebook. Generalized Linear ModelGeneralized linear models were developed by Nelder and Wedderburn in a paper published in 1972 to provide a flexible framework which introduces a link function that transform the linear combinations of predictors. An Ordinary Linear Model has many limitations: As ordinary linear model produces a numeric response, it requires the assumptions of orderings to predict qualitative responses. Negative values may be predicted when not allowed. When the variance of the target variable depends on the mean, the homoscedasticity assumption is violated, and therefore the least square estimator is no longer the MLE estimator and various statistical test would not hold. Sensitive to outliers. Does not perform well with non-linear relationships. The Generalized Linear Models relaxes the assumptions of OLM. First, GLM relaxes the normal residual assumption of OLM, and allow the target variable Y to follow any distribution within the exponential distribution family: f(y_i|x_i) \\sim \\text{exponential distribution family}With regard to this distribution, there exists a canonical link function associated with it that simplifies the mathematics of solving GLM analytically. Normal =&gt; Identity: \\phi(a) = a Exponential/Gamma =&gt; Negative Inverse: \\phi(a) = - a^{-1} Inverse Gaussian =&gt; Inverse Square: \\phi(a) = a^{-2} Poisson =&gt; Log: \\phi(a) = ln(a) Bernoulli/Binomial/Multinomial =&gt; Logit: \\phi(a) = ln[a/(1-a)] We can either choose the canonical link function or pick another one (which may not lead to a converged GLM solution, however). With this link function, GLM assumes that the expectation of the target is the inverse linked linear combination of predictors: \\mathbb{E}(y_i|x_i) = \\phi^{-1}(\\beta x_i)With all above assumptions satisfy, the coefficient \\beta of a GLM model can then be solved: \\phi(Y) \\sim \\beta XLogistic RegressionThe logistic regression model is popular for classification problems. With two response classes, we can calculate the probability of assigning the response in each class and predict the response by choosing the class with the higher probability. or more than two response classes, multiple-class logistic regression is available but the discrimentant analysis is more popular. We define p(X) = \\mathbb{P}[Y = 1|X] as our new response variable and the link function: logit function, short for logistic function, as such: \\phi(p(X)) = logit(p(X)) = log[\\dfrac{p(X)}{1-p(X)}]Since we assume a linear relationship between our predictor X and the linked reponse logit(p(X)), we have: log[\\dfrac{p(X)}{1-p(X)}] = \\beta_0+\\beta_1X_1+\\beta_2X_2\\dotsTherefore, p(X) = \\dfrac{e^{\\beta_0+\\beta_1X_1+\\beta_2X_2\\dots}}{1+e^{\\beta_0+\\beta_1X_1+\\beta_2X_2\\dots}}Now we have a nice property of p(X) \\in (0, 1), which is exactly what we wanted to model probability responses. The quantity p(X)/(1-p(X)) is called the odds. In R, we use the glm function (with family=binomial) in the predict Survival from the Titanic dataset.12345678910111213141516171819202122232425262728293031323334353637library(e1071)library(caret)set.seed(9999)df &lt;- as.data.frame(Titanic)df &lt;- df[rep.int(seq_len(nrow(df)), df$Freq), ]df &lt;- subset(df, select = -c(Freq))# Binarize class, sex and agedf.new &lt;- predict(dummyVars(\"~Class+Sex+Age\", df, sep=\"_\", fullRank=TRUE), df)df.new &lt;- as.data.frame(df.new)df.new[\"Survived\"] &lt;- df$Surviveddf &lt;- df.new# Create random 80/20 train/test splittrain_ind &lt;- sample(seq_len(nrow(df)), size = floor(0.80 * nrow(df)))df_train &lt;- df[train_ind, ]df_test &lt;- df[-train_ind, ]# Fit Logistic Regressionmodel &lt;- glm(Survived~., df_train, family=binomial)summary(model)contrasts(df$Survived)# Predict In-Sampleprob_train &lt;- predict(model, df_train, type=\"response\")pred_train &lt;- rep(\"No\", nrow(df_train))pred_train[prob_train &gt; .5] &lt;- \"Yes\"# Predict Out-Of-Sampleprob_test &lt;- predict(model, df_test, type=\"response\")pred_test &lt;- rep(\"No\", nrow(df_test))pred_test[prob_test &gt; .5] &lt;- \"Yes\" From summary(model), note that most coeefficients are significant.123456789&gt; summary(model)Coefficients: Estimate Std. Error z value Pr(&gt;|z|) (Intercept) 0.3094 0.3132 0.988 0.323 Class_2nd -1.1163 0.2187 -5.105 3.31e-07 `Class_3rd -1.7041 0.1918 -8.883 &lt; 2e-16 `Class_Crew -0.8848 0.1773 -4.991 6.01e-07 `Sex_Female 2.3691 0.1555 15.235 &lt; 2e-16 `Age_Adult -0.6289 0.2767 -2.273 0.023 * Note that probability of 1 correspond to “Yes” in the Survived variable.1234&gt; contrasts(df$Survived) YesNo 0Yes 1 From in-sample confusion matrix.123456789&gt; confusionMatrix(as.factor(pred_train), df_train$Survived)Confusion Matrix and Statistics ReferencePrediction No Yes No 1087 296 Yes 102 275 Accuracy : 0.7739 From out-of-sample confusion matrix.123456789&gt; confusionMatrix(as.factor(pred_test), df_test$Survived)Confusion Matrix and Statistics ReferencePrediction No Yes No 277 66 Yes 24 74 Accuracy : 0.7959 Comparing the test error rate between naiveBayes, KNN and logistic regression.123naiveBayes (cv10): 0.2095KNN (cv10, K=1): 0.1942logistic regression: 0.2041 Poisson RegressionThe Poisson distribution expresses the probability of a given number of events occurring in a fixed interval of time or space if these events occur with a known constant rate and independently of the time since the last event. \\mathbb{P}(\\text{k events in interval}) = e^{\\lambda}\\dfrac{\\lambda^k}{k!}We can fit Posisson regression if we observe that the frequencies of response variable Y exhibits a Poisson shape. We will create a new response vector \\theta and assumes that log(\\theta) has an underlying linear relationship in X. Y \\sim poisson(\\boldsymbol {\\theta}) \\\\ \\text{and, } log(\\boldsymbol {\\theta}) = \\beta XThat is, we assume that for each X_i, Y_i \\sim poisson(e^{\\beta X_i}). The log link function ensures that \\boldsymbol{\\theta} is strictly positive. Note that we had made a strong assumption that for each X_i, the mean and variance of Y_i are the same, as dictated by the Poisson distribution. However, if the data shows larger variance than expected, or overdispersion, we can then use the quasi-Poisson regression, which is essenstially the negative binomial distribution with looser assumptions than Poisson. In the diamonds dataset from the ggplot2 package, we plotted the histogram of the price data from 50,000 observations. 123library(ggplot2)df &lt;- as.data.frame(diamonds)ggplot(df, aes(x=price)) + geom_histogram(binwidth=1) The price data shows resemblence to a Poisson distribution. We fitted four different models: linear, ridge, lasso, and Poisson regressions.1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162library(e1071)library(ggplot2)library(caret)library(glmnet)set.seed(9999)df &lt;- as.data.frame(diamonds)# caret::dummyVars does not work well with ordered factor. change to unordered.df[\"cut_1\"] &lt;- factor(df$cut, order=FALSE)df[\"color_1\"] &lt;- factor(df$color, order=FALSE)df[\"clarity_1\"] &lt;- factor(df$clarity, order=FALSE)# Binarize Category Variabledummy &lt;- dummyVars(~ cut_1 + color_1 + clarity_1, df, sep=\"_\", fullRank=TRUE)df.new &lt;- as.data.frame(predict(dummy, newdata = df))df.new[\"carat\"] &lt;- df$caratdf.new[\"price\"] &lt;- df$pricedf &lt;- df.newx &lt;- model.matrix(price~., df)[, -1]y &lt;- df$price# Create random 80/20 train/test splitpartition &lt;- sample(seq_len(nrow(df)), size = floor(0.80 * nrow(df)))df_train &lt;- df[partition, ]df_test &lt;- df[-partition, ]x_train &lt;- x[partition, ]x_test &lt;- x[-partition, ]y_train &lt;- y[partition]y_test &lt;- y[-partition]# Fit Linear Regressionm1 &lt;- lm(price~., df_train)m1.pred &lt;- predict(m1, df_test)m1.mse &lt;- round(mean((y_test - m1.pred)^2), 2)# Fit Ridge Regressionm2 &lt;- cv.glmnet(x_train, y_train, alpha=0, nfolds=10)m2.bestlambda &lt;- m2$lambda.minm2.pred &lt;- predict(m2, s=m2.bestlambda, x_test)m2.mse &lt;- round(mean((y_test - m2.pred)^2), 2)# Fit Lasso Regressionm3 &lt;- cv.glmnet(x_train, y_train, alpha=1, nfolds=10)m3.bestlambda &lt;- m3$lambda.minm3.pred &lt;- predict(m3, s=m3.bestlambda, x_test)m3.mse &lt;- round(mean((y_test - m3.pred)^2), 2)# Fit Poisson Regressionm4 &lt;- glm(price~., df_train, family=poisson(link=\"log\"))m4.pred &lt;- predict(m4, df_test)m4.mse &lt;- round(mean((y_test - exp(m4.pred))^2), 2)# Fit quasiPoisson Regressionm5 &lt;- glm(price~., df_train, family=quasipoisson(link=\"log\"))m5.pred &lt;- predict(m5, df_test)m5.mse &lt;- round(mean((y_test - exp(m5.pred))^2), 2)# Compare Coefficientm2.best &lt;- glmnet(x_train, y_train, alpha=0, lambda=m2.bestlambda)m3.best &lt;- glmnet(x_train, y_train, alpha=1, lambda=m3.bestlambda)comp &lt;- cbind(coef(m1), coef(m2.best), coef(m3.best), coef(m4), coef(m5))colnames(comp) &lt;- c(\"original\", \"ridge\", \"lasso\", \"Poisson\", \"quasiPoi\") Showing the results. We can see that lasso regression improved upon ridge. However, the Poisson regression show very high MSE, and not improved by using quasi-Poisson to deal with overdispersion.1234567891011121314&gt; m1.mse[1] 1296082&gt; m2.mse[1] 1662769&gt; m3.mse[1] 1296773&gt; m4.mse[1] 5237564&gt; m5.mse[1] 5237564 Comparing coefficients:12345678910111213141516171819202122&gt; comp19 x 5 sparse Matrix of class \"dgCMatrix\" original ridge lasso Poisson quasiPoi(Intercept) -7369.2859 -2751.693983 -7083.4777 5.17185599 5.17185599cut_1_Good 686.6877 112.163397 657.1100 0.17515789 0.17515789`cut_1_Very Good` 864.3160 319.828814 838.9901 0.20528993 0.20528993cut_1_Premium 893.6342 367.364011 866.6581 0.18009057 0.18009057cut_1_Ideal 1025.5579 421.231162 999.8031 0.20406528 0.20406528color_1_E -225.3985 -23.486004 -205.5637 -0.05660526 -0.05660526color_1_F -294.1807 2.717515 -274.2126 -0.03079075 -0.03079075color_1_G -522.9599 -112.556133 -501.1661 -0.10597258 -0.10597258color_1_H -997.6266 -490.885083 -975.9837 -0.25411004 -0.25411004color_1_I -1452.1455 -749.323400 -1426.9279 -0.42200863 -0.42200863color_1_J -2343.2864 -1450.247841 -2315.1429 -0.63819087 -0.63819087clarity_1_SI2 2612.5463 -472.362109 2345.9392 1.14176901 1.14176901clarity_1_SI1 3555.6013 149.192295 3287.0687 1.38540593 1.38540593clarity_1_VS2 4210.3193 671.522828 3940.7103 1.50843614 1.50843614clarity_1_VS1 4507.7144 861.334888 4235.9431 1.58850692 1.58850692clarity_1_VVS2 4965.2210 1192.175019 4691.8855 1.66443836 1.66443836clarity_1_VVS1 5072.6388 1162.725817 4796.5710 1.61060572 1.61060572clarity_1_IF 5436.6567 1476.377453 5158.0224 1.72336616 1.72336616carat 8899.8818 7672.223943 8883.8976 1.65798106 1.65798106 We are curious as to why the Poisson regression perform much worse than a simple linear regression, when the reponse variable clearly shows Poisson patterns. 1234567891011p1 &lt;- ggplot() + geom_point(data=df_test, aes(x=as.numeric(row.names(df_test)), y=price), shape=\".\", color=\"black\") + geom_point(aes(x=as.numeric(row.names(df_test)), y=m1.pred), shape=\".\", color=\"red\")p2 &lt;- ggplot() + geom_point(data=df_test, aes(x=as.numeric(row.names(df_test)), y=price), shape=\".\", color=\"black\") + geom_point(aes(x=as.numeric(row.names(df_test)), y=exp(m4.pred)), shape=\".\", color=\"red\") We first look at the linear regression fit, where the black dots are the original data and the red dots are the fitted data: We then look at the Poisson regression fit. Unfortunately the Poisson regression create ultra-high predictions for some values, which skew the MSE matrix. This is we forget to log the numerical variable (carat) when we use log link function, which results in a exponential shape for the prediction. We change the code as follow:123456789# Fit Poisson Regressionm4 &lt;- glm(price~-carat+log(carat), df_train, family=poisson(link=\"log\"))m4.pred &lt;- predict(m4, df_test)m4.mse &lt;- round(mean((y_test - exp(m4.pred))^2), 2)# Fit quasiPoisson Regressionm5 &lt;- glm(price~-carat+log(carat)., df_train, family=quasipoisson(link=\"log\"))m5.pred &lt;- predict(m5, df_test)m5.mse &lt;- round(mean((y_test - exp(m5.pred))^2), 2) The mse are now better:1234&gt; m4.mse[1] 2544181&gt; m5.mse[1] 2544181 Plotting the prediction. We can see that other than one prediction outlier, the overall predictions are better than when we did not log the carat. Goodness of FitDeviance is a measure of the goodness of fit of a generalized linear model, similar to a RSS in the simple linear model. . The default value is called null deviance and is the deviance calculated when the response variable is predicted using its sample mean. Adding additional feature to the model would generally decrease the deviance and decrease the degree of freedoms. Tree-Based Method &#8634;The tree-based method involve segmenting the predictor space into several regions to make a prediction for a given observation. There are several advantages to the tree-based methods: Easy to explain Intuitive to human reasoning Graphic and interpretable No need to dummy variables for qualitative data On the other hand, disadvantages: Lower predictive accuracy Sensitive to change in data Several techniques can make significant improvement to compensate the disadvantages, namely bagging, random forest and boosting. Regression TreeIn a linear regression model, the underlying relationship is assumed to be: f(X) = \\beta_0 + \\sum\\beta_iX_iWhereas in a regression tree model, the underlying is assumed to be: f(X) = \\sum c_i\\textbf{1}_{X_i\\in R_i}Where each R_i represent a partition of the feature space. The goal is to solve for the partition set \\{R_i\\}_{i\\in I} which minimize the objective function: Objective\\; Function = RSS = \\sum_{i\\in I}\\sum_{X_j\\in R_i} (y_j-\\bar{y}_{R_i})^2To find \\{R_i\\}_{i\\in I} efficiently, we introduce recursive binary splitting, which is a top-down and greedy approach. It is greedy because it is short-sighted in that it always chooses the current best split, instead of the optimal split overall. Due to the greedy nature, it is preferred that we first grow a complex tree and then prune it back, so that all potential large reductions in RSS are captured. Cost Complexity PruningThe cost complexity pruning approach aim to minimize the objective function, give each value of \\alpha: Objective\\; Function = \\sum_{i\\in I_T}\\sum_{X_j\\in R_i} (y_j-\\bar{y}_{R_i})^2 + \\alpha|T|Where |T| is the number of terminal nodes of subtree T\\subset T_0 where T_0 is the original un-prune tree. The tuning parameter \\alpha controls the complexity of the subtree T, penalizing any increase in nodes. The goal is to prune the tree with various \\alpha and then use cross-validation to select the best \\alpha. This is similar to the lasso equation, which also introduce a tuning parameter \\lambda to control the complexity of a linear model. Objective\\; Function = RSS + \\lambda\\sum_{i>0}|\\beta_i|In R, we use the rpart library, which stands for recursive partitioning and regression trees, to fit a regression tree to predict mpg in our mtcars dataset.123456789101112131415library(caret)library(rpart)library(rpart.plot)set.seed(9999)df &lt;- as.data.frame(mtcars)# create a 75/25 train/test splitpartition &lt;- createDataPartition(df$mpg, list=FALSE, p=0.75)train &lt;- df[partition, ]test &lt;- df[-partition, ]# fit regression treet1 &lt;- rpart(mpg ~ ., train)t1.predict &lt;- predict(t1, test)t1.mse &lt;- round(mean((test$mpg - t1.predict)^2), 2) The test MSE, as compared to the previous linear models.1234567891011# regression tree&gt; t1.mse[1] 11.59# linear regression&gt; m1.mse[1] 16.64&gt; m2.mse[1] 3.66&gt; m3.mse[1] 6.61 Plotting the tree with rpart.plot(t1) command. Classification TreeClassification tree is very similar to regression trees expect we need an alternative method to RSS when deciding a split. There are three common approaches. Classification error rate: E = 1 - \\underset{k}{max}(\\hat{p}_{mk}) Where \\hat{p}_{mk} represents the porportion of train observations from the m-th parent node that are from the k-th child node. However, the this approach is not sufficiently sensitive to node impurity for tree-growing, compared to the next two. Gini index: G = \\sum_k \\hat{p}_{mk}(1-\\hat{p}_{mk}) Note that the Gini index decreases as all \\hat{p}_{mk} get closer to 0 or 1. Therefore it is a measure of the node purity. Entropy: D = -\\sum_k \\hat{p}_{mk} log_2(\\hat{p}_{mk}) The Entropy is also a measure of the node purity and similar to the Gini index numerically. For a two-class decision tree, the impurity measures calculated from different methods for a given \\hat{p}_{mk} are simulated below with python. 12345678910111213import matplotlib.pyplot as pltimport numpy as npx = np.arange(0, 1, 0.001)y1 = x*np.log(x)/np.log(2)*-1 + (1-x)*np.log(1-x)/np.log(2)*-1y2 = x*(1-x) + (1-x)*(1-(1-x))y3 = 1-np.maximum(x, 1-x)fig = plt.figure(figsize=(6, 6))plt.plot(x, y1)plt.plot(x, y2)plt.plot(x, y3)plt.legend(['entropy', 'gini', 'class error'], loc='upper right') We can see that all three method are similar and consistent with each other. Entropy and the Gini are more sensitive to changes in the node probabilities, therefore preferrable when growing the trees. The classification error is more often used during complexity pruning. Information GainWhen the measure of node purity is calculated, we want to maximize the information gain after each split. We use P and C to denote the parent and child node, with entropy as the measure. N is the number of observations under the parent node: IG = Entropy(P) - \\sum_{k=1}^{K}\\dfrac{N_k}{N}Entropy(C_k)In R, we use the rpart library to create a classification tree to predict Survived in the Titanic data set.12345678910111213141516171819202122library(caret)library(rpart)library(rpart.plot)set.seed(9999)df &lt;- as.data.frame(Titanic)df &lt;- df[rep.int(seq_len(nrow(df)), df$Freq), ]df &lt;- subset(df, select = -c(Freq))# create a 75/25 train/test splitpartition &lt;- createDataPartition(df$Survived, list=FALSE, p=0.75)train &lt;- df[partition, ]test &lt;- df[-partition, ]# fit classification treet2 &lt;- rpart(Survived ~ ., train)t2.prob &lt;- predict(t2, test)t2.pred &lt;- rep(\"No\", nrow(t2.prob))t2.pred[t2.prob[, 2] &gt; .5] &lt;- \"Yes\"# pruningt2.prune &lt;- prune(t2, cp = 0.05)rpart.plot(t2.prune) The confusion matrix shows:123456789&gt; confusionMatrix(as.factor(t2.pred), test$Survived)Confusion Matrix and Statistics ReferencePrediction No Yes No 368 105 Yes 4 72 Accuracy : 0.8015 Plotting the tree with rpart.plot(t2). Plotting the complexity parameter against the cross-validation relative error with plotcp(t2). Although the relative error is at the lowest at 5 nodes, comparable level of relative error was achieved at 2 nodes. Because decision tree is prone to overfitting, here we manually prune the tree back to 2 nodes. Plotting the tree with rpart.plot(t2.prune). The confusion matrix after pruning. We lose a small bit of out-of-sample accuracy due to manual pruning.123456789&gt; confusionMatrix(as.factor(t2.prune.pred), test$Survived)Confusion Matrix and Statistics ReferencePrediction No Yes No 343 83 Yes 29 94 Accuracy : 0.796 Comparing the test error rate with naiveBayes, KNN and logistic regression.1234naiveBayes (cv10): 0.2095KNN (cv10, K=1): 0.1942classification tree: 0.1985classification tree (prune): 0.2040 Confusion MatrixThe confusion matrix is a convenient summary of the model prediction. In our previous example with the un-pruned tree: 12345678910111213&gt; confusionMatrix(as.factor(t2.pred), test$Survived)Confusion Matrix and Statistics ReferencePrediction No Yes No 368 105 Yes 4 72# mapping the number to definition ReferencePrediction No Yes No TN FN Yes FP TP There are four types of prediction: True Positive (TP): 72 True Negative (TN): 368 False Positive (FP), or Type I Error: 4 False Negative (FN), or Type II Error: 105 Several metrics can be computed: Accuracy: (TP + TN) / N = (72 + 368) / 549 = 0.8015 Error Rate: (FP + FN) / N = 1 - Accuracy = 0.1985 Precision: TP / (Predicted Positive) = 72 / (72 + 4) = 0.9474 Sensitivity: TP / (Actually Positive) = 72 / (72 + 105) = 0.4068 Receiver Operator Characteristic CurveThe ROC curve can be used to evaluate the performacne of our model. The ROC curve plots the TPR (true positive rate) against FPR (false positive rate) over a range of cutoff values: TPR = TP / (Actually Positive) = 0.4068 FPR = FP / (Actually Negative) = 0.0107 In python, we can create a ROC curve from our previous prediction TPR and FPR:1234567891011121314import matplotlib.pyplot as pltimport numpy as npx = np.arange(0, 1, 0.0001)plt.plot(x, x)plt.xlabel('FPR')plt.ylabel('TPR')x2=0.0107y2=0.4680plt.scatter(x2, y2, s=20, color='red')plt.plot([0, x2], [0, y2], 'r-', color='red')plt.plot([x2, 1], [y2, 1], 'r-', color='red')plt.title('ROC Plot') The baseline line refers to a model/cutoff where all observations in the testing set are predicted to be positive (point x=1, y=1), or negative (point x=0, y=0). The area under the red lines and above the x-axis is an estimate of the model fit and is called AUC, or area under the ROC curve. An AUC of 1 means that the model has a TPR of 1 and FPR of 0. Ensemble MethodsBaggingThe decision tree method in general suffer from high model variance, compared to linear regression which shows low variance. Bootstrap aggregation, or bagging is a general-purpose procedure for reducing variance of a statistical model without affecting the bias. It is particular useful in the decision tree model context. For regression trees, construct B regression trees using B bootstrapped (repeatedly sampled) training sets. These trees grow deep and are not pruned, therefore having high variance. At the end, average the trees to reduce the variance. For classification trees, construct B classification trees. When predicting a test observation, take the majority classification resulted from the B trees. Note that the bagging results are more accruate but less visual. We can obtain the variable importances by computing the total RSS/Gini decreases by splits over each predictors, hence providing better interpretations of the results. Random ForestRandom forest improves upon bagged trees by de-correlating the trees. At each split, only m\\approx\\sqrt{p} predictors are considered, isolating effects on single feature with large influences. In R, use the randomForest package:123456789101112131415161718library(caret)library(randomForest)set.seed(9999)df &lt;- as.data.frame(Titanic)df &lt;- df[rep.int(seq_len(nrow(df)), df$Freq), ]df &lt;- subset(df, select = -c(Freq))# create a 75/25 train/test splitpartition &lt;- createDataPartition(df$Survived, list=FALSE, p=0.75)train &lt;- df[partition, ]test &lt;- df[-partition, ]# fit random forestrf &lt;- randomForest(formula = Survived ~ ., data = train, ntree = 100, importance = TRUE) In-sample confusion matrix:12345678910111213&gt; rfCall: randomForest(formula = Survived ~ ., data = train, ntree = 100, importance = TRUE) Type of random forest: classification Number of trees: 100No. of variables tried at each split: 1 OOB estimate of error rate: 23.43%Confusion matrix: No Yes class.errorNo 1063 55 0.04919499Yes 332 202 0.62172285 Out-of-sample confusino matrix:123456789&gt; confusionMatrix(as.factor(predict(rf, test)), test$Survived)Confusion Matrix and Statistics ReferencePrediction No Yes No 368 108 Yes 4 69 Accuracy : 0.796 Comparing the test error rate with naiveBayes, KNN and logistic regression.12345naiveBayes (cv10): 0.2095KNN (cv10, K=1): 0.1942classification tree: 0.1985classification tree (prune): 0.2040random forest: 0.2040 BoostingBoosting is also a general-purpose procedure for improving accuracy of the statistical model. In boosting, we repeatedly fit new trees to the residuals from the previous tree, and add the new trees to the main tree such that a loss function is minimized (subject to shrinkage parameter \\lambda, typical 0.01, to control overfitting). CV is often used to determine the total number of trees to be fitted. A gradient boosting machine is an algorithm that calculates the gradient of the loss function and update the paramters such that the model moves in the direction of the negative gradient, thus closer to a minimum point of the loss function. XGBoost is an open-source software library that provides a gradient boosting framework for R. XGBoost initially started as a research project by Tianqi Chen as part of the Distributed (Deep) Machine Learning Community (DMLC) group 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465llibrary(caret)library(xgboost)library(pROC)set.seed(9999)df &lt;- as.data.frame(Titanic)df &lt;- df[rep.int(seq_len(nrow(df)), df$Freq), ]df &lt;- subset(df, select = -c(Freq))# turn survival into 0 and 1Survived_Ind &lt;- rep(0, nrow(df))Survived_Ind[df$Survived == \"Yes\"] &lt;- 1df$Survived_Ind &lt;- Survived_Ind# create a 75/25 train/test splitpartition &lt;- createDataPartition(df$Survived_Ind, list=FALSE, p=0.75)train &lt;- df[partition, ]test &lt;- df[-partition, ]test_2 &lt;- testtrain &lt;- subset(train, select = -c(Survived))test &lt;- subset(test, select = -c(Survived))# create model frame for xgboost inputtrain.mf &lt;- model.frame(as.formula(\"Survived_Ind ~.\"), data = train)test.mf &lt;- model.frame(as.formula(\"Survived_Ind ~.\"), data = test)# create a model matrix only contains numerical values.train.mm &lt;- model.matrix(attr(train.mf, \"terms\"), data = train)test.mm &lt;- model.matrix(attr(test.mf, \"terms\"), data = test)# [optional] create A XGB dense matrix contains an R matrix and metadatatrain.dm &lt;- xgb.DMatrix(train.mm, label = train$Survived, missing = -1)test.dm &lt;- xgb.DMatrix(test.mm, label = test$Survived, missing = -1)# create xgboost parameter listparams &lt;- list(\"booster\" = \"gbtree\", # \"gblinear\" for glm \"objective\" = \"binary:logistic\", # the output here is a probability \"eval_metric\" = \"auc\", \"eta\" = 0.1, # lambda \"subsample\" = 0.6, # proportion of observations \"colsample_bytree\" = 0.6, # proportion of features \"max_depth\" = 5) # depth of the decision tree# train xgboost modelmodel.cv &lt;- xgb.cv(params = params, data = train.dm, nrounds = 1000, # the number of trees / iterations prediction = FALSE, # storage of prediction under each tree print_every_n = 25, early_stopping_rounds = 50, maximize = TRUE, # AUC metric -&gt; maximize nfold = 6) # cv# fit final modelmodel &lt;- xgb.train(params = params, data = train.dm, nrounds = model.cv$best_iteration, prediction = FALSE)# format predictionxgb.prob &lt;- predict(model, test.dm)xgb.pred &lt;- rep(\"No\", sum(lengths(xgb.prob)))xgb.pred[xgb.prob &gt; 0.5] &lt;- \"Yes\" Feature importance:1234&gt; xgb.importance(feature_names = dimnames(train.dm)[[2]], model = model) Feature Gain Cover Frequency1: Class3rd 0.8347889 0.5957944 0.52: Class2nd 0.1652111 0.4042056 0.5 AUC result:12&gt; auc(test$Survived_Ind, xgb.prob)Area under the curve: 0.6033 Confusion matrix:123456789&gt; confusionMatrix(as.factor(xgb.pred), as.factor(test_2$Survived))Confusion Matrix and Statistics ReferencePrediction No Yes No 370 180 Yes 0 0 Accuracy : 0.6727 Unfortunately xgboost predict everything to be “No” Comparing the test error rate with naiveBayes, KNN and logistic regression.123456naiveBayes (cv10): 0.2095KNN (cv10, K=1): 0.1942classification tree: 0.1985classification tree (prune): 0.2040random forest: 0.2040xgboost: 0.3273 Ensemble Model InterpretationFeature Importance ranks the contribution of each feature.Partial Dependence Plots visualizes the model’s average dependence on a specific feature (or a pair of features). Unsupervised Learning &#8634;In supervised learning, we are provided a set of n observations X, each containing p features, and a response variable Y. We are interested at predicting Y using the observations and features. In unsupervised learning, we are interested at exploring hidden relationships within the data themself without involving any response variables. It is “unsupervised” in the sense that the learning outcome is subjective, unlike supervised learning in which specific metrics such as error rates are used to evaluate learning outcomes. PCASee another blog post on PCA. K-Mean ClusteringClustering seek to partition data into homogeneous subgroups. The K-Mean clustering partitions data into K distinct and non-overlapping clusters C, by minimizing the objective function of total in-cluster variation W(C), which is the sum of all pair-wise squared Euclidean distances between the observations in the cluster, divided by the number of observations in the cluster. \\text{minimize } \\{\\ \\sum_{k=1}^K W(C_k)\\ \\}AlgorithmThe algorithm divides data into K initial cluster, and reassign observations to the cluster with the closest cluster centroid (mean of all previous observations in the cluster). The K-Mean clustering algorithm finds a local optimum, and therefore depend on the initial cluster. So it is important to repeat the process with different initial points, and then select the best result based on minimum total in-cluster variation. The nstart parameter in the kmean function in R specifies the number of random starting centers to try and the one ended with the optimal objective function value will be selected. It is also important to check for outliers, as the algorithm would let the outlier become its own cluster and stops improving. StandardizationIt is a must to standardize the variables before performing k-mean cluster analysis, as the objective function (Euclidean distance, etc.) is calculated from the actual value of the variable. Curse of DimensionalityThe curse of dimensionality describe the problems when performing clustering on three or more dimensional space, where: visualization becomes harder as the number of dimensions increases, the Euclidean distance between data points are the same on average. The solution is to reduce the dimensionality before using clustering technique. The Elbow MethodEach cluster replaces its data with its center. In other words, with a clustering model we try to predict which cluster a data point belongs to. A good model would explain more variance in the data with its cluster assignments. The elbow method looks at the F statistics defined as: F = \\dfrac{\\text{between-group variance}}{\\text{total variance}}As soon as the additional F statistics drops/stops increasing when adding a new cluster, we use that number of clusters. Hierarchical ClusteringThe hierarchical clustering provide flexibilities in terms of the number of clusters K. It results in a tree-based representation of the data called dendrogram, which is built either bottom-up/agglomerative or top-down/divisive. Hierarchical clustering assumes that there exists a hierarchical structure. In most feature generation cases, we prefer k-means clustering instead. AgglomerativeAn agglomerative hierarchical cluster starts off by assigning each data point in its own cluster. Each step in the clustering process two similar clusters with minimum distance among all are merged, where the distance is calculated between the elements within the cluster that are closest (single-linkage) or furthest (complete-linkage) Reference: An Introduction to Statistical Learning with Applications in R, James, Witten, Hastie and Tibshirani","tags":"math"},{"title":"Notes on C++","url":"/2019/04/cpp/","text":"C++ is a complied （vs interpreted: python), general-purpose (vs domain-specific: HTML) programming language created by Danish programmer Bjarne Stroustrup as an extension to C. BasicCompilerA compiler translate a high level language into a low level language and create an executable program. Pre-processor: read preprocessing lines #include &quot;foo.hpp&quot; Compiler: turn the above code it into assembly code (ASM). front end create IR (intermediate representation) with SSA (static singale assignment). The runtime is O(n). middle end optimize IR. remove unnecessary operations, O(n^2) or more. back end produce ASM Assembler: turn ASM into binary code Linker: link all relevant headers, libraries together Debugger: type checking Object Copy: generate .exe (for windows), and .bin (for mac) G++Compile with g++ at the command line:123$ g++ toto.cpp$ g++ toto.cpp -E (show c pre-processor)$ g++ toto.cpp --verbose (ask compile to give different steps) Running the complied result:1$ /a.exe HeaderThe C++ standard library is a collection of classes and functions, represented by different headers. For example, include the &lt;iostream&gt; header to handle input and outputs and other non-standard headers using double quoto.12#include &lt;iostream&gt;#include \"foo.h\" Macro12define N 4std::cout &lt;&lt; N + 2; // show 6 GuardsIn C++, function, class and variable can only be declared once. We use guards to make sure we do not duplicate declaration in multiple files.12#ifndef &quot;foo.h&quot;#define &quot;foo.h&quot; NamespaceSome classes and functions are grouped under the same name, which divides the global scope into sub-scopes, each with its own namespaces. Functions and classes in the C++ standard library are defined in the std namespace. For example, the cin (standard input), cout (standard output) and end (end line) objects.1234char c;std::cin &gt;&gt; c;std::cout &lt;&lt; c;std::endl; Alternatively, we can use using namespace std;. Data TypeEvery variable has to have a type in C++, and the type has to be declared and cannot be changed. There are fundamental types and user-defined types (classes) Characters In computer, each bit stores a binary (0/1) value. A byte is 8 bits. The computer stores characters in a byte using the ASCII format. Numbers The computer stores numbers in binary format with bits. The leftmost bit is used to store the sign of a number. (See twos-complement method). Real values are stored using a mantissa and an exponent: Value = Mantissa \\times 2^{Exponent}Note that very few values can be exactly represented, and how close we can get depends on the number of bits available. Type Size (Bytes) Value Range bool 1 true or false char 1 -128 to 127 short 2 -32,768 to 32,767 int 4 -2,147,483,648 to 2,147,483,647 float 4 3.4E +/- 38 double 8 1.7E +/- 308 C++ is a strongly typed language, which means type errors needs to be resolved for all variables at compile time. FunctionEvery console application has to have a main() function, which takes no argument and returns an integer value by default. A function that adds two numbers:12345678910111213#include &lt;iostream&gt;using namespace std;int Add(int a, int b)&#123; return a+b;&#125;int main()&#123; int result = Add(2, 3); cout &lt;&lt; \" Result: \" &lt;&lt; result &lt;&lt; endl;&#125; Overloading allows 2 or more functions to have the same name, but they must have different input argument types. Function ObjectFunction object, or functors, are objects that behave like functions, are functions with state. A regular function looks like this:12345int AddOne(int val)&#123; return val+1;&#125;int result = AddOne(2) A function object implementaion:123456789101112class AddOne&#123;public: int operator()(int&amp; val) &#123; return val+1; &#125;&#125;;AddOne addone;int val = 2;int result = addone(val) LambdaLambdas is a new feature introduced in C++11, which is an inline function that can be used as a parameter or local object.1234[] (string s) // [] is the lambda introducer/capture clause&#123; cout &lt;&lt; s &lt;&lt; endl;&#125; Example 1123vector&lt;int&gt; v&#123;1, 3, 2, 4, 6&#125;;for_each(v.cbegin(), v.cend(), //range [](int elem) &#123;cout &lt;&lt; elem &lt;&lt; endl;&#125;) //lambda Example 2123vector&lt;int&gt; v&#123;1, 3, 2, 4, 6&#125;;transform(v.begin(), v.end(), v.begin(), [] (int elem) &#123;return elem * elem&#125;); Example 31234567vector&lt;Person&gt; ppl;sort(ppl.begin(), ppl.end(), [](const Person&amp; p1, const Person&amp;p2) &#123; if (p1.GetAge() &lt; p2.GetAge()) return true; else return false; &#125;); ExternThe keyword extern means the function is declared in another file.12extern int foo(int a);int main() &#123; return foo(100); &#125; Inline FunctionC++ provides inline funcitons such that the overhead of a small function can be reduced. When inline function is called the entire code of the function is inserted at the point of the inline function call. TypedefUse typedef keyword to define a type alias.1234typedef double OptionPrice;typedef double StockPrice;typedef double Strike;OptionPrice BSPrice(StockPrice S, Strike K) OperatorsStandard operations:123456789Arithmetic: +, -, *, /Comparison: &lt;, &gt;, &lt;=, &gt;=Negate: !Equality, non Equality: ==, !=Logical and, or, &amp;&amp;, ||Assignment: =Modulo: %Increment, Decrement: i++, i--Multiple Operations: i += 1, i -= 1, i *= 1, i /= 1 Note the difference between i++ and ++i12i++; // return (old) i and increment i++i; // increment i and return new i ConstUse the const keyword to define a constant value. The compiler will stop any attempt to alter the constant values. Since C++ is a strongly typed language, it is preferred to use const int N = 4, instead of #define N 4, as the former defines a type. ReferenceExample 1 A reference is an alias for a variable and cannot rebind to a different variable. We can change val by changing ref:123int val = 10;int&amp; ref = val;ref = 20; // this will change val to 20 Example 2 We can also bind a const reference to a const object. An error will be raised if attempt to change the value or the reference.1234const int val = 10;const int&amp; ref = val;val = 20; // errorref = 20; // error Example 3 We can also bind a const reference to a non-const object, thereafter we can NOT change the object using the reference.1234int val = 10;const int&amp; ref = val;val = 20; // okref = 20; // error Pass By Value In a function, we can pass an argument by either value or reference. When passing by value, the variable x will NOT be changed. In this case, we waste time to both create a copy inside the function and memory to store the copy1234567891011void DoubleValue(int number)&#123; number = number * 2;&#125;int main()&#123; int x = 5; DoubleValue(x); cout&lt;&lt;\"x = \"&lt;&lt;x&lt;&lt;endl;&#125; 1x = 5 Pass By Reference When passing by reference (by adding &amp; in the function argument parameter), the variable x WILL be changed.1234567891011void DoubleValue(int&amp; number)&#123; number = number * 2;&#125;int main()&#123; int x = 5; DoubleValue(x); cout&lt;&lt;\"x = \"&lt;&lt;x&lt;&lt;endl;&#125; 1x = 10 Pass By Const Reference We add const when we do not want the specific function argument to be tempered when passed by reference. In this example, there will be a compiler error as we are trying to change the const reference number in the function.1234567891011void DoubleValue(const int&amp; number)&#123; number = number * 2; // error, cannot change const ref \"number\"&#125;int main()&#123; int x = 5; DoubleValue(x); cout&lt;&lt;\"x = \"&lt;&lt;x&lt;&lt;endl;&#125; PointerIn computer memory, each stored values has an address associated with it. We use a pointer object to store address of another object and access it indirectly. There are two pointer operator: &amp;: address of operator, used to get the address of an object *: de-reference operator, used to access the object Example 1123int* ptr = nullptr; // initiate an empty pointerint* ptr = &amp;val; // initiate ptr with the address of val*ptr = 20; // change val using the ptr pointer Example 2 If the object is const, a pointer cannot be used to change it.123const int val = 10;const int* ptr = &amp;val;*ptr = 20; // error Example 3 You can have a pointer that itself is const123456int val = 10;int* const ptr = &amp;val;*ptr = 20; // okint val2 = 20;ptr = &amp;val2 // error, as the pointer is const CastingC++ allows implicit and explicit conversions of types.1234short a = 1;int b;b = a; // implicit conversionb = (int) a; // explicit conversion However, the traditional explicit type-casting allows conversions between any types, and leads to run-time error. To control these conversions, we introduce four specific casting operators: dynamic_cast&lt;new_type&gt;( ): used only with pointers (and/or references to objects); can cast a derived class to its base class; base-to-derived conversions are allowed only with polymorphic base class 1234567891011121314151617181920class Base &#123;virtual void foo() &#123;&#125; &#125;;class Derived : public Base &#123; &#125;;int main() &#123; Derived* derived_ptr; Base* base_ptr = dynamic_cast&lt;Base*&gt; (derived_ptr); Base* base_ptr_2 = new Derived; Derived* derived_ptr_2 = dynamic_cast&lt;Derived*&gt; (base_ptr_2); // ok, base class polymorphic Base* base_ptr_3 = new Base; Derived* derived_ptr_3 = dynamic_cast&lt;Derived*&gt; (base_ptr_3); // will not work, derived_ptr_3 will be assigned a nullptr std::cout &lt;&lt; \"derived_ptr_2: \" &lt;&lt; derived_ptr_2 &lt;&lt; std::endl; std::cout &lt;&lt; \"derived_ptr_3: \" &lt;&lt; derived_ptr_3 &lt;&lt; std::endl; return 0;&#125; 12derived_ptr_2: 0x7fa5cec00630derived_ptr_3: 0x0 static_cast &lt; new_type&gt;( ): used only with pointers (and/or references to objects); can cast base-to-derived or derived-to-base, but no safety check at run-time; 123Base* base_ptr_3 = new Base;Derived* derived_ptr_3 = static_cast&lt;Derived*&gt; (base_ptr_3);// not nullptr this time, but lead to error when de-referencing derived_ptr_3 1derived_ptr_3: 0x7fc3d7400690 reinterpret_cast &lt;new_type&gt;( ): convert pointer to another unrelated class; often lead to unsafe de-referencing 12345class A &#123;&#125;;class B &#123;&#125;;A* a = new A;B* b = reinterpret_cast&lt;B*&gt; (a); const_cast &lt;new_type&gt;( ): remove/set the constant-ness of an object Array (C-Style)An array is a fixed collection of similar kinds of items that are stored in a contiguous block in memory. We define the size of the array at creation, and the array index starts a 0 in C++.12int a[10];int a[] &#123;1, 2, 3&#125; // uniform initializer syntax The address of the array is the same as the address of the first element of the array. Therefore, we can access an array using pointer increment - very efficient.1234int a[10];int* ptr = &amp;a[0]; // the same as int* ptr = aint a0 = a[0]; // the same as int a0 = *ptrint a3 = a[3]; // the same as int a3 = *(ptr+3) or *(a+3) Dynamic AllocationDynamic memory allocation is necessary when you do NOT know the size of the array at compile time. We use a new keyword paired with a delete keyword.123int* a = new int[10];delete[] = a; // correct. this tells the CPU that it needs to clean up multiple variables instead of a single variabledelete a; // incorrect. using this version will lead to a memory leak. Dynamic allocate a 4\\times4 matrix with cast.1234567891011121314151617181920212223#include &lt;iostream&gt;void func(double** a) &#123; * a = new double[16];&#125;int main() &#123; int (* a)[4]; func( (double**)&amp;a ); for (int i=0; i&lt;4; i++) &#123; for (int j=0; j&lt;4; j++) &#123; a[i][j] = 1; &#125; &#125; for (int i=0; i&lt;4; i++) &#123; for (int j=0; j&lt;4; j++) &#123; std::cout &lt;&lt; a[i][j] &lt;&lt; \" \" ; &#125; std::cout &lt;&lt; std::endl; &#125;&#125; 123451 1 1 11 1 1 11 1 1 11 1 1 1` LibraryA C++ library is a package of reusable code typically with these two components: header file precompiled binary containing the machine code for functionality implemntation There are two types of c++ libraries: static and dynamic libraries. a static library has a .a (.lib on Windows) extension and the library codes are complied as part of the executable - so that user only need to distribute the executable for other users to run the file with a static library. a dynamic library has a .so (.dll on Windows) extension and is loaded at run times. It saves space as many program can share a copy of dynamic library code, and it can be upgraded to new versions without replacing all the executables using it. ConditionIf/Else123456789101112if (condition_1)&#123; statement1;&#125;else if (condition_2)&#123; statement2;&#125;else&#123; statement2;&#125; SwitchA switch statement tests an integral or enum value against a set of constants. we can NOT use a string in the switch statement.12345678910111213141516int main()&#123; int value = 0; cin &gt;&gt; value; switch(value) &#123; case 0: cout &lt;&lt; \"value is zero\"; break; // if remove this break, it will also show case 1 even if value is 0 case 1: cout &lt;&lt; \"value is one\"; break; default: cout &lt;&lt; \"value is not 0 or 1\"; &#125;&#125; While / Do While / For LoopWhile loop:123456int n = 0;while (n &lt; 10)&#123; cout &lt;&lt; \" n: \" &lt;&lt; n &lt;&lt; endl; n = n + 1;&#125; Do while loop:123456do &#123; cout &lt;&lt; \"Enter number (0 to end): \"; cin &gt;&gt; n; cout &lt;&lt; \"You entered: \" &lt;&lt; n &lt;&lt; \"\\n\"; &#125; while (n != 0); For loop:1234for (unsigned int n = 0; n &lt; 10; ++n)&#123; cout &lt;&lt; \"n: \" &lt;&lt; n &lt;&lt; endl;&#125; For loop with two variables:1234for (unsigned int i = 0, j = 0; i &lt; 10 &amp;&amp; j &lt; 10; ++i, j+=2)&#123; cout &lt;&lt; \"i:\" &lt;&lt; i &lt;&lt; \", j:\" &lt;&lt; j &lt;&lt; endl;&#125; EnumThe enum (enumerated) type is used to define collections of named integar constants.1234567enum CurrencyType &#123;USD, EUR, GBP&#125;;cout &lt;&lt; USD &lt;&lt; \" \" &lt;&lt; EUR &lt;&lt; \" \" &lt;&lt; GBP;0 1 2enum CurrencyType &#123;USD, EUR=10, GBP&#125;;cout &lt;&lt; USD &lt;&lt; \" \" &lt;&lt; EUR &lt;&lt; \" \" &lt;&lt; GBP;0 10 11 ClassA class achieve data abstraction and encapsulation. abstraction refers to the separation of interface and implementation encapsulation refers to combining data and functions so that data is only accessible through functions. Member Variable &amp; FunctionDefine a customer class with member variable and function.123456789101112131415class Customer&#123;public: Customer(); // default constructor Customer(string name, string address); ~Customer(); // destructor, to free up resources string GetName(); string GetAddress(); void SetAddress(string address);private: string name_; string address_;&#125;; Instantiate Customer class instances to represent different customer.1234567Customer c1(\"Joe\", \"Hyde Park\");Customer c2(\"Jim\", \"Chicago\");Customer c3(\"John\", \"New York\");// Use `.` to access member function.c1.GetName()c2.SetAddress(\"Beijing\") Protection LevelThere are three protection levels to keep class data member internal to the class. public accessible to all. protected accessible in the class that defines them and in classes that inherit from that class. private only accessible within the class defining them. Constructor / DestructorA constructor is a special member functions used to initialize the data members when an object is created. This is an example to use initializer list to create more efficient constructors123456789101112131415Customer::Customer() : name_(\"\"), address_(\"\")&#123; // name_ = \"\"; // address_ = \"\";&#125;Customer::Customer(string name, string address) : name_(name), address_(address)&#123;&#125;Customer::~Customer()&#123;&#125; Free-StoreThere are several ways to create objects on a computer: Automatic/Stack int a; Dynamic Allocated Free Store int* ptr = new a[10]; Heap allocated/freed by malloc/free Summarized in a table from geeksforgeeks Parameter Stack Heap Basic Memory is allocated in a contiguous block Memory is allocated in any random order Allocated and de-allocation Automatic by compiler instructions Manual by programmer Cost Less More Access time Faster Slower Main issue Shortage of memory Memory leak/fragmentation We use -&gt; to access free-store object’s member functions:123Customer* c = new Customer(\"Joe\", \"Chicago\");c-&gt;GetName()c-&gt;SetAddress(\"New York\") Const Member FunctionsA const object can only invoke const member function on the class. A const member function is not allowed to modify any of the data members on the object on which it is invoked. However, if a data member is marked mutable, it then can be modified inside a const member function.12const Customer c1(\"Joe\", \"Hyde Park\");cout &lt;&lt; c1.GetName(); // ok if GetName() is a const member function. Static MemberWe use static keyword to associate a member with the class, as oppose to class instances. A static data member can NOT be accessed directly using a non-static member function. Static member variables can NOT be initialized through the class constructor, rather, they are initialized once outside the class body. However, a const static member variable can be initialized within the class body.123456789101112131415class Counter&#123;public: Counter(); static int GetCount(); static void Increment();private: static int count_; // non-const static need to be initialized outside const static int count_2_ = 0; // const static can be initialized within&#125;;int Counter::count_ = 0;Counter c;c.Increment(); // or Counter::Increment() ThisEvery non-static member function has access to a this pointer, which is initialized with the address of the object when the member function is invoked.123456double Currency::GetExchangeRate()&#123; return exchangeRate_; return this-&gt;exchangeRate_; // equivalent return (*this).exchangeRate_; // equivalent&#125; Copy ConstructorWe use the copy constructor to construct an object from another already constructed object of the same type.1234567891011class Customer&#123; Customer(const Customer&amp; other);&#125;;Customer::Customer(const Customer&amp; other) : name_(other.name_) address_(other.address_)&#123;&#125;Customer c2(c1); Assignment OperatorWe use the assignment operator to assign an object of the same type.123456789101112131415class Customer&#123; Customer&amp; operator=(const Customer&amp; other);&#125;;Customer&amp; Customer::operator=(const Customer&amp; other)&#123; if (this != &amp;other) //checking for self assignment &#123; name_ = other.name_; address_ = other.address_; &#125; //return the object on which the function was invoked return (*this);&#125; Shallow / Deep CopyThe default copy constructor and assignment operator provides shallow copy, which copies each member of the class individually. For pointer member, the shallow copying copies the address of the pointer, resulting in both members pointing to the same object on the free store. A deep copy, however, creates a new object on the free store and copy the contents of the object the original pointer is pointing to. Deep Copy copy constructor123456Customer::Customer(const Customer&amp; other) :name_(other.name_), address_(other.address_), account_(new Account(other.account_-&gt;GetAccountNumber(), other.account_-&gt;GetAccountBalance()))&#123;&#125; Deep Copy assignment operator123456789101112Customer&amp; Customer::operator=(const Customer&amp; other)&#123; if (this != &amp;other) &#123; name_ = other.name_; address_ = other.address_; delete account_; account_= new Account(other.account_-&gt;GetAccountNumber(), other.account_-&gt;GetAccountBalance()); &#125; return (*this);&#125; The Rule of 3There are 3 operations that control the copies of an object: copy constructor, assignment operator, and destructor. If you define one of them, you will most likely need to define the other two as well. Singleten ClassThe Singleton design pattern makes sure only one instance of an object of a given type is instantiated in a program, and provides a global point of access to it change the access level of the constructor to private add new public member function Instance() to create the object use static member variable to hold the object 12345678910class CurrencyFactory&#123;public: static CurrencyFactory* Instance(); Currency CreateCurrency(int currencyType);private: CurrencyFactory(); static CurrencyFactory* instance_;&#125;; 1234567891011121314151617181920212223CurrencyFactory* CurrencyFactory::Instance()&#123; if (!instance_) instance_ = new CurrencyFactory; return instance_; // no more than one CurrencyFactory object.&#125;Currency CurrencyFactory::CreateCurrency(int currencyType)&#123; switch(currencyType) &#123; case EUR: return Currency(\"EUR\", 0.7901); case GBP: return Currency(\"GBP\", 0.6201); case CAD: return Currency(\"CAD\", 1.1150); case AUD: return Currency(\"AUD\", 1.1378); default: return Currency(\"USD\", 1.0); &#125;&#125; 123456789101112131415#include \"CurrencyFactory.h\"int main()&#123; cout &lt;&lt; \"Enter amount in USD:\"; double amount; cin &gt;&gt; amount; cout &lt;&lt; \"Enter currency to convert to (ECU/GBP/CHF/JPY): \"; string symbol; cin &gt;&gt; symbol; double convertedAmount = 0.0; Currency currency = CurrencyFactory::Instance()-&gt;CreateCurrency(symbol); cout &lt;&lt; currency.ConvertFromUSD(amount) &lt;&lt; endl;&#125; InheritanceClasses related by inheritance form a hierachy consisting of base and derived classes. The derived class inherit some members from the base class subject to protection level restrictions, and may extend/override implementation of member functions in the base class.12345678910class Person&#123;protected: string name_; string address_;&#125;;class Student : public Person&#123; string school_;&#125;; VirtualDifferent derived classes may inplement member functions from the base class differently. The base class uses virtual keyword to indicate a member function that may be specialized by derived classes.12345678910111213class Base&#123;public: virtual void Method1(); virtual void Method2(); void Method3();&#125;;class Derived : public Base&#123; void Method1(); // specializes Method1() // uses default implementation of Method2() // can NOT specialize Method3()&#125;; Abstract ClassThe base class has to either provide a default implementation for that function or declare it pure virtual. If a class has one or more pure virtual function, it is called an abstract class or interface. An abstract class cannot be instantiated.123456789class Base&#123;public: virtual void Method1() = 0;&#125;;class Derived : public Base&#123; // this derived is also an abstract&#125;; Virtual DestructorWhen we delete a derived class we should execute both the derived class destructor and the base class destructor. A virtual base class destructor is needed to make sure the destructors are called properly when a derived class object is deleted through a pointer to a base class. If we delete a derived class object through a pointer to a base class when the base class destructor is non-virtual, the result is undefined. PolymorphismThe types related by inheritance are known as polymorphic. types. We can use polymorphic types interchangeably. We can use a pointer or a reference to a base class object to point to an object of a derived class – this is known as the Liskov Substitution Principle (LSP). This allows us to write code without needing to know the dynamic type of an object 12345BankAccount* acc1 = new Savings();acc1-&gt;ApplyInterest(); // ApplyInterest() on the Savings objectBankAccount* acc2 = new Checking();acc2-&gt;ApplyInterest(); // ApplyInterest() on the Checking object We can write one function which applies to all account types.12345void UpdateAccount(BankAccount* acc)&#123; acc-&gt;ApplyBankingFees(); acc-&gt;ApplyInterest();&#125; 12345void UpdateAccount(BankAccount&amp; acc)&#123; acc.ApplyBankingFees(); acc.ApplyInterest();&#125; Standard Template Library (STL)Sequential Containerstd::arrayThe STL array class from offers a more efficient and reliable alternative for C-style arrays, where size is known and we do not have to pass size of array as separate parameter.12345678#include &lt;array&gt;array &lt;int&gt; a1 = &#123;1, 2, 3&#125;;a1.front();a1.back();a1.size();a1.at(1);get&lt;1&gt;(a1); std::vectorVectors are the stored contiguously same as dynamic arrays with the ability to resize itself automatically when an element is inserted or deleted. Vector size is double whenever half is reached.12345678910111213#include &lt;vector&gt;vector&lt;int&gt; v1;v1.begin();v1.end();v1.size();v1.push_back(); // pushes the elements into a vector from the backv1.pop_back(); // removes the elements from a vector from the back.v1.insert(i); // inserts new elements before the element at the specified positionv1.assign(i); // assigns new value to the vector elements by replacing old onesv1.erase(i); // removes elements from a container from the specified position or range std::listDifferent from arrays and vectors, A list is a sequential container that allows non-contiguous memory allocation.123456789101112131415#include &lt;list&gt;list&lt;int&gt; l1;for (int i = 0; i &lt; 10; i++) &#123; l1.front(); // returns the value of the first element l1.back(); // returns the value of the last element l1.push_front(i); // adds a new element ‘i’ at the beginning of the list l1.push_back(i); // adds a new element ‘i’ at the back of the list l1.pop_front(); // removes the first element and reduces list size by 1 l1.pop_back(); // removes the last element and reduces list size by 1 l1.begin(); // returns an iterator pointing to the first element of the list l1.end(); // returns an iterator pointing to the last element of the list &#125; std::stringThe STL string class stores the characters as a sequence of bytes, allowing access to single byte character. Any string is terminated by a \\0, so the string foo actually stores four characters. size()The use sizeof() to return the size of an array in bytes. Use .size() member function to return the number of elements in a STL container.1234567891011121314#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int main() &#123; int a[5] &#123;1, 2, 3, 4, 5&#125;; cout &lt;&lt; \"The size of a: \" &lt;&lt; sizeof(a) &lt;&lt; \" bytes\" &lt;&lt; endl; vector&lt;int&gt; b &#123;1, 2, 3, 4, 5&#125;; cout &lt;&lt; \"The size of b: \" &lt;&lt; sizeof(b) &lt;&lt; \" bytes\" &lt;&lt; endl; cout &lt;&lt; \"The size of b: \" &lt;&lt; b.size() &lt;&lt; \" elements\" &lt;&lt; endl;&#125; 123The size of a: 20 bytesThe size of b: 24 bytesThe size of b: 5 elements Associative Containerstd::setSets are an associative container where each element is unique. The value of the element cannot be modified once it is added to the set.1234567891011#include &lt;set&gt;set&lt;int&gt; s1;for (int i = 0; i &lt; 10; i++) &#123; s1.begin(); s1.end(); s1.size(); s1.insert(i); s1.erase(i); s1.find(i);&#125; std::mapA std::map sorts its elements by the keys. AlgorithmThe STL provides implementations of some widely used algorithms. &lt;algorithms&gt; header: sorting, searching, copying, modifying elements &lt;numeric&gt; header: numeric operation Sort123456int main()&#123; vector&lt;int&gt; values&#123;10, 1, 22, 12, 2, 7&#125;; //sort takes a range sort(values.begin(), values.end());&#125; Binary Search123456int main()&#123; vector&lt;int&gt; values&#123;10, 1, 22, 12, 2, 7&#125;; //binary_search takes a range and a value bool found = binary_search(values.begin(), values.end(), 12);&#125; Copy12345678int main()&#123; vector&lt;int&gt; values1&#123; 10, 1, 22, 12, 2, 7 &#125;; //destination vector &lt;int&gt; values2; copy(values1.begin(), values1.end(), //input range back_inserter(values2)); //output iterator&#125; Replace1234567int main()&#123; vector&lt;int&gt; values&#123; 10, 1, 22, 12, 2, 7 &#125;; replace(values.begin(), values.end(), //range 1, //old value 111); //new value&#125; Numeric123456789int main()&#123; vector&lt;int&gt; v2&#123; 5, 4, 3, 2, 1 &#125;; vector&lt;int&gt; v2&#123; 1, 2, 3, 4, 5 &#125;; int r1 = accumulate(v1.begin(), v1.end(), 0); //range int r2 = inner_product(v1.begin(), v1.end(), v2.begin(), 0);&#125; Complexity Comparison Smart Pointerstd::unique_ptrA unique pointer takes unique ownership in its pointed object. The unique pointer delete the object they managed either when the unique pointer is destroyed or when the object’s value changes. 12345678910111213#include &lt;memory&gt;std::unique_ptr&lt;Option&gt; sp(new Option());// initates a smart pointer (or through reset: sp.resert(Option()).)std::unique_ptr&lt;Option&gt; sp2(sp);// error: does not allow two reference (sp, sp2) to the same object (new Option());std::unique_ptr&lt;Option&gt; sp2(std::move(sp));// now sp is destroyed and sp2 takes ownership of the Option objectsp2-&gt;getPrice();// smart pointer can be used as regular pointer std::shared_ptrThe shared pointer counts the reference to its pointed object and can store and pass a reference beyond the scope of a function. In OOP, the share pointer is used to store a pointer as a member variable and can be used to reference value outside the scope of the class. 1234567std::share_ptr&lt;Option&gt; sp2;&#123; std::share_ptr&lt;Option&gt; sp(new Option()); sp2=sp;&#125;sp2-&gt;getPrice();// the Option object is not deleted after local scope ends Creating a vector of shared_ptr:12345#include &lt;vector&gt;std::vector&lt;std::shared_ptr&lt;Option&gt;&gt; option_list;for (int i=0; i&lt; 10; i++) &#123; option_list.push_back(std::shared_ptr&lt;Option&gt;(new Option(i)));&#125; std::weak_ptrA weak_ptr works the same as shared pointer, but will not increment the reference count.123456std::weak_ptr&lt;Option&gt; sp2;&#123; std::share_ptr&lt;Option&gt; sp(new Option()); sp2=sp;&#125;sp2-&gt;getPrice(); // error! the Option object does not exist beyond scope. Parallel ProcessingThreadingA thread is a small sequence of programmed instruction and is usually a component of a process. Multi-threading can exist within one process, executing concurrently and share resources such as memory, while processes do not share their resources. The std::thread class in c++ supports multi-threading, and can be initiated to represent a single thread. We need to pass a callable object (function pointer, function, or lambda) to the constructor of the std::thread class. We use the std::thread.join() method to wait for the copmletion of a thread. Here we initiate two threads. Both threads share memory and attempt to modify the balance variable at the same time which lead to concurrency issue.123456789101112131415161718192021#include &lt;iostream&gt;#include &lt;thread&gt;using namespace std;int main() &#123; int balance = 0; // t1 starts thread t1([&amp;balance] &#123;for (int i=0; i&lt;1000000; i++) &#123;balance++;&#125;&#125;); // t2 starts thread t2([&amp;balance] &#123;for (int i=0; i&lt;1000000; i++) &#123;balance--;&#125;&#125;); t1.join(); // the main() waits here until t1 completes t2.join(); // the main() waits here until t2 completes cout &lt;&lt; balance &lt;&lt; endl; cout &lt;&lt; \"END OF CODE\" &lt;&lt; endl;&#125; 12153258END OF CODE We introduce the an mutex, or mutual exclusive, object, which contains a unique id for the resources allocated to the program. A thread can lock the resource by a std::mutex.lock() method, which prevent other thread from sharing the resource until the mutex becomes unlocked. 12345678910111213141516171819202122232425262728293031#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;mutex&gt;using namespace std;int main() &#123; int balance = 0; mutex m; // t1 starts thread t1([&amp;balance, &amp;m] &#123;for (int i=0; i&lt;1000000; i++) &#123; m.lock(); balance++; m.unlock(); &#125;&#125;); // t2 starts thread t2([&amp;balance, &amp;m] &#123;for (int i=0; i&lt;1000000; i++) &#123; m.lock(); balance--; m.unlock(); &#125;&#125;); t1.join(); // the main() waits here until t1 completes t2.join(); // the main() waits here until t2 completes cout &lt;&lt; balance &lt;&lt; endl; cout &lt;&lt; \"END OF CODE\" &lt;&lt; endl;&#125; 120END OF CODE Condition VariableA condition variable is an object that can block the calling thread until notified to resume. It uses a unique_lock (over a mutex) to lock the thread when one of its wait functions is called. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#include &lt;iostream&gt;#include &lt;mutex&gt;#include &lt;thread&gt;#include &lt;vector&gt;using namespace std;mutex m;condition_variable cv;vector&lt;int&gt; v;bool ready = false;bool processed = false;void make_vector() &#123; unique_lock&lt;std::mutex&gt; lk(m); // own the mutex cv.wait(lk, []&#123;return ready;&#125;); // wait until main() sends data for (int k = 0; k &lt; 10; ++k) &#123; v.push_back(k); &#125; processed = true; lk.unlock(); // manual unlocking is done before notifying cv.notify_one(); // unblocks one of the threads currently waiting for this condition // if no threads are waiting, the function does nothing // if more than one threads are waiting, it is unspecified which will be selected&#125;int main() &#123; thread t(make_vector); ready = false; processed = false; &#123; cout &lt;&lt; \"main() signals ready for processing\\n\"; ready = true; &#125; cv.notify_one(); &#123; unique_lock&lt;std::mutex&gt; lk(m); // own the mutex cv.wait(lk, []&#123;return processed;&#125;); // wait for cv.notify_one cout &lt;&lt; \"back to main(), vector is processed\\n\"; &#125; for (auto i : v) &#123; cout &lt;&lt; i &lt;&lt; \" \"; &#125; t.join();&#125; 123main() signals ready for processingback to main(), vector is processed0 1 2 3 4 5 6 7 8 9 Reference: FINM 322 Lecture Notes, Chanaka Liyanaarachchi, the University of Chicago","tags":"tech"},{"title":"Notes on Algorithm, MIT Open Course","url":"/2019/04/intro-to-algorithm/","text":"NotationDefine T(n) as the worst case running time for input size n Upper Bound we say T(n) is O(g(n)) if 0\\leq T(n)\\leq c_1g(n), for some c_1. Lower Bound we say T(n) is \\Omega (g(n)) if 0\\leq c_2g(n)\\leq T(n), for some c_2. Order: we say T(n) si \\Theta(g(n)) iff T(n) is O(g(n)) and \\Omega (g(n)). SearchBinary SearchBinary search is a O(logn) algorithm that finds the target value from a sorted array by comparing recursively with the middle elements. Given input size n=1024, the worst-case time of the search is: T(n) =\\log_{2}1024 = \\dfrac{log_e1024}{log_e2} = O(logn)12345678910def binarySearch(arr, start, end, element): mid = (start + end) // 2 if start &gt; end: print(\"Element not found\") elif element &gt; arr[mid]: binarySearch(arr, mid + 1, end, element) elif element &lt; arr[mid]: binarySearch(arr, start, mid - 1, element) else: print(\"Element is found at index\", str(mid)) Or simply use the binary_search function in the C++ STL :123456#include &lt;algorithm&gt;int main() &#123; vector&lt;int&gt; values&#123;10, 1, 22, 12, 2, 7&#125;; bool found = binary_search(values.begin(), values.end(), 12);&#125; Binary Search Tree (BST)BST keeps their keys in sorted order, so that looking up values can use the principle of binary search. When looking for a key in a tree (or a place to insert a new key), the comparison traverse the tree from root to leaf, therefore each comparison allows the operations to skip about half of the tree. BST supports insert, min, delete, and rank operations in O(h) time, where h is the height of the tree taking values between log(n) and n. Faster than the linear time required to find items by key in an unsorted array. Slower than the hash tables. Balanced BST maintains h = log(n). For example, AVL trees are balanced BST which stores and requires heights of left and right children of every node to differ by at most \\pm1. It contains inherently a data structure augmentation procedure. SortInsertion SortInsertion sort is a O(n^2) sorting algorithm that builds the final sorted array in-place one item at a time: iterate up the array remove one element from the input data find the location it belongs within the sorted list insert it there Selection SortSelection sort is a O(n^2) sorting algorithm. divide the input list into two parts: sorted (empty initially) and unsorted (input array). find the smallest element in the unsorted sublist exchange it with the leftmost unsorted element move the sublist boundaries one element to the right. Quick SortQuick sort is a average O(nlogn) sorting algorithm. Pick an element, called a pivot, from the array. Partitioning reorder the array so that all elements with values less than the pivot come before the pivot, while all elements with values greater than the pivot come after it (equal values can go either way). After this partitioning, the pivot is in its final position. Recursively apply the above steps to the sub-array of elements with smaller values and separately to the sub-array of elements with greater values. Heap SortA heap data structure is a specialized tree-based data structure which is essentially an almost complete tree that satisfies the heap property: if P is a parent node of C, then the key (the value) of P is either: (in a max heap) greater than or equal to the key of C (in a min heap) less than or equal to the key of C. Heap sort is an improved selection sort with O(nlogn), using a max heap data structure rather than a linear-time search to find the maximum. It is invented by J. W. J. Williams in 1964. Heap sort is slower in practice than a well-implemented quicks ort, despite having a more favorable worst-case O(nlogn) compared to the O(n^2) of quick sort. Merge SortMerge sort is a O(nlogn) algorithm that uses a divide/conquer/combine paradigm to scale down the complexity and scale up the efficiency of the Insertion Sort routine. It is invented by John von Neumann in 1945. With merge sort the running time scales “nearly linearly” with O(nlogn): \\begin{align} T(n) &= \\underset{divide}{C} + \\underset{recursion}{2T(n/2)} + \\underset{merge}{Cn} \\\\ &= \\Theta(nlogn) \\end{align}12345678910111213141516171819202122232425262728293031def mergeSort(A): \"\"\" Sort list A into order, and return result. \"\"\" n = len(A) if n==1: return A mid = n//2 # floor division L = merge_sort(A[:mid]) R = merge_sort(A[mid:]) return merge(L,R)def merge(L,R): \"\"\" Given two sorted sequences L and R, return their merge. \"\"\" i = 0 j = 0 answer = [] while i&lt;len(L) and j&lt;len(R): if L[i]&lt;R[j]: answer.append(L[i]) i += 1 else: answer.append(R[j]) j += 1 if i&lt;len(L): answer.extend(L[i:]) if j&lt;len(R): answer.extend(R[j:]) return answer Reference: Introduction To Algorithm, MIT Open Course","tags":"tech"},{"title":"Peru & Bolivia","url":"/2019/04/peru-bolivia/","text":"Pictures I took in Peru recently with my dated (but still awesome) Nikon D5100. Fogs quickly filling the entire mountain valley as we arrived at Machu Picchu early morning. This was a nice elevated view of Cusco, the capital of the once powerful Inca Empire. This photogragh was taken from the inside of the Coricancha at Cusco. The Coricancha had been the most important temple in the Inca Empire. After leaving Cusco, we hopped on an overnight bus off to La Paz, taking a stop and spending the night on the beautiful lake of Titicaca. We slept on an island built entirely on \bdry reeds. The submerged part of the reeds is actually edible and tastes very crisp. A wasted train yards in Uyuni, Bolivia. The pinnacle of the trip, the mirror of the sky - a salt lake with a thin layer of water only at rain season that reflects everything from sky to the horizon. Incredible view.","tags":"travel"},{"title":"Notes on Option Theory","url":"/2019/03/option-theory/","text":"This is a study note on the fundamental theory of the pricing of a financial derivative, whose payoff is defined in terms of an underlying asset. We hereby try to compute a consistent price of the derivative in relative terms to the market price of the underlying asset. Navigation01. Option Pricing Theory02. Numerical Methods Option Pricing Theory &#8634;We make our first assumption that the market is frictionless, by which we mean that: no transaction cost (commission, bid-ask spread, taxes) can hold negative asset (shortting) and there is no margin constraint can hold fractional asset no market impact from trading Arbitrage (Static Portfolio)We assume that the market lives in a probability space \\mathbb{P} and it includes N tradable assets with non-random time-0 prices and random time-T prices: \\textbf{X}_t := (X^1_t, \\dots, X^N_t)A static portfolio is a vector of quantities, where each \\theta is non-random and constant in time: \\Theta := (\\theta^1, \\dots, \\theta^N)Thus the time-t value of the static portfolio \\Theta is; V_t := \\Theta \\cdot \\textbf{X}_tA static portfolio \\Theta is an arbitrage if its value V_t satisfies that: V_0 = 0 \\text{, and both } \\mathbb{P}[V_T \\geq 0] = 1 \\text{ and } \\mathbb{P}[V_T > 0] > 0Suppose portfolio \\Theta^a super-replicates portfolio \\Theta^b, which means that \\mathbb{P}[V^a_T > V^b_T] = 1. Then V^a_0 \\geq V^b_0, otherwise arbitrage exists. Same goes if it is a sub-replication. Therefore, if \\Theta^a replicate \\Theta^b, which menas that \\mathbb{P}[V^a_T = V^b_T] = 1, then V^a_0 = V^b_0. This is called the law of one price. AssetsDiscount BondA discount bond Z pays 1 at maturity T. Given non-random interest rate r_t, the no-arbitrage price of the discount bond is: Z_0 = 1/B_T = e^{-\\int_0^Tr_tdt} \\\\ = e^{-rT} \\text{ if r is constant}Forward ContractA forward contract on S_T with non-random delivery price K obligates its holder to pay K and receive S_T at time T. The time-0 value of the forward contract is S_0 - KZ_0. A forward price F_0 is delivery price such that the value of forward contract at time-0 is zero. F_0 = S_0/Z_0\\\\ = S_0e^{-rT} \\text{ if r is constant}European Call OptionAn European call option gives its holder the right at time T to pay K and receive S_T. A call has payoff (S_T-K)^+, and it is in the money if S_t>K at time t\\leq T. The time-0 price C_0 of a call option satisfies: (S_0-KZ_0)^+\\leq C_0 \\leq S_0For strike K_1 0Ito ProcessWe define an Ito process to be a stochastic process X that: X_t = X_0+\\int_0^t\\mu_sds + \\int_0^t\\sigma_sdW_s \\\\ \\text{equivalently, } dX_t = \\mu_tdt + \\sigma_tdW_tThe existence and uniqueness of a solution of X can be guaranteed by Lipschitz-type technical condition on \\mu_t and \\sigma_t Ito’s RuleThe Ito&#39;s rule states that give n an Ito process X_t, and a sufficiently smooth function f(X_t): dX_t = \\dfrac{\\partial f}{\\partial x}dX_t + \\dfrac{1}{2}\\dfrac{\\partial^2f}{\\partial x^2}(dX_t)^2With two processes X_t and Y_t, and f(X_t, Y_t): df(X_t, Y_t) = \\dfrac{\\partial f}{\\partial x}dX_t + \\dfrac{\\partial f}{\\partial y}dY_t + \\dfrac{1}{2}\\dfrac{\\partial^2f}{\\partial x^2}(dX_t)^2 + \\dfrac{1}{2}\\dfrac{\\partial^2f}{\\partial y^2}(dY_t)^2 + \\dfrac{\\partial^2f}{\\partial x\\partial y}(dX_t)(dY_t)In a special case where Y_t = t, the formula becomes: df(X_t, t) = \\dfrac{\\partial f}{\\partial x}dX_t + \\dfrac{\\partial f}{\\partial t}dt + \\dfrac{1}{2}\\dfrac{\\partial^2f}{\\partial x^2}(dX_t)^2Note that the Ito’s Rule applies under any probability measure, it is purely math. Black-Scholes ModelAssumptions Consider two basic assets B_t and S_t in continuous time, where: dB_t = rB_tdt \\text{ , }\\\\ \\text{ where }B_0=1And S_t follows GBM dynamics, dS_t = \\mu S_tdt + \\sigma S_tdW_t \\\\ \\text{ where }S_0>0 \\text{ , }\\sigma>0\\text{ ,and W is BM under physical measure}Conclusion Then by no-arbitrage and Ito&#39;s rule, the time-t price C_t of a call option with payoff (S_T-K)^{+} satisfies the Black-Scholes PDE for (S, t)\\in [0, \\infty]\\times (0, T) \\dfrac{\\partial C}{\\partial t} + rS\\dfrac{\\partial C}{\\partial S} + \\dfrac{1}{2}\\sigma^2S^2\\dfrac{\\partial^2C}{\\partial S^2} = rC \\\\ \\text{ with terminal condition: } C(S, T)=(S-K)^{+}We can solve the call price analytically with the Black-Scholes formula: C^{BS}(S_t, t) := S_tN(d_1) - Ke^{-r(T-t)}N(d_2) \\\\ \\text{where } d_{1,\\ 2} := \\dfrac{log(S_t/K) + (r \\pm \\sigma^2/2)(T-t))}{\\sigma\\sqrt(T-t)}Here we plotted the BS call price C^{BS}, the intrinsic value (S_t - K)^{+} and the lower bound (S_t - Ke^{-r(T-t)})^{+} against the current underlying price S_t, with paramters K=100, T-t=1, \\sigma=0.2 and r=0.05 The GreeksDeltaSuppose an asset has a time t value V_t(S_t, t), then its Delta at time t is \\partial V_t(S_t, t)/\\partial S_t. Delta can be interpreted as: the slope of the asset value V_t, plotted as a function of S_t. how much the asset value movies per unit move in S_t humber of S_t needed to replicate this asset. If the asset is a call option on S_t and we assumes the Black-Scholes assumptions on S_t, then: \\begin{align} \\text{Delta} &:= \\dfrac{\\partial C^{BS}}{\\partial S_t} \\\\ &=N(d_1) + S_tN'(d_1)\\dfrac{\\partial d_1}{\\partial S_t} - Ke^{-(T-t)}N'(d_2)\\dfrac{\\partial d_2}{\\partial S_t} \\\\ &=N(d_1) \\end{align}The Delta of a call option is strictly between 0 and 1. As the time-to-maturity decreases, the Delta increases faster the the option becomes more ITM. Here we plotted the BS Delta for T-t equals 1 and 0.25 against the current underlying price S_t. GammaFor a call option in a B-S model, \\text{Gamma} = \\dfrac{\\partial^2 C^{BS}}{\\partial S_t^2} = N'(d_1)\\dfrac{1}{S_t\\sigma\\sqrt{T-t}}In this case, the Gamma can be interpreted as: the convextity of C^{BS} w.r.t. S_t how much the Delta moves, per unit move in S_t how much rebalancing of the replicating portfolio is needed, per unit move in S_t The Gamma of a call option is strictly positive. As the time-to-maturity decreases, the Gamma increases for ATM options. Here we plotted the BS Delta for T-t equals 1 and 0.25 against the current underlying price S_t. ThetaFor a call in B-S model, \\text{Theta} = \\dfrac{\\partial C^{BS}}{\\partial t}The Theta of a call option is strictly negative. As the time-to-maturity decreases, the Theta decreases for ATM options (faster time-decay). Here we plotted the BS Theta for T-t equals 1 and 0.25 against the current underlying price S_t. Discrete Delta Hedge and Gamma ScalpingA discretely Delta-hedged portfolio could buy C and short \\text{Delta} \\cdot S. In this case it is a Delta neutral and long Gamma/Gamma scalping portfolio: Delta of the portfolio is 0 Gamma of the portfolio is positive achieve net profit only if the realized volatility of S is high enough to overcome time decay, otherwise portfolio loss happens. This is the opposite from a short Gamma position, e.g. sell C and long Delta S We can visualize the P&amp;L of a long Gamma portfolio in the following graph, where the green area indicate profits and the red area indicate losses. The curved line is C_{t+\\Delta t} the straight line is \\text{Delta}_t \\cdot S_{t+\\Delta t}. As \\Delta t increases, C_{t+\\Delta t} shifts downwards due to time-decay. In addition, we can show that the P&amp;L of such portfolio dV = dC - C_S dS does not depend on the drift \\mu of the stock: \\begin{align} dV &= dC - C_S dS \\\\ &= C_tdt + C_SdS^{\\sigma_{implied}} + C_{SS}dS^2 - C_SdS^{\\sigma_{realized}} \\\\ &= (C_t + C_{SS}\\sigma_{implied}^2S^2/2)dt + C_S(\\sigma_{implied} - \\sigma_{realized})SdW \\end{align}Continue on L5 Numerical Methods&#8634;The Taylor series of a real or complex value function f(x) that is differentiable at a is: f(x) = f(a) + \\dfrac{f'(a)}{1!}(x-a) + \\dfrac{f''(a)}{2!}(x-a)^2 ...Implied VolatilityGiven the time-t price of a European call option on a non-dividend stock S, the time-t Black Scholes implied volatility \\sigma(t) is the unique solution to C_t = C^{BS}(\\sigma(t)). Uniqueness is because C^{BS} is strictly increasing in \\sigma and Existence is because C^{BS} covers the full range of arbitrage-free prices of the European option [S_0-Ke^{-rT}, S_0] If S_t follows the SDE dynamic dS_t = rS_tdt + \\sigma(t)S_tdW_t, where \\sigma(t) a non-random function of t, then we can first find the implied volatility \\bar{\\sigma}_T given call prices with different maturity T, and use the equation below to find (not uniquely) the true function \\sigma(t): \\begin{align} logS_T &= logS_0 + (r-\\bar{\\sigma}^2_T/2)T + \\int_0^T \\sigma(t)dW_t \\\\ &\\sim \\mathcal{N}(logS_0 + (r-\\bar{\\sigma}^2_T/2)T, \\;\\bar{\\sigma}^2_TT) \\\\ &\\text{where } \\bar{\\sigma}_T := \\sqrt{\\dfrac{1}{T} \\int_0^T \\sigma^2(t)dt} \\end{align}Volatility Smile, Skew and SurfaceIf S_t truely follows GBM with constant volatility \\sigma, then \\sigma_{imp}(K, T) = \\sigma, \\;\\forall\\;K, T. However, empirically the \\sigma_{imp} is lower when K \\approx S_t (volatility smile), possibly because the market price option using a risk-neutral distribution of log-returns with fatter tails than Normal Note that \\sigma_{imp} is also higher when K < S_t (volatility skew), possibly due to: instantaneous volatility increases as price decreases possibility of severe crash fuels demand for downside protection In addition, the \\sigma_{imp} has a term structure and varies for different T. The function \\sigma_{imp}(K, T) is call the implied volatility surface Tree ModelBinomial TreeEuropean OptionGiven option price at the j-th node C_T^j = f(S_T^j), we can induct backward to find C_t^j: C_t^j = e^{-r\\tau}[p_n^jC_{t+1}^{j+1} + (1-p_n^j)C_{t+1}^{j-1}] \\\\ \\text{where } p_n^j = \\dfrac{S_t^je^{r\\tau} - S_{t+1}^{j-1}\\;}{S_{t+1}^{j+1} - S_{t+1}^{j-1}\\;}American Option - PutGiven option price at the j-th node C_T^j = (K - S_T^j)^+, we can induct backward to find C_t^j: C_t^j = max[(K - S_t^j)^+,\\;e^{-r\\tau}[p_n^jC_{t+1}^{j+1} + (1-p_n^j)C_{t+1}^{j-1}]] \\\\ \\text{where } p_n^j = \\dfrac{S_t^je^{r\\tau} - S_{t+1}^{j-1}\\;}{S_{t+1}^{j+1} - S_{t+1}^{j-1}\\;}American Option - CallGiven option price at the j-th node C_T^j = (S_T^j - K)^+. If r>0 and stock dividend \\delta=0, then it is never optimal to exercise early on an American call option. Therefore C^{American} = C^{European} Argument 1 At all t>0, the American call is worth more than the exercise payoff S_t - K: \\text{American Call} \\geq \\text{European Call} \\geq S_t - KZ_t > S_t - KArgument 2 If C^{American} > C^{European} then construct portfolio V = [-C^{American}, C^{European}]. Then V is an arbitrage as V_0 > 0 and V_T \\geq 0. Trinomial TreeLet \\Delta t:= T/N and choose \\Delta x \\approx \\sigma\\sqrt{3\\Delta t} to improve accruacy. Finite Difference ModelExplicit SchemeInducting backward from t=T to 0: \\begin{align} \\dfrac{\\partial C}{\\partial t} &\\approx \\dfrac{C^j_{t+1} - C^j_t}{\\Delta t} \\\\ \\dfrac{\\partial C}{\\partial x} &\\approx \\dfrac{C^{j+1}_{t+1} - C^{j-1}_{t+1}\\;}{2\\Delta x} \\\\ \\dfrac{\\partial^2 C}{\\partial x^2} &\\approx \\dfrac{1}{\\Delta x} (\\dfrac{C^{j+1}_{t+1} - C^{j}_{t+1}\\;}{\\Delta x} - \\dfrac{C^{j}_{t+1} - C^{j-1}_{t+1}\\;}{\\Delta x}) = \\dfrac{C^{j+1}_{t+1} -2C^{j}_{t+1} + C^{j-1}_{t+1}\\;}{(\\Delta x)^2} \\end{align}Solving for the B-S PDE: rC = C_t + vC_S + 0.5\\sigma^2C_{SS} where v = (r-\\sigma^2/2), we get: C^j_t = \\dfrac{1}{1 + r\\Delta t}(q_uC^{j+1}_{t+1} + q_mC^{j}_{t+1} + q_dC^{j-1}_{t+1})Where: \\begin{align} q_u &= \\dfrac{1}{2}[\\dfrac{\\sigma^2\\Delta t}{(\\Delta x)^2} + \\dfrac{v\\Delta t}{\\Delta x}] &=p_u - \\dfrac{v^2(\\Delta t)^2}{2(\\Delta x)^2}\\\\ q_m &= 1 - \\dfrac{\\sigma^2\\Delta t}{(\\Delta x)^2} &=p_m + \\dfrac{v^2(\\Delta t)^2}{(\\Delta x)^2}\\\\ q_d &= \\dfrac{1}{2}[\\dfrac{\\sigma^2\\Delta t}{(\\Delta x)^2} - \\dfrac{v\\Delta t}{\\Delta x}] &=p_d - \\dfrac{v^2(\\Delta t)^2}{2(\\Delta x)^2}\\\\ \\end{align}Note that p_u, p_m, p_d are trinomial tree probabilities. Implicit SchemeInducting backward from t=T to 0: (-\\alpha C^{j+1}_{t} + (1+2\\alpha)C^{j}_{t} + \\alpha C^{j-1}_{t}) = C^j_{t+1}Solving the LHS requires solutions of a system of 2J-1 equation with 2J-1 unknowns. Crank-Nicolson SchemeInducting backward from t=T to 0: -F^j_tC^{j+1}_t + (1+G^j_t)C^j_t - H^j_tC^{j-1}_t = F^j_{t+1}C^{j+1}_{t+1} + (1-G^j_{t+1})C^j_{t+1} + H^j_{t+1}C^{j-1}_{t+1}If given terminal conditions, then we know C_{t+1}‘s and can solve for C_t. Monte Carlo ModelGiven Y be a discounted payoff and the time-0 price of the payoff C=\\mathbb{E}Y. The Monte Carlo estimator \\hat{C}_M of C: \\hat{C}_M = \\dfrac{1}{M}\\sum Y \\\\ \\text{where } \\mathbb{E}\\hat{C}_M = C \\text{, and } Var(\\hat{C}_M) = Var(Y)/MBy the strong law of large numbers, the sample average \\hat{C}_M converges almost surely to the expected value C as M \\rightarrow \\infty. By the central limit theorem: \\dfrac{\\hat{C}_M - C}{Var(Y)/M} \\rightarrow \\mathcal{N}(0, 1) \\text{, as } M \\rightarrow \\inftyOften times we need to estimate \\sigma with sample estimator for the variance of Y: \\hat\\sigma^2_M := \\dfrac{\\sum (Y - \\hat{C}_M)^2}{M-1} \\\\ \\text{so then } \\dfrac{\\hat{C}_M - C}{\\hat{\\sigma}_M^2/M} \\rightarrow \\mathcal{N}(0, 1) \\text{, as } M \\rightarrow \\inftyThe standard error SE = \\hat{\\sigma}_M/\\sqrt{M}, and a 95\\% confident interval for C is \\hat{C}_M \\pm 1.96SE Variance Reduction TechniquesAntithetic VariateLet \\tilde{Y}:=Y_{Z = -z\\;}. The antithetic variate estimoator \\hat{C}^{av}_M: \\hat{C}^{av}_M = \\dfrac{1}{M}\\sum \\dfrac{Y + \\tilde{Y}\\;}{2} \\\\ \\text{where } Var(\\hat{C}^{av}_M) = \\dfrac{Var(Y) + Cov(Y, \\tilde{Y})}{M}Control VariateA control variate Y^\\ast is a random variable, correlated to Y such that C^\\ast := \\mathbb{E}Y^\\ast has an explicit formula. Example Let Y be the discounted payoff on a call on S_t where dS_t = \\sigma(t)S_tdW_t. We can choose Y^\\ast to be the discounted payoff on a call on S_t^{\\ast} where dS_t^{\\ast} = \\sigma S^{\\ast}_tdW_t, in which case C^{\\ast} can be calculated explicitely through B-S formula given constant \\sigma close to \\sigma(t). The control variate estimator \\hat{C}^{cv, \\beta}_M estimates C by simulating Y - \\beta Y^{\\ast}. Y^{cv, \\beta}_M = \\beta C^{\\ast} + (Y - \\beta dsY^{\\ast}) \\\\ \\hat{C}^{cv, \\beta}_M = \\mathbb{E}Y^{cv, \\beta}_M = \\beta C^{\\ast} + \\dfrac{1}{M}\\sum (Y - \\beta Y^{\\ast}) \\\\ \\text{and }Var(\\hat{C}^{cv}_M) = \\dfrac{1}{M}[Var(Y) - 2\\beta Cov(Y, Y^{\\ast}) + \\beta^2Var(Y^{\\ast})]Choose \\beta to minimize Var(\\hat{C}^{cv}_M), we get: \\beta^{\\ast} = \\dfrac{Cov(Y, Y^{\\ast})}{Var(Y^{\\ast})} \\rightarrow \\hat{\\beta^{\\ast}\\;} = \\dfrac{\\sum(Y - \\bar{Y})(Y^{\\ast} - \\bar{Y}^{\\ast})}{\\sum(Y^{\\ast} - \\bar{Y}^{\\ast})^2} \\\\ \\text{so then } Var(\\hat{C}^{cv, \\beta^{\\ast}\\;}_M) = Var(\\hat{C}_M)[1 - Corr^2(Y, Y^{\\ast})]Note that when using sample estimate \\hat{\\beta^{\\ast}\\;}, the estimated \\hat{C}^{cv, \\hat{\\beta}^{\\ast}\\;}_M is biased, only when M is small. Importance SamplingSuppose X are IID draws from density f, and C := \\mathbb{E}h(X). Ordinary Monte Carlo estimator provides: \\hat{C}_M = \\dfrac{1}{M}\\sum h(X)With importance sampling, find g s.t. g(x) > 0 iff f(x)g(x) \\neq 0. Then re-draw X from density g and the importance sampling estimator \\hat{C}^{is}_M is: \\hat{C}^{is}_M = \\dfrac{1}{M}\\sum h(X)\\dfrac{f(X)}{g(X)} \\\\ \\text{where } Var(\\hat{C}^{is}_M) = \\dfrac{1}{M}Var(h(X)\\dfrac{f(X)}{g(X)})Conditional Monte CarloGiven a random variable X: C = \\mathbb{E}Y = \\mathbb{E}[\\mathbb{E}(Y|X)] = f(X)The condintional Monte Carlo estimator: \\hat{C}^{cmc}_M = \\dfrac{1}{M}\\sum f(X) \\\\ \\text{where } Var(\\hat{C}^{cmc}_M) = \\dfrac{1}{M}Varf(X) < Var(\\hat{C}_M) \\\\ \\text{because } Var(Y) = Var[\\mathbb{E}(Y|X)] + \\mathbb{E}Var(Y|X)Fourier Transform ModelGiven f:\\mathbb{R}\\rightarrow\\mathbb{R} be integrable, meaning \\int|f(x)|dx < \\infty. The Fourier transform of f is the function \\hat{f}: \\mathbb{R}\\rightarrow\\mathbb{C} defined by: \\hat{f}(z) = \\int_{-\\infty}^{\\infty} \\hat{f}(x)e^{izx}dxTheorem If \\hat{f} is also integrable, then the inversion formula holds: f(x) = \\dfrac{1}{2\\pi}\\int_{-\\infty}^{\\infty} \\hat{f}(z)e^{-izx}dzCharacteristic FunctionThe complex conjugate of a complex number z = x + yi is given by \\bar{z} = x - yi. so \\text{Re}(z) = \\text{Re}(\\bar{z}). The characteristic function of any random variable X is the function F_X(z) defined by: F_X(z) := \\mathbb{E}e^{izX}Therefore if X has density f, then F_X(z) = \\hat{f}(z). A characteristic function uniquely identifies a distribution. For example, F_X(z) = e^{-z^2/2}, if X\\sim\\mathcal{N}(0,1) To calculate the moments of X using CF, take the n-derivatives of F_X(z) w.r.t. z: \\mathbb{E}X^n = (-i)^nF_X^{(n)}(0) To calculate the CDF of X using CF: \\mathbb{P}[X < k] = 0.5 - \\dfrac{1}{\\pi}\\int_0^{\\infty} \\text{Re}[\\dfrac{F_X(z)}{iz}e^{-izk}]\\;dz To calculate asset-or-nothing call price using CF, given e^X be the asset share price, define the share measure \\mathbb{P}^{\\ast} with likelihood ratio e^X/\\mathbb{E}e^X. F^{\\ast}_X(z) = \\mathbb{E}^{\\ast}e^{izX} = F_X(z - i)/F_X(-i)Therefore for any k\\in\\mathbb{R}, the asset-or-nothing call price: \\begin{align} e^{-rT}\\mathbb{E}e^X\\textbf{1}_{X>k} &= e^{-rT}\\mathbb{E}e^X\\mathbb{P}^{\\ast}(X>K) \\\\ &= e^{-rT}[\\dfrac{F_X(-i)}{2} + \\dfrac{1}{\\pi}\\int_0^{\\infty} \\text{Re}[\\dfrac{F_X(z - i)}{iz}e^{-izk}]\\;dz] \\end{align} To calculate a vanilla European call price on e^X struck at K with k := log\\;K: C_0 = e^{-rT}[\\mathbb{E}e^X\\textbf{1}_{X>k} - K\\mathbb{P}[X > k]]Heston ModelProvided that: \\begin{align} dS_t &= rS_tdt + \\sqrt{V_t}S_tdW_t^S \\text{ , and let} X = logS_t\\\\ \\text{so that } dX &= (r - 0.5V_t)dt + \\sqrt{V_t}dW_t^S \\\\ dV_t &= \\kappa(\\theta - V_t)dt + \\eta\\sqrt{V_t}dW_t^V \\end{align}Where W^S and W^V are \\mathbb{P} BM with correlation \\rho, \\kappa is the rate of mean-reversion, \\theta is the long-term mean, and \\eta is the volatility of volatility. We want to find the CF of X in order to price options on S_T. The time-t conditional Heston CF provides an answer: F_X(z) = e^{A + izX_t + BV_t} Reference: FINM 32000 &amp; 33000 Lecture Notes, Roger Lee, the University of Chicago","tags":"math"},{"title":"Notes on Foreign Exchange","url":"/2019/03/foreign-exchange-market/","text":"Theoretical PricingFX Spot ContractThe spot price S_t is the observable market price of 1 unit of foeign currency. Let \\mathbb{F} denote foreign currency and \\mathbb{D} denote domestic currency: 1\\mathbb{F} = S_t \\mathbb{D}A FX spot contract is an agreement where the buyer purchase 1 units of foreign currency at a fixed rate R at current time t. Buyer \\; \\dfrac{\\leftarrow 1\\mathbb{F}}{R\\mathbb{D} \\rightarrow} \\; SellerThe contract value to the buyer is: 1\\mathbb{F} - R\\mathbb{D} = (S_t - R)\\mathbb{D}FX Forward ContractDenote domestic interest rate = r^{d}. The price of domestic zero-coupon bond P^d(\\tau) = e^{-r^{d}\\tau} A FX forward contract is an agreement where the buyer agree to purchase 1 units of foreign currency at a fixed rate R at future time T: Buyer \\; \\dfrac{\\leftarrow \\text{1}\\mathbb{F}}{R\\mathbb{D} \\rightarrow} \\; SellerThe time-t value of a forward contract is: \\begin{align} PV_t^{forward} &= PV_t (1\\mathbb{F} - R\\mathbb{D}) \\\\ &= P^{f} \\mathbb{F} - P^{d} R\\mathbb{D} \\\\ &= P^{f} S_t \\mathbb{D} - P^{d} R\\mathbb{D} \\\\ &= [S_t e^{-r^f(T - t)} - R e^{-r^{d}(T - t))}] \\mathbb{D} \\\\ \\end{align}We set PV_t^{forward}=0 to calculate the forward price F_t at time t. The equation is also called the covered interest parity, or CIP: F_t = S_t e^{(r^{d} - r^f)(T - t)}Non-Deliverable forwardNon-deliverable currency has restricted exchange by local regulations. CIP does not hold since covered interest arbitrage is not possible. For example: Asia CNY: China Yuan TWD: New Taiwan Dollar KRW: South Korean Won INR: India Rupee PHP: Philippine Piso IDR: Indonesia Rupiah MYR: Malaysian Ringgit Latin America: COP: Colombian Peso VEB: Venezuelan Bolívar BRL: Brazilian Real PEN: Peru Sol UYU: Uruguayan Peso CLP: Chilean Peso ARS: Argentine Peso Europe, Middle East and Africa: EGP: Egyptian Pound KZT: Kazakhstani Tenge Given CIP, we can calculate the implied yield, which is the foreign interest rate implied by the forward rate, domestic spot rate and domestic interest rate. r^f_{implied} = r^{d} - \\dfrac{\\log{F_t/S_t}}{T - t}We know that the exponential function e^x can be expressed as the sum of the Maclaurin series: e^x = \\sum_{n = 1}^{\\infty} \\dfrac{x^n}{n!} = 1 + x + \\dfrac{x^2}{2!} + \\dfrac{x^3}{3!} ...Applying this to the forward rate: \\begin{align} F(t, T) &= S_t[1 + (r^{d} - r^f)(T - t) + O([(r^{d} - r^f)(T - t)]^2)] \\\\ &\\approx S_t + S_t (r^{d} - r^f)(T - t) \\end{align}FX Swap ContractA FX swap contract contains two FX forward contracts at time T_1, T_2 with opposite directions. For example, a buy/sell swap contract: At\\; t = T_1, Buyer \\; \\dfrac{\\leftarrow 1\\mathbb{F}}{R_1\\mathbb{D} \\rightarrow} \\; Seller \\\\ At\\; t = T_2, Buyer \\; \\dfrac{\\leftarrow R_2\\mathbb{D}}{1\\mathbb{F} \\rightarrow} \\; SellerThe present value of the swap contract is the sum of the present value of the two sub-contracts: \\begin{align} PV_t^{swap} &= PV_t^1 - PV_t^2 \\\\ &= (P^{f1}S_t - P^{d1}R_1)\\mathbb{D} - (P^{f2}S_t - P^{d2}R_1)\\mathbb{D} \\\\ &= [ S_t (e^{-r^{f1}(T_1 - t)} - e^{-r^{f2}(T_2 - t)}) - R_1e^{r^{d1}(T_1 - t)} + R_2e^{r^{d2}(T_2 - t)}]\\mathbb{D} \\\\ \\end{align}Note that the value of a swap contract is fairly insensitive to spot rate changes, comparing to that of a forward contract. \\begin{align} \\dfrac{\\partial PV^{swap}}{\\partial S} &= [(e^{-r^{f1}(T_1 - t)} - e^{-r^{f2}(T_2 - t)})] \\\\ &\\approx r^f (T_2 - T_1) \\;\\;[\\text{assuming } r^{f1} \\approx r^{f2}] \\\\\\\\ \\dfrac{\\partial PV^{forward}}{\\partial S} &\\approx 1 \\\\ \\end{align}FX OptionA FX option conveys the right, but not the obligation, to exchange 1 units of foreign currency for K units of domestic currency, at a future date T. For example, the buyer of a foreign currency call strike at K, have the right at maturity to buy 1 unit of \\mathbb{F} at K even if S_T > K. This is equivalent to the the buyer of K units of domestic currency put strike at 1/K, which grants the buyer the right at maturity to sell K unit of \\mathbb{D} at a rate of 1/K, even if the exchange rate 1/S_T falls below 1/K. In formula: Call^{\\mathbb{F}}(Strike = K\\mathbb{D}) = KPut^{\\mathbb{D}}(Strike = (1/K)\\mathbb{F})Visualizing the transactions on a foreign currency call: \\begin{align} At\\;time\\;t=0 &: Buyer \\; \\xrightarrow{Price(Call^{\\mathbb{F}})} \\; Seller \\\\ At\\;time\\;t=T &: Buyer \\; \\xleftarrow[max(\\;0, (S_T - K)\\mathbb{D}\\;) ]{} \\; Seller \\\\ \\end{align}Visualizing the transactions on a domestic currency put: \\begin{align} At\\;time\\;t=0&: Buyer \\; \\xrightarrow{KPrice(Put^{ \\mathbb{D}})} \\; Seller \\\\ At\\;time\\;t=T&: Buyer \\; \\xleftarrow[K max(\\;0, (1/K - 1/S_T)\\mathbb{F}\\;) ]{} \\; Seller \\\\ \\end{align}FX options also satisfy put-call parity: \\begin{align} Call - Put & = P^{d}[F_t - K] \\\\ &= S_te^{-r^{f}(T-t)} - Ke^{-r^{d}(T-t)} \\\\ \\end{align}Garman-KohlhagenTo evaluate the price of the option: Assumptions on the stochastic nature of St Create a “risk-free” hedge portfolio, in order to find a governing PDE for the option value, which also leads to an equivalent risk-neutral probability measure Solve the PDE directly, with appropriate boundary conditions We know that if a tradable asset S_t follows the geometric Brownian motion: dS_t = rS_tdt + \\sigma S_tdW^{\\mathbb{P}}Applying Ito&#39;s formula any value of a derivative contract V(S_t, t): dV(S_t, t) = \\dfrac{\\partial V}{\\partial t}dt + \\dfrac{\\partial V}{\\partial S_t}dS_t + \\dfrac{1}{2}\\dfrac{\\partial^2 V}{\\partial S_t^2}(dS_t)^2Setting the drift term to be zero as the derivative contract is tradeable, we can derive the Black-Scholes PDE equation characterize V as such: rV = V_t + rS_tV_S + \\dfrac{1}{2}\\sigma^2S_t^2V_{SS}However, since the foreign exchange spot rate S_t is not tradable, we need to tweak the B-S formula. Let B^d and B^f denote a bank account in domestic and foreign currencies, where dB^d = r^dB^d \\;dt and dB^f = r^fB^f \\;dt. Construct replicating portfolio and set the drift term to be 0, the Garman-Kohlhagen PDE equation can be derived: r^dV = V_t + (r^d - r^f) S_tV_S + \\dfrac{1}{2}\\sigma^2S_t^2V_{SS}Solving the PDF: Call^{G-K}_t = P^d [F_t\\Phi(d_1) - K\\Phi(d_2)] \\\\ where \\; d_{1,2} = \\dfrac{log\\dfrac{F_t}{K} \\pm \\dfrac{1}{2}\\sigma^2(T - t)}{\\sigma \\sqrt{T - t}}Using the Freynman-Kac equation with additional derivation, we can conclude that \\exists \\; \\mathbb{Q} s.t. the arbitrage-free price of the contingent claim V is unequivocally determined as the expected value of the discounted final payoff under \\mathbb{Q}, and S_t obeys the stochastic differential equation: dS = (r^d - r^f)Sdt + \\sigma SdW^{\\mathbb{Q}}Practical PricingFX Spot ContractThe trade date is when the terms of the transaction are agreed, and the value date is when transaction occurs, which is trade date+2 for most currency pairs. The spot rate quote EURUSD = 1.2 means: 1\\;EUR = 1.2\\;USD, i.e. higher the EURUSD, stronger the EUR. EUR is the base currency and is set to 1 unit, whereas USD is the numeraire currency which is used as the numeraire. The bid-offer spread EURUSD = 1.199 / 1.201 means: The dealer is willing to buy 1\\;EUR for 1.199\\;USD The dealer is willing to sell 1\\;EUR for 1.201\\;USD Equivalently: The highest price YOU can sell 1\\;EUR is 1.199\\;USD The lowest price YOU can buy 1\\;EUR is 1.201\\;USD FX Forward Contract\\begin{align} \\text{Forward Point} &= Forward \\;\\text{(outright)} - Spot \\\\ &= S_t (e^{(r^d - r^f)T}-1) \\end{align}The forward point is commonly expressed in the unit pip, or point in percentage, that is worth 0.01\\%. Example 1 When selling a forward for foreign currency \\mathbb{F}, the bid side spot rate plus bid side forward points shall be equal to the bid side outright forward rate. A market-maker would construct the short \\mathbb{F} forward as follow. Note that borrowing \\mathbb{F} and lending \\mathbb{D} correspond to selling a forward and therefore the bid-side forward point. Time Transactions t = 0 borrow e^{-r^f_{offer}T}\\mathbb{F} execute a short \\mathbb{F} spot contract lend S_te^{-r^f_{offer}T}\\mathbb{D} t = T receive S_te^{(r^d_{bid}-r^f_{offer})T}\\mathbb{D} execute a long \\mathbb{F} spot contract pay 1\\mathbb{F} This is the same as selling an outright forward contract: Time Transactions t = 0 N/A t = T receive F_t\\mathbb{D} pay 1\\mathbb{F} FX Swap ContractA FX swap contract intends to adjust the timing of cash flows from T_1 to T_2 and alter the value date on an existing trade. The near rate should be consistent with the market forward rate for the near date, and the same goes for the far rate. The swap point is equal to: \\begin{align} \\text{Swap Point} &= \\text{Far Rate} - \\text{Near Rate} \\\\ &= S_te^{(r^d - r^f)(T_2-T_1)} \\end{align}A buy/sell swap on \\mathbb{F} means that it buys a forward on \\mathbb{F} at T_1 and sells a forward on mathbb{F} at T_2. This correspond to borrowing \\mathbb{F} and lending \\mathbb{D}. Example 2 A short outright forward position on \\mathbb{F} can be thought of as a buy/sell swap on \\mathbb{F} with a spot transaction at the near date and T_1=0, similar to Example 1. Here \\tau = T_2 - T_1: Time Transactions t = T_1 borrow e^{-r^f_{offer}\\tau}\\mathbb{F} execute a short \\mathbb{F} forward contract: \\;\\;-\\;\\; pay e^{-r^f_{offer}\\tau}\\mathbb{F} \\;\\;-\\;\\; receive F_{T_1}e^{-r^f_{offer}\\tau}\\mathbb{D} lend F_{T_1}e^{-r^f_{offer}\\tau}\\mathbb{D} t = T_2 receive F_{T_1}e^{(r^d_{bid}-r^f_{offer})\\tau}\\mathbb{D} execute a long \\mathbb{F} forward contract: \\;\\;-\\;\\; pay F_{T_1}e^{(r^d_{bid}-r^f_{offer})\\tau}\\mathbb{D} \\;\\;-\\;\\; receive (1/F_{T_2})F_{T_1}e^{(r^d_{bid}-r^f_{offer})\\tau}\\mathbb{F} pay 1\\mathbb{F} This is the same as a buy/sell swap: Time Transactions t = T_1 recieve e^{-r^f_{offer}\\tau}\\mathbb{F} pay F_{T_1}e^{-r^f_{offer}\\tau}\\mathbb{D} t = T_2 receive F_{T_2}\\mathbb{D} pay 1\\mathbb{F} Example 3 From a market-maker perspective: Contract Swap Point T1 T2 Buy/Sell offer-side swap point pay at bid-side points sell at offer-side points Sell/Buy bid-side swap point sell at bid-side\\ast points pay at bid-side points Note(\\ast): because a swap has less interest rate risk than an outright forward, the market-maker can easily construct a swap with bid-side points for both near and far dates. Example 4 Say the swap point is -0.01, then a party that buy/sell the foreign currency \\mathbb{F} is paying the swap point, because it is selling at a lower Far rate. Conversely, a party that sell/buy \\mathbb{F} is earning the swap point. Risk Characteristics Contract Transactions FX Risk IR Spread Risk Spot 1 Yes No Forward (Outright) 1 Yes Yes Swap 1 No Yes FX OptionThere are four ways to express an option price: Price \\rightarrow in \\mathbb{D} units in \\mathbb{F} units Notional as 1\\mathbb{F} P_{numccy} =\\text{Garman-Kohlhagen} \\rightarrow\\mathbb{D}\\text{ pips} P_{baseccy\\%} =P_{numccy}/S_t \\rightarrow\\mathbb{F}\\text{ %} Notional as 1\\mathbb{D} P_{numccy\\%} =P_{numccy}/K \\rightarrow\\mathbb{D}\\text{ %} P_{baseccy} =P_{numccy\\%}/S_t \\rightarrow\\mathbb{F}\\text{ pips} Straddle\\text{Straddle} = \\text{ATM Call} + \\text{ATM Put}\bThe meaning of ATM can be different: ATMS: at the spot rate ATMF: at the forward rate (preferred by traders) DNS: delta-neutral Risk Reversal\\text{Risk Reversal} = \\text{25-Delta Call} - \\text{25-Delta Put}Where a 25-delta option is an option with a delta of \\pm25\\%. Risk reversal can also denote the difference in implied volatility: \\text{Risk Reversal} = \\sigma_{\\text{25-Delta Call}}- \\sigma_{\\text{25-Delta Put}}Butterfly\\begin{align} \\text{Butterfly} &= \\text{25-Delta Call} + \\text{25-Delta Put} - \\text{Straddle} \\\\ &= \\text{Strangle} - \\text{Straddle} \\end{align}Note that butterfly is vega (\\partial V/\\partial \\sigma) neutral, e.e. the strangle notional is usually larger than the straddle notional to create equal and offestting vega . BF can also denote the difference in implied volatility: \\text{BF} = Avg(\\sigma_{\\text{25-Delta Call}}, \\;\\sigma_{\\text{25-Delta Put}})- \\sigma_{Straddle}Under the Black-Scholes framework, delta-netural strike (K=Se^{\\sigma^2/2}) options have the highest vega \\mathcal{V}: \\begin{align} \\mathcal{V} = \\partial V/\\partial \\sigma &= Se^{-q\\tau}\\phi(d_1)\\sqrt{\\tau} \\\\ &= Ke^{-r\\tau}\\phi(d_2)\\sqrt{\\tau} \\end{align}In addition, option gamma \\Gamma = \\partial^2 V/\\partial S^2 = \\mathcal{V}/(S^2\\sigma T) Reference: FINM 37301 Foreign Exchange: Markets, Pricing and Products, Anthony Capozzoli, University of Chicago","tags":"math"},{"title":"Notes on Stochastic Calculus","url":"/2019/03/stochastic-calculus/","text":"Discrete Time MartingalesConditional expectationDefinition A Borel set is any set in a topological space that can be formed from open sets through the operations of: complement countable union countable intersection Definition Let Y be a random vector and X be a integrable random variable with \\mathbb{E}|X|0. We know that S_{n} is a martingale and S_{T\\wedge n} < max(A, B). Apply Doobs’s Identity and DCT we have: \\mathbb{E}S_{T} = 0We know that S_{n}^2 - n is a martingale. Apply Doobs’s Identity we have \\mathbb{E}S_{T\\wedge n}^2 = \\mathbb{E}(T\\wedge n). Since S_{T\\wedge n}^2 is bounded by max(A^2, B^2) and T\\wedge n is monotone, apply DCT on the RHS and MCT on LHS we get: \\mathbb{E}S^2_{T} = \\mathbb{E}TCombine both results we can get some interesting result for the Gambler’s Ruin problem: \\mathbb{P}[S_{T} = A] = B/(A + B) \\\\ \\mathbb{P}[S_{T} = B] = A/(A + B) \\\\ \\mathbb{E}T = ABExample 2 Let S_{n} be a simple random walk. Let stopping time T := min\\{n: S_{n} = +A\\}, where A>0. Note that now DCT fails as S_{T\\wedge n} is not bounded. Hence \\mathbb{E}S_{T} \\neq 0. In fact, \\mathbb{E}S_{T} = 1 because S_{T} \\equiv 1: \\mathbb{P}[T < \\infty] = \\lim_{B \\rightarrow \\infty} B/(A + B) = 1Doob’s Maximal InequalityDefinition An adapted sequence of random variable X_n is a: sub-martingale if \\mathbb{E}[X_n | \\mathcal{F}_{n-1}] \\geq X_{n-1} super-martingale if \\mathbb{E}[X_n | \\mathcal{F}_{n-1}] \\leq X_{n-1} Proposition If \\varphi :\\mathbb{R} \\rightarrow \\mathbb{R} is a convex function and X_n is a martingale, then: The Jensen’s Inequality holds: \\varphi(\\mathbb{E}X) \\leq \\mathbb{E}\\varphi(X) the sequence \\varphi(X_n) is a sub-martingale. Proposition If X_n is a martingale with X_0 = 0 and Z_n is a predictable sequence of boundedm non-negative random variables, then the martingale transform \\{Z \\cdot X\\}_n is a sub-martingale: \\{Z \\cdot X\\}_n = \\sum_{i=1}^n Z_i(X_i - X_{i-1})Proposition If X_n is a martingale with X_0 = 0 and Z_n is a predictable sequence of random variables such that Z_n \\in [0, 1], then \\mathbb{E}\\{Z \\cdot X\\}_n \\leq \\mathbb{E}X_n Corollary If X_n is a non-negative sub-martingale with initial term X_0 = 0, then Doob’s Maximal Inequality claims that for any \\alpha \\in \\mathbb{R}: \\mathbb{P}[max_{k \\leq n} X_k \\geq \\alpha] \\leq \\mathbb{E}X_n/\\alphaand that: \\mathbb{P}[max_{k \\leq n} |X_k| \\geq \\alpha] \\leq \\mathbb{E}X_n^2/\\alpha^2Note that this is a big improvement on the Chebyshev Inequality, which claims that given L^2-bounded random variable X and for any k\\in\\mathbb{R}^+: \\mathbb{P}[|X - \\mathbb{E}X| \\geq k\\sqrt{VarX}] \\leq 1/k^2Martingale Convergence TheoremDefinition a sequence x_i of real numbers is called a Cauchy sequence if for every positive real number \\epsilon, there is a positive integer N such that for all natural numbers m, n > N such that |x_m - x_n| \\leq \\epsilon Definition L^2 martingales have orthogonal increments. Given X_n a L^2 martingale with increments \\xi_n := X_n - X_{n-1} and X_0 = 0, then: \\mathbb{E}\\xi_n\\xi_{n+m} = 0, \\forall \\;n < m, and \\mathbb{E}X^2_n = \\sum_{i=1}^n\\mathbb{E}\\xi^2_i Theorem Suppose X_n is L^1-bounded martingale, then there exists a L^1-bounded random variable X_{\\infty} such that: \\lim_{n \\rightarrow \\infty} X_n = X_{\\infty} \\;\\text{a.s.}Theorem Suppose X_n is L^2-bounded martingale, then there exists a L^2-bounded random variable X_{\\infty} such that: (1) \\lim_{n \\rightarrow \\infty} X_n = X_{\\infty} \\;\\text{a.s.}(2) \\lim_{n \\rightarrow \\infty} \\mathbb{E}|X_n - X_{\\infty}|^2 = 0, and\\; \\lim_{n \\rightarrow \\infty} \\mathbb{E}X_n^2 = \\mathbb{E}X_{\\infty}^2 Change Of MeasureProposition Given P a probability measure and Z is a non-negative random variable satisfying \\mathbb{E}_{P}Z = 1, then there exist a probability measure Q such that for any bounded or non-negative random variable Y that \\mathbb{E}_QY = \\mathbb{E}_PYZ. Z is called the likelihood ratio of probability measure Q w.r.t. P, written as Z = dQ/dP and that: \\mathbb{E}_QY = \\mathbb{E}_P\\dfrac{dQ}{dP}YProposition If the outcome space \\Omega is finite, then for each outcome \\omega \\in \\Omega, Q(\\omega) = P(\\omega)Z(\\omega) Example 1 In a N-period market with finite set of outcomes and tradable assets. Let P, Q denote the risk-neutural measure for USD and EUR investors. Let S_t^i, \\tilde{S}_t^i denote the USD and EUR price of the risk-less (w.r.t. its own measure) asset B^i at time t. Then dP/dQ = S^1_0/S^1_N Proof. By fundamental theorem, \\tilde{S}_t^i = \\mathbb{E}_Q\\tilde{S}_N^i, and \\tilde{S}_t^i=S_t^i/S_t^1, so: S_t^i = \\mathbb{E}_Q[S_N^i\\times S^1_0/S^1_N] = \\mathbb{E}_PS_N^iTheorem Let P and Q be two probability measure on the same measurable space, and let \\mathcal{F}_n be a filtration such that for all n Q is absolutely continuous w.r.t. P on mathcal{F}_n. Then the sequence of likelihood ratio L_n is a martingale: L_n := \\{\\dfrac{dQ}{dP}\\}_{\\mathcal{F_n}}Brownian MotionStandard Bronwian MotionDefinition A standard Brownian motion (SBM) is a continuous-time random process B_t such that B_0 = 0 and:(a) B_t has stationary increments.(b) B_t has independent increments.(c) The sample path t \\rightarrow B_t are continuous. Note that (a), (b), and (c) imply that for some constant \\sigma^2>0 the distribution of B_{t+s}-B_s is \\mathcal{N}(0, \\sigma^2t) Definition Given a SBM B_t, W_t = \\mu t + \\sigma B_t is a Brownian motion with drift \\mu and variance \\sigma^2. Proposition Given a SBM B_t, its reflection -B_t is also a SBM. Proposition Given a SBM B_t, then for any \\alpha \\in\\mathbb{R}^+, \\tilde{B} := B_{\\alpha t}/\\sqrt{\\alpha} is a SBM Quadratic VariationDefinition The nth level quadratic variation of a function f: [0,t] \\rightarrow \\mathbb{R} is the sum of squares of the increments across intervals of length 2^{-n}: QV(f; n; [0,t]) = \\sum_{k=1}^{2^nt} [f(\\dfrac{k}{2^n})] - f(\\dfrac{k-1}{2^n})]^2Theorem Given a SBM W_t with drift \\mu and variance \\sigma^2 > 0, then for all t>0 with probability 1: \\lim_{n\\rightarrow\\infty} QV(W; n; [0, t]) = \\sigma^2tStrong Markov PropertyDefinition Given a SBM B_t, a stoping time is a non-negative random variable T such that for every fixed t \\geq 0, the event \\{T \\leq t\\} depends only on the path \\{B_s\\}_{s\\leq t} Theorem If W_t is a Brownian motion and T is a stopping time then the strong Markov property holds:(a) the process \\{B_{t+T} - B_T\\}_{t\\geq 0} is a Brownian motion, and(b) the process \\{B_{t+T} - B_T\\}_{t\\geq 0} is independent of the path \\{B_s\\}_{s\\leq T} Theorem Run Brownian motion W_t, at the first time \\tau that W_{\\tau} = a > 0, reflect the path in the line y=a, by the reflection principle the new process W^{\\ast}_t is another Brownian motion: for t \\leq \\tau, W^{\\ast}_t = W_t for t > \\tau, W^{\\ast}_t = 2a - W_t Corollary P[\\tau \\leq s] = 2P[W_s > a] Corollary M_t := max_{s \\leq t} W_s has the same distribution as |W_s| Corollary -M_t^- := -min_{s \\leq t} W_s has the same distribution as M_t. Hence P[M_t>a]=P[-M_t^-a]>0. Consequently, for every t>0 with probability 1 M_t>0 adn M_t^-0, the Brownian path crosses the t-axis infinitely many times by time \\epsilon Martingales In Continuous TimesDefinition A filtration is a nested family of \\sigma-algebra indexed by time t. Definition The natural filtration for a Brownian motion W_t is the filtration with \\mathcal{F}_t-the collection of all events determined by Brownian path up to time t. Definition A continuous-time stohastic process X_t is a martingale relative to a filtration \\mathcal{F_t}_{t\\geq 0} if:(a) each random variable X_t is measurable w.r.t. \\mathcal{F_t} and(b) for any s, t\\geq 0, \\mathbb{E}(X_{t+s}|\\mathcal{F}_t)=X_t Proposition Given a SBM B_t then each of these is a martingale relative to the natural filtration:(a) B_t(b) B_t^2 - t(c) e^{\\theta B_t - \\theta^2t/2} Theorem Define P_{\\theta} to be the probability measure with likehood ratio Z_t^{\\theta} = dP_{\\theta}/dP_0= e^{\\theta B_t - \\theta^2t/2}. The Cameron-Martin theorem states that the SBM B_t under P_0 is a Brownian motion with drift \\theta and variance \\sigma^2=1 under P_{\\theta}. Corollary For any real value \\theta, \\eta and t 0: dU = (U_t + \\dfrac{1}{2}U_{WW})dt + U_WdWProposition Assume f(t) is nonrandom and continuously differentiable. Then: \\int_t^{t+h} f(s) dW_s \\sim \\mathcal{N}(0, \\int_t^{t+h} f(s)^2 ds)Ito ProcessDefinition An Ito process is a stochastic process X_t that satisfies a stochastic differential equation of the form: dX_t = Y_t dW_t + Z_t dtEquivalently, X_t satisfies the stochastic integral equation: X_t = X_0 + \\int_0^t Y_sdW_s + \\int_0^t Z_sdsDefinition For any adapted process U_t define: \\int_0^t U_sdX_s = \\int_0^t U_sY_sdW_s + \\int_0^t U_sZ_sdsTheorem Let X_t be an Ito process, and let U be a twice-continuously differentiable function whose partial derivatives are all bounded. Then: dU = U_tdt + U_XdX_t + \\dfrac{1}{2}U_{XX}d[X_t, X_T]The Ornstein-Uhlenbeck ProcessDefinition The Ornstein-Uhlenbeck SDE: dX_t = −\\alpha X_t dt + dW_t(a) This SDE describes a process Xt that has a proportional tendency to return to an “equilibrium” position 0.(b) In finance, the OU process is often called the Vasicek model.(c) Solving the SDE: Xt =e^{−\\alpha t}X_0 + e^{-\\alpha t} \\int_0^t e^{\\alpha s}dW_s(d) The Ornstein-Uhlenbeck process is Gaussian. The Exponential MartingaleDefinition The Exponential Martingale SDE: dX_t = −\\theta X_t dW_t(a) Solving the SDE: X_t = Ce^{ − \\theta^2t/2 + \\theta W_t} The Diffusion ProcessDefinition The Diffusion SDE: dX_t = \\mu(X_t)dt+ \\sigma (X_t)dW_t Definition The Harmonic Function is a function f(x) that satisfies the ODE: \\mu (x)f'(x) + \\dfrac{1}{2}\\sigma^2(x)f''(x) = 0Example Let X_t be a solution of the diffusion SDE with initial value X_0 = x_0, and for any real numbers A \\leq x_0 \\leq B let \\tau := min\\{t: X_t \\notin (A, B)\\}. Find P(X_{\\tau} = B) We first apply the Ito Formula to df(X_t) and observe that a harmonic function f will force the dt term to vanish. Therefore f(X_t) is a martingale and that \\mathbb{E}f(X_{\\tau}) = f(x_0): f(x_0) = P(X_{\\tau} = B)f(B) + (1- P(X_{\\tau} = B))f(A) \\\\ \\rightarrow P(X_{\\tau} = B) = \\dfrac{f(x_0) - f(A)}{f(B) - f(A)}We can solve for f(x): f(x) = \\int_A^x C' e^{-\\int_A^z \\dfrac{2\\mu(y)}{\\sigma^2(y)}dy}dz + C''The Diffusion Process - Bassel ProcessDefinition The Diffusion SDE: dX_t = a/X_tdt+ dW_t Example Similar problem as above: P(X_{\\tau} = B) = \\dfrac{f(x_0) - f(A)}{f(B) - f(A)} \\;\\;\\text{where}\\\\ f(x) = Cx^{-2a+1} + C'Note that if x_0 > 0 and a \\geq 1/2 then X_t will never reach 0. Ito Formula - Multi-VariableTheorem Let \\textbf{W}_t =(W_t^1,W_t^2,...,W_t^K) be a K−dimensional SBM, and let u: \\mathbb{R}^K \\rightarrow \\mathbb{R} be a C^2 function with bounded first and second partial derivatives. Then the Ito Formula states: du(\\textbf{W}_t) = \\nabla u(\\textbf{W}_t)d\\textbf{W}_t + \\dfrac{1}{2} \\triangle u(\\textbf{W}_t)dtWhere: \\nabla u(\\textbf{W}_t) = \\sum_{i=1}^K \\dfrac{\\partial u}{\\partial x_i}(\\textbf{W}_t) \\\\ \\triangle u(\\textbf{W}_t) = \\sum_{i=1}^K \\dfrac{\\partial^2 u}{\\partial x_i^2}(\\textbf{W}_t)Corollary If \\tau is a stopping time for the SBM \\textbf{W}_t then Dynkin’s Formula shows that for any fixed time t: \\mathbb{E} u(\\textbf{W}_{t\\wedge\\tau}) = u(\\textbf{0}) + \\dfrac{1}{2} \\mathbb{E} \\int_0^{t\\wedge\\tau} \\triangle u(\\textbf{W}_s)dsAnd that u(\\textbf{W_t}) \\dfrac{1}{2} \\int_0^{t} \\triangle u(\\textbf{W}_s)ds is a martingale Definition A C^2 function u: \\mathbb{R}^K \\rightarrow \\mathbb{R} is said to be a Harmonic Function in a region \\mathcal{U} if \\triangle u(x)=0, \\; \\forall x \\in \\mathcal{U} (a) 2D Harmonic Function Exmaple: u(x,y)=log(x^2 +y^2)=2logr(b) 3D Harmonic Function Example: u(x,y,z)=1/\\sqrt{x^2 +y^2 +z^2} =1/r Corollary Let u be harmonic in the an open region \\mathcal{U} with compact support, and assume that u and its partials extend continuously to the boundary \\partial\\mathcal{U}. Define \\tau to be the first exit time of Brownian motion from \\mathcal{U}, then: (a) the process u(W_t\\wedge\\tau) is a martingale, and(b) for every x \\in \\mathcal{U}, \\;\\mathbb{E}^xu(W_{\\tau}) = u(x) Example If a 2D SBM starts at a point on the circle C_1 of radius 1, find out the probability p that it hits concentric circles C_2 before C_{1/2}. Let u(x, y) = log r be harmonic. Then u(W_t\\wedge\\tau) is a martingale and that \\mathbb{E} u(W_t\\wedge\\tau) = u(W_0) = log(1) = 0. \\mathbb{E} u(W_t\\wedge\\tau) = (p)log2 + (1-p)log(1/2) = 0 \\\\ \\rightarrow p = 1/2Example If a 3D SBM starts at a point on the sphere C_1 of radius 1, find out the probability p that it hits concentric sphere C_2 before C_{1/2}. Let u(x, y) = 1/r be harmonic. Then u(W_t\\wedge\\tau) is a martingale and that \\mathbb{E} u(W_t\\wedge\\tau) = u(W_0) = 1/1 = 1. \\mathbb{E} u(W_t\\wedge\\tau) = (p)1/2 + (1-p)1/(1/2) = 1 \\\\ \\rightarrow p = 2/3Ito Process - Multi-VariableDefinition An Ito process is a continuous-time stochastic process X_t of the form: X_t = X_0 + \\int_0^t M_sds + \\int_0^t \\textbf{N}_s d\\textbf{W}_sWhere the quadratic variation d[X_t, X_t] = \\textbf{N}_t \\cdot \\textbf{N}_t dt Let \\textbf{X}_t = (X^1_t,X^2_t,...,X^m_T) be a vector of Ito processes. For any C^2 function u:\\mathbb{R}^m \\rightarrow \\mathbb{R} with bounded first and second partial derivatives, then: du(\\textbf{X}_t) = \\sum_{i=1}^m u_{X_i}(\\textbf{X}_t)dXi + \\dfrac{1}{2} \\sum_{i=1}^m \\sum_{j=1}^m u_{X^iX^j}(\\textbf{X}_t)d[X^i_t, X^j_t]Theorem Let \\textbf{W}_t be a K −dimensional SBM, and let \\textbf{U}_t be an adapted, K−dimensional process satisfying |\\textbf{U}_t|=1, \\;\\;\\forall t \\geq 0. Then the Knight’s Theorem states that the 1-dimensional Ito process X_t is a SBM: X_t := \\int_0^t \\textbf{U}_s d\\textbf{W}_sProposition Let \\textbf{W}_t be a K −dimensional SBM. Define R_t := |\\textbf{W}_t| be the radial part of \\textbf{W}_t. Then R_t is a Bessel process with parameter (K-1): dR_t = (K-1)/2R_t \\; dt + d\\tilde{W}_t \\\\ \\text{where}\\;\\; \\tilde{W}_t := \\int_0^t \\dfrac{\\textbf{W}_s}{|\\textbf{W}_s|}d\\textbf{W}_s \\;\\;\\text{is a 1-D SBM}Barrier OptionPricingDefinition A barrier option at time T pays:(a) \\1ifmax_{0 \\leq t \\leq T}\\;S_t \\geq AS_0$,(b) \\0$ otherwise. Assume that S_t follows GBM: dS_t = rS_tdt + \\sigma S_tdW_t \\\\ \\rightarrow S_t = S_0e^{(r-\\sigma^2/2)t + \\sigma W_t}The no-arbitrage price V_t of the barrier option at t=0 is the expected payoff: \\begin{align} V_0 &= \\mathbb{E}\\textbf{1}_{max_{0 \\leq t \\leq T}\\;S_t \\geq AS_0}\\\\ &= e^{-rT}\\mathbb{P}\\{max_{0 \\leq t \\leq T}\\;S_t \\geq AS_0\\} \\\\ &= e^{-rT}\\mathbb{P}\\{max_{0 \\leq t \\leq T}\\;W_t + (r/\\sigma -\\sigma/2)t \\geq (logA)/\\sigma\\} \\;\\;\\text{[GBM]}\\\\ &= e^{-rT}\\mathbb{P}\\{max_{0 \\leq t \\leq T}\\;W_t + \\mu t \\geq a\\} \\\\ &= e^{-rT}\\mathbb{P}_{\\mu}\\{max_{0 \\leq t \\leq T}\\;W_t \\geq a\\} \\;\\;\\text{[Cameron-Martin Theorem]}\\\\ &= e^{-rT}\\mathbb{E} \\;Z^{\\mu}_T \\;\\textbf{1}_{\\{max_{0 \\leq t \\leq T}\\;W_t \\geq a\\}}\\\\ &= e^{-rT}\\mathbb{E} \\;e^{-\\mu^2T/2 + \\mu W_T} \\;\\textbf{1}_{\\{max_{0 \\leq t \\leq T}\\;W_t \\geq a\\}}\\\\ &= e^{-rT}e^{-\\mu^2T/2} \\mathbb{E} \\;e^{\\mu W_T} \\;\\textbf{1}_{\\{max_{0 \\leq t \\leq T}\\;W_t \\geq a\\}}\\\\ &= e^{-rT}e^{-\\mu^2T/2} \\dfrac{1}{2}[\\Phi(\\mu\\sqrt{T}-a/\\sqrt{T}) + e^{2\\mu a}\\Phi(-\\mu\\sqrt{T}-a/\\sqrt{T})]\\;\\;\\text{[Reflection Principle]}\\\\ \\end{align}At time t, there are two possibilities:(a) if max_{0 \\leq r \\leq t}\\;S_r \\geq AS_0, then V_t = e^{-r(T-t)}(b) if max_{0 \\leq r \\leq t}\\;S_r \\leq AS_0, then V_t is the same as the time-0 value V_0 of a barrier option with time-to-maturity T-t and A'=AS_0/S_t HedgingLet v(t, S_t) be the value of the barrier option at time t. The Fundamental Theorem and Ito Formula show that v(t, S_t satisfy the Black-Scholes PDE: rv = v_t + rSv_S + \\dfrac{1}{2}\\sigma^2S^2v_{SS} \\\\ \\text{for} \\;\\; t \\leq T \\;\\;\\text{and}\\;\\; x\\leq AS_0A replicating portfolio for the barrier option holds(a) v_S share of stock(b) e^{-rt}(v - v_SS) share of cash provided that S_t\\leq AS_0. Once S_t\\geq AS_0 the portfolio convert all holdings to cash and hold till maturity. The Black-ScholesThe Black-Scholes FormulaTheorem Under a risk-neutral P, the Fundamental Theorem asserts that discounted share price S_t/M_t is a martingale, where: dM_t = r_tM_tdt, \\;\\;\\text{and}\\;\\; dS_t = \\mu_t S_tdt + \\sigma S_tdW_tTherefore \\mu_t \\equiv r_t: \\mathbb{E}[\\dfrac{S_t}{M_t}] = \\mathbb{E}[\\dfrac{S_0}{M_0}e^{\\int_0^t \\mu_sds - \\sigma^2t/2 + \\sigma W_t - \\int_0^t r_sds}] \\\\ \\rightarrow \\dfrac{S_t}{M_t} = \\dfrac{S_0}{M_0}e^{- \\sigma^2t/2 + \\sigma W_t}Definition A European contingent claim with expiration date T > 0 and payoff function f: \\mathbb{R}\\rightarrow\\mathbb{R} is a tradeable asset with:(a) share price at time T: f(S_T)(b) discounted share price at time t < T: \\mathbb{E}[f(S_T)/M_T | \\mathcal{F}_t] Proposition Let W_t be a standard Brownian motion and g:\\mathbb{R}\\rightarrow\\mathbb{R} is a function such that \\mathbb{E}|g(W_T)| < \\infty. Then for every 0 \\leq t \\leq T: \\mathbb{E}(g(W_T) | \\mathcal{F}_t)=u(T−t,W_t) \\;\\;\\text{where} \\\\ u(T-t, x)= \\dfrac{1}{\\sqrt{2\\pi}} \\int_{-\\infty}^{\\infty} g(x+\\sqrt{T-t}z)e^{-z^2/2} dzCorollary Given dS_t = r_t S_tdt + \\sigma S_tdW_t, the Black Scholes Formula shows: \\mathbb{E}(f(S_T)/M_T | \\mathcal{F}_t) = v(T−t,S_t)/M_T \\;\\;\\text{where} \\\\ v(T-t, x)= \\dfrac{1}{\\sqrt{2\\pi}} \\int_{-\\infty}^{\\infty} f(xe^{\\sigma\\sqrt{T-t}z - \\sigma^2(T-t)/2 + \\int_0^T r_sds - \\int_0^t r_sds})e^{-z^2/2} dzUnder risk-neutral P, the time t option price u(t,S_t)/M_T is a martingale. With the Ito Formula we can set the drift of du to be zero and therefore derive the Black Scholes PDE: -r_tu + u_t + r_tSu_S + \\dfrac{1}{2}\\sigma^2S^2u_{SS} = 0 \\\\ \\text{with terminal condition} \\;\\; u(T, S_T) = f(S_T)Hedging In Continuous TimesDefinition A portfolio V_t = \\alpha_t M_t + \\beta_t S_t is self-financing if dV_t = \\alpha_t dM_t + \\beta_t dS_t for all t \\leq T Proposition A portfolio V_t is self-financing if and only if its discounted value V_t/M_t is a martingale and satisfies: V_t/M_t = V_0/M_0 + \\int_0^t\\beta_s\\sigma S_s/M_s \\;dW_sDefinition A replicating portfolio V_t for a payoff function f(S_T) is a self-financing portfolio such that V_T = f(S_T) Theorem A replicating portfolio for contingent claims f(S_T) is given by:(a) \\alpha_t = (u - u_SS_t)/M_t cash, and(b) \\beta_t = u_S shares of stock where u is the solution of the Black Scholes PDE satisfying u(T, S_T) = f(S_T) The Girsanov TheoremProposition The exponential process Z_t is a positive martingale. Z_t := e^{\\int_0^t Y_sdW_s - \\dfrac{1}{2}\\int_0^t Y_s^2ds} \\\\ \\text{given}\\;\\; \\mathbb{E}\\int_0^t Z_s^2Y_s^2 ds < \\infty \\;\\;\\forall t < \\inftyApplying Ito Formula Z_t = 1 + \\int_0^t Z_sY_sdW_s and therefore \\mathbb{E}Z_t = 1 Therorem Given W_t a SBM under P-measure and the likelihood ratio Z_t, define the Q-measure where dQ/dP = Z_t. Then the Girsanov’s Theorem states that under the Q-measure:(a) \\tilde{W}_t = W_t - \\int_0^t Y_sds is a SBM(b) W_t is a BM with time-dependent drift \\int_0^t Y_sds Example 1 Given W_t a brownian motion with W_0 \\in (0, A), define measure Q be the conditional probability measure on event \\{W_T = A\\}. Therefore W_t is a BM with drift W_t^{-1}dt. Proof. We know that \\mathbb{P}[W_T = A] = W_0/A, therefore by change of measure: \\begin{align} \\dfrac{dQ}{dP}|\\mathcal{F_T} &= \\dfrac{\\textbf{1}\\{W_T = A\\}}{\\mathbb{P}[W_T = A]} \\\\ \\dfrac{dQ}{dP}|\\mathcal{F_{T\\wedge t}} &= \\mathbb{E}[(\\dfrac{dQ}{dP}|\\mathcal{F_T})| \\mathcal{F_{T\\wedge t}}] \\;\\;\\text{[Since LR is a martingale]}\\\\ &= \\dfrac{\\mathbb{P}[W_T = A | \\mathcal{F}_{T\\wedge t}]}{\\mathbb{P}[W_T = A]} \\\\ &= W_{T\\wedge t}/W_0 \\\\ &= e^{\\int_0^{T\\wedge t} W_s^{-1}ds - \\dfrac{1}{2}\\int_0^{T\\wedge t} W_s^{-2}ds} \\;\\;\\text{[Ito Formula]} \\\\ \\end{align}Therefore Girsanov’s Theorem implies that under Q, \\tilde{W}_t = W_t - \\int_0^{T\\wedge t} W_s^{-1}ds is a SBM. Example 2 Given currency A, B and their respective bank account dA_t = r^A_tA_tdt and dB_t = r^B_tB_tdt. Define exchange rate (# B per A) Y_t that dY_t = \\mu_t Y_tdt + \\sigma Y_tdW_t Theorem If W_t is a SBM under measure Q^B then \\mu_t = r^B_t - r^A_t. Proof. Y_t(A_t/B_t) is a martingale only if \\mu_t = r^B_t - r^A_t Theorem \\dfrac{dQ^A}{dQ^B} | \\mathcal{F}_T = e^{-\\sigma^2T/2 + \\sigma W_T} = Y_T(A_T/B_T)Levy ProcessPoisson ProcessDefinition A Levy process is a continuous-time random process \\{X_t\\}_{t\\geq 0} such that X_0 = 0 and:(a) X_t has stationary increments;(b) X_t has independent increments;(c) the sample paths t \\rightarrowX_t$ are right-continuous. Note that Brownian motion and Poisson process are both Levy processes and the basic building blocks of Levy processes. Brownian motion is the only Levy process with continuous paths. Example Let W_t be a SBM and for a \\geq 0, the random variable \\tau_a is a Levy process. \\tau_a = inf\\{t>0: W_t>a\\}Note that:(a) \\tau_a has stationary, independent increments(b) \\tau_{ab} has the same distribution as b^2\\tau_a Definition A Poisson process with rate \\lambda > 0 is a Levy process N_t such that for all t \\geq 0 the random variable N_t follows Poisson distribution with mean \\lambda t: P[N_t = k] = \\dfrac{(\\lambda t)^k}{k!}e^{-\\lambda t}Proposition If X, Y are independent Poisson distributions with mean \\lambda, \\mu, then X+Y \\sim Poisson(\\lambda + \\mu). Proof. P(X+Y=n) = \\sum_{m=0}^nP(X=m \\;\\;\\text{and}\\;\\; Y=n-m) Corollary IF N_t, M_t are independent Poisson processes with rates \\lambda, \\mu then the superposition N_t + M_t is a Poisson process with rate \\lambda + \\mu Proposition Every discontinuity of a Poisson process is of size 1 Proposition Let N_t be a Poisson process of rate \\lambda > 0, and let \\xi_i be an independent sequence of i.i.d. Bernoulli−p random variables. Then the Thinning Theorem states that N^S_t, N^F_t are independent Poisson processes with rates \\lambda p, \\lambda (1-p): N^S_t = \\sum_{i=1}^{N_t} \\xi_i \\sim Poission(\\lambda p) \\\\ N^F_t = \\sum_{i=1}^{N_t} (1 - \\xi_i) \\sim Poission(\\lambda(1-p))Theorem If n \\rightarrow \\infty and p_n \\rightarrow 0 in such a way that np_n \\rightarrow \\lambda > 0, then the Law of Small Numbers states that the Binomial(n, p_n) distribution converges to the Poisson(\\lambda) distribution. Proposition If N_t is a rate−\\lambda Poisson process, then for any real number \\theta the process Z_t :=e^{\\theta N_t + (\\lambda - \\lambda e^{\\theta})t}􏰍 is a martingale. Theorem Define Q with likelihood ratio Z_t such that dQ/dP | \\mathcal{F}_t = Z_t. Then under Q the process N_t is a rate--\\lambda e^{\\theta} Poisson process. Compound Poisson ProcessDefinition A compound Poisson process X_t is a Levy process of the form: X_t = \\sum_{i=1}^{N_t} Y_iWhere N_t is rate-\\lambda Poisson process and Y_i are i.i.d. random variable independent of N_t. The distribution F_{Y} is the compounding distribution and the measure \\lambda \\times F_{Y} is the Levy measure. At each T_i \\in N_t, a random Y_i is draw from F_{Y}. X_t is the sum of all draws made by time t Proposition If \\psi(\\theta) = \\mathbb{E}e^{\\theta Y_i} < \\infty, then \\mathbb{E} e^{\\theta X_t} = e^{-t\\lambda (1- \\psi(\\theta))}, and \\theta \\in \\mathbb{R}, Z_t^{\\theta} = e^{\\theta X_t - \\lambda t(\\psi(\\theta)-1)} is an exponential martingale. Poisson Point ProcessDefinition Let \\mu be a \\sigma−finite Borel measure on \\mathbb{R}^n. A Poisson point process \\mathcal{P} with intensity measure \\mu is a collection \\{N_B\\}_{B\\in\\mathcal{B}} of extended nonnegative integer-valued random variables such that(A) If \\mu(B) = \\infty then N_B = \\infty a.s.(B) If \\mu(B) < \\infty then N_B \\sim Poisson(\\mu(B))(C) If \\{N_i\\}_{i\\in\\mathbb{N}} are pairwise disjoint, then the r.v.s N_{B_i} are independent, and N_{\\cup_i B_i} = \\sum_{i=1}^{\\infty} N_{B_i} Proposition The point process (T_n, Y_n) associated with a CPP is a Poisson point process with intensity measure Lebesgue \\times v, where v=\\lambda F is the Levy measure for the CPP. Theorem Let X_t be any Levy process, and let J be the random set of points (t,y) \\in [0,\\infty) \\times \\mathbb{R} such that the Levy process X has a jump discontinuity of size y at time t, i.e., X_t − X_{t−} = yThen J is a Poisson point process with intensity measure Lebesgue \\times v where v is a \\sigma−finite measure called the Levy measure of the process. Reference: Stochastic Calculus: An Introduction with Applications, Gregory F. Lawler FINM 34500 Lecture Notes, Steve Lalley, the University of Chicago","tags":"math"},{"title":"Generating Digital Image with OpenCV in Python","url":"/2019/03/generate-color-image/","text":"Today when browsing Zhihu, I came across this interesting package in python where I can generate digital images by creating a matrix of RGB parameters. Here I created a very simple example to generate pure color image. First install package opencv-python:1pip install opencv-python Then import the cv2 module and use the imwrite function to create image with specified color.123456789101112import cv2import numpy as npdef generate_imgage_hex(size, BGR): return np.ones((size[0], size[1], 1)) * \\ [int(BGR[4:6], 16), int(BGR[2:4], 16), int(BGR[0:2], 16)]size = [1080, 1080]color = \"314159\"cv2.imwrite('image.png', generate_imgage_hex(size, color)) We have just created a image with color #594131 in each pixels. The openCV package was first released in 2000, and currently supports algorithms related to computer vision and machine learning. Reference: https://www.zhihu.com/question/29173647/answer/466917103","tags":"tech"},{"title":"No-Limit Hold'em: Starting Hand Analysis (1)","url":"/2019/02/texas-holdem-strategies-t9/","text":"In this post I look at the starting hand of T&spades;9&spades;, analyzing typical post flop strategies with references from a few poker literatures. Pre-FlopHere are the pre-flop equity of T&spades;9&spades; against some of the common open-raise hand types, calculated by Equilab and rounded to the nearest 5%: Random: 54% PokerStrategy Standard Open-Raise: UTG MP CO BU: 33% 39% 42% 45% Connectors One/Two Gappers: 57% Random Pairs: 39% (TT+: 20%) Note that facing pre-flop open-raise from most positions, T&spades;9&spades; has fairly decent equities in the pot to call. It is not ideal to 3-bet with T&spades;9&spades; as it is much more playable after the flop and will almost certainly folds to any 4-bets. Also, when facing 3-bets, the equity drops below 30% and we should fold most of the time. Post-Flop In-PositionMost of the game setting analyzed below is no-limit hold’em, 6 max table and 50 BB+. We hold a starting hand of T&spades;9&spades;. Facing Donk BetSuppose that we open under the gun and SB calls. The flop is rainbow K&clubs;7&spades;6&diamondsuit;. The SB donk bet (betting out-of-position after the flop against pre-flop aggressor) half pots. If we have seen the SB slow-play strong hands and lead with mid-pair before. At this point we should raise, as the SB’s range is fairly wide. If SB calls, we should not raise on the turn unless we hit our outs. If the SB is a TAG player, he is usually protecting his weak hands such as mid-low pairs. TAG will mostly check-call and rarely donk bet with strong hands on the flop, as it looks too suspicious for the other player to commit. FloatingSuppose TAG opens UTG and we called in position. The flop is A&spades;8&hearts;3&hearts;. UTG c-bets full pot and we float call. We now a have back-door straight and flush draw and the flop has two &hearts;. We must correctly fire multiple streets if we decided to float. Turn &amp; River: If the turn is J/7 we can check-call with 8 more outs If the turn is T/9 we can check-call if UTG often raise with wider ranges. If the turn is a heart and and UTG checks, we should bet here and will likely win the pot. If UTG check-calls, we can consider betting again at non-&hearts; river as most Ax/set/single clubs would fold at the river. Now suppose that with the same pre-flop situation as above, the flop is K&spades;5&hearts;3&diamondsuit;. UTG c-bets full pot and we float call. The turn is 8&clubs;, UTG bets full pots again. At this point we should fold. At the turn we have lost most of our outs (Q/J/T/9 of Spades). The flop and turn are too dry for us to have fold equities when bluffing. Bluff Raise In Multi-Way PotSuppose MP raised, CO called and we called from the BTN. The flop is &diamondsuit;J&spades;8&hearts;6. MP c-bets, CO calls. At this point we should raise with back-door flush/straight draws, and often force MP/CO to folds Js. If only MP calls, we should bet only if we pick up flush/striaght draws at the turn. If only CO calls, we should almost never bet unless we hit flush/straight at the river. Our perception that CO’s call range is slightly stronger than MP, because he had called twice (from MP and from us). On a wet board such as flush draws, however, we should not bluff raise it will induce MP/CO to all-in our bluff raise with a wider range. It is not ideal to check-all-in at this point, if CO had 3-bet pre-flop and MP had called his 3-bet. Although we are signaling a strong range of sets/two pairs, our opponent will have a very hard time folding over-pairs. because people are more than willing to pay for their mistakes with overpairs rather than folding it. Raising The TurnSuppose that UTG opens with 3BB and we called from late positions. The flop is rainbow K&diamondsuit;9&hearts;4&clubs;. UTG bets full pot and we call. The turn is 3&clubs;, UTG checks. At this point we should raise, because the UTG’s range has weaken at the turn. A stronger hands with sets or two pairs would have raise at the turn to extract values off any single pairs that I have. Semi-Bluffing The TurnSuppose we open raise 3BB on the BTN, a TAG player on BB 3-bets 10BB and we call. The flop is a rainbow &clubs;K&hearts;8&diamondsuit;7, and TAG bets pot-size 20BB and we called. The turn is a &spades;Q, and TAG bets 2/3 pot 40BB. Now the pot is 100BB. At this point, although we only have 8 outs (J/6) most of the time, we should all-in due to fold equity, give that the TAG has been firing on the first two streets quite frequently. Let us calculate the lowest fold rate x from our opponent for this play to be 0-EV. Suppose our opponent holds top set QQ, where our current equity 16%, and both of us have YBB at inception. 0 = 100 \\times x + (16\\% \\times (30 + Y) + 84\\% \\times (30 - Y)) \\times (1-x)123456789101112131415161718import matplotlib.pyplot as pltdef breakeven_ev_solve(stack, A, B, outs): fold_ev = A + B non_fold_ev = (outs * 0.02 * (A + stack) + (1 - outs * 0.02) * (A - stack)) return round(non_fold_ev / (non_fold_ev - fold_ev), 2)x = []y = []outs = 8for i in range(100, 210, 20): x.append(i) y.append(breakeven_ev_solve(i, 30, 70, outs))plt.plot(x, y)plt.show() Here are conservative estimates of the minimum break-even fold rates required for this all-in to be a positive EV play. Note that from 100 to 200BB, the rate grows almost linearly from 30% to 50%. Now suppose both of us start with 150BB and we estimated the calling and folding range of our opponents be: Calling: AA, KK, QQ, 88, 77, AK, KQ, 87 = 6 + 3 x 4 + 12 + 9 x 2 = 48 Folding: AQ, KJ, T9, 65 = 12 x 2 + 9 + 16 = 49 Therefore our opponent’s fold rate would be 49/(48 + 49) = 50% which means the all-in play has positive EV with starting stack less than 200BB. Post-Flop Out-Of-PositionBack-Door Flush DrawSuppose TAG opens at BTN and we called on BB. The flop is &spades;8&spades;7&hearts;3. We check and TAG c-bets full pot. At this point we should check-raise 100% of the times with our high-card and straight/flush draws. However, if the flop is &spades;K&spades;8&hearts;3, we should check-call more often as our fold equity drops with the presence of a King. Check-Raising The TurnSuppose open and hit a straight at the flop &hearts;8&clubs;7&diamondsuit;6. We c-bet on the flop and the turn is a &spades;Q. At this point we should check-raise instead of raise. Because our opponent is unlikely to float at this flop, he would bet the turn himself if he can call a bet. If checks back at the turn with single pairs, we should always bet the river. Note although this looks awfully like a value bet (check turn bet river), our opponent are very likely to call given he called the flop check-raise. Check-Raising The RiverSuppose we check-call a pot-size bet on the flop &hearts;Q&clubs;9&clubs;3. The turn is &hearts;T and both of we check. The river is a &spades;K. At this point we should check-raise. Becuase our flop check-call &amp; turn check range includes mid-pairs and missed flush/straigh draws, which both induce bluff from our opponents, as well as increase our earnings from our opponent’s K/J pairs. Reference: The Poker Blueprint: Advanced Strategies for Crushing Micro and Small Stakes NL, Davis &amp; Nguyen Easy Game: Making Sense of No Limit Hold’em, Seidman, Colletta &amp; Cesaro","tags":"math"},{"title":"The St. Petersburg Paradox and Utility Function","url":"/2019/02/the-st-petersburg-paradox/","text":"The ParadoxThe St. Petersburg paradox describes a game of chance for a single player in which a fair coin is tossed at each stage. The initial stake starts at 2 dollars and is doubled every time heads appears. The first time tails appears, the game ends and the player wins whatever is in the pot. Let X_n denote the final winning amount after the nth toss. We know that X_0 = 2 and P(X_n = 2X_{n-1})=1/2 and P(X_n = X_{n-1})=1/2. We can see that X_{n} is a sub-martingale as \\mathbb{E}[X_{n}|\\mathcal{F}_{n-1}] \\geq X_{n-1}. Let T denote the minimum number of toss that shows a tail toss T := min\\{t: X_t=X_{t-1}\\}. T is a stopping time. \\mathbb{E}X_{T} = \\dfrac{1}{2} \\times 2 + \\dfrac{1}{4} \\times 4 + \\dfrac{1}{8} \\times 8 + ... \\rightarrow \\inftyThe variance: varX_{T} = \\mathbb{E}X^2 - (\\mathbb{E}X)^2 = \\lim_{n\\rightarrow \\infty} 2^{n+1} - 2 - n^2 \\rightarrow \\inftyConsidering nothing but the expected value of the net change in one’s monetary wealth, one should therefore play the game at any price if offered the opportunity. Yet the paradox exists between what people seem willing to pay to enter the game and the infinite expected value. The MartingaleWith slight modifications from above, the St. Petersburg martingale is the sequence of random variable X_n, where X_0=2 and P(X_n=2X_{n-1}) = 1/2 and P(X_n=0) = 1/2. It is now a martingale because \\mathbb{E}(X_n|\\mathcal{F}_{n-1}) = X_{n-1}. Note that now the expected payoff at inception is equal to initial stake based on Doob’s Idenfity, given stopping time T defined above: \\mathbb{E}X_{T} = X_{0} Expected Utility TheoryThe classic way to resolve the paradox involves the introduction of utility function and the presumption of diminishing marginal utility. Let x denote a person’s total wealth, then the logrithmic utility function states that: U(w) = \\log{w}Where the marginal utility is a decreasing function of x: \\dfrac{dU^{log}(w)}{dw} = \\dfrac{1}{w}Now we calculate the maximum cost c that a person with logrithmic utility function and wealth w would pay to enter the game. The maximum cost will make the expected utility change from playing the game be 0. \\Delta U(w) = 0 = \\sum_{k=1}^{\\infty} \\dfrac{1}{2^k}[\\log(w + 2^k - c) - \\log(w)]SimulationGiven w, c can be calculated numerically. In python, we first check the maximum power of two allowed in our simulation. It turns out to be 63:1234567import sysimport numpy as npx = sys.maxsizeprint('maximum integer: ', x)max_power = np.log(x)/np.log(2)print('maximum power of 2: ', max_power) Returns:12maximum integer: 9223372036854775807maximum power of 2: 63.0 Logrithmic Utility FunctionNow we use fsolve to calculate the maximum c to break even:123456789101112import numpy as npfrom scipy.optimize import fsolvedef func(c): w = 1000 p = 0.5`np.arange(1, 63) u = np.log(w + 2`np.arange(1, 63) - c) - np.log(w) return sum(p*u)maximum_cost = fsolve(func, 0)print(\"maximum cost to enter: \", round(maximum_cost[0], 2)) When w = 1000:1maximum cost to enter: 10.95 When w = 1000000:1maximum cost to enter: 20.87 Square-Root Utility Function123456789101112import numpy as npfrom scipy.optimize import fsolvedef func(c): w = 1000 p = 0.5`np.arange(1, 63) u = np.sqrt(w + 2`np.arange(1, 63) - c) - np.sqrt(w) return sum(p*u)maximum_cost = fsolve(func, 0)print(\"maximum cost to enter: \", round(maximum_cost[0], 2)) When w = 1000:1maximum cost to enter: 12.93 When w = 1000000:1maximum cost to enter: 22.87 Note that under the square-root utility function, the maximum cost to enter is higher, as utility diminished slower. \\dfrac{dU^{sqrt}(w)}{dw} = \\dfrac{1}{2\\sqrt{w}} > \\dfrac{1}{w}, \\;when \\;w\\;is\\;large Reference: Wikipedia: https://en.wikipedia.org/wiki/St._Petersburg_paradox","tags":"math"},{"title":"Notes on Credit Risk","url":"/2019/02/portfolio-credit-risk-modeling/","text":"Standard Simulation Model on Credit PortfolioCredit RiskLenders, such as banks, are subject to many kinds of risks. among which credit risk is the most likely to cause bank failure. Credit risk Market risk Operation risk Reputation risk Each loan is part of a legal agreement that requires the borrower to pay interest and repay principle on schedule, while some borrowers are required to obey specified covenants, such as maintaining earning above a certain threshold. If the borrower fails to follow the agreement, the lender holds the borrower to be in default, which can be money default or covenant default. Purchaser of public bonds only experiences money default. At default, the loan agreement calls for fee to be paid by the borrower, gives the bank power to seize collateral (for secured loans), and has a cross default provision (where all loans are in default once one loan is in default). In the 20th century, most banks did not define default until they discovered a model that could help them manage credit risk. Rating AgenciesThere are 3 major Nationally Recognized Statistical Rating Organizations (NRSRO) to which firms pay to rate their bonds to increase liquidity. Standard &amp; Poor Moody’s Fitch Under S&amp;P ratings, the grades are: Investment grade: AAA, AA, A, BBB Non-investment grade: BB, B, CCC, CC Selectively defaulted: SD Defaulted: D D and PDLet D be the default indicator of a loan, taking only two values: 0 and 1. PD is the probability of default annually. PD = P[D = 1] = \\mathbb{E}DBy mathematical identity: Knowing PD, we can simulate D by a Bernoulli Distribution with parameter as PD. Given data on D, we can calculate the implied PD. In a portfolio of N firms, the portfolio default rate, DR, equals: DR = \\dfrac{\\sum{D}}{N} Exposure, Recovery and LGDExposure is the amount that is owed to the borrowers. Recovery is measured in either of two ways: Market price of the loan at the time of default Discounted future cash flows back to the time of default LGD (Loss Given Defaults) is a random variable with values usually between 0 and 1: LGD = 1 - \\dfrac{Recovery}{Exposure}For a defaulted loan, there are two ways to measure recovery/LGD. For a current loan, there is a distribution for LGD. The expectation is written as: \\mathbb{E}LGDUS investment grade bond LGD is about 0.20%, while non-investment grade is about 3.60%. Bank loans are almost alwasy senior to bonds and have lower LGD. Loss and ELLoss is measured as a fraction of exposure: Loss = D \\times LGDEL is the expected loss. Because D and LGD are indepndent, so: \\mathbb{E}L = \\mathbb{E}[D \\times LGD] = PD \\times \\mathbb{E}LGDLenders often need to estimate and include EL in the spread they charged. Spread = RiskFreeRate + \\mathbb{E}L Change Of VariableNote the LGD is often measured in fractions. To change the measure to dollar amount, we need to use the Chain Rule. Given the pdf of LGD: pdf_{LGD}[x]We define the function g such that: LGD^{dollar} = g(LGD) = LGD \\times ExposureHence the function g-inverse is: LGD = g^{-1}(LGD^{dollar}) = \\dfrac{1}{Exposure} \\times LGD^{dollar}The partial derivative can be expressed as: \\dfrac{\\partial g^{-1}(x)}{\\partial x} = \\dfrac{1}{Exposure} By definition: cdf_{LGD^{dollar}}[x] = P[LGD^{dollar} < x] = P[LGD < g^{-1}(x)] = cdf_{LGD}[g^{-1}(x)]Taking derivative on both sides and with chain rule: pdf_{LGD^{dollar}}[x] = pdf_{LGD}[g^{-1}(x)] \\times |\\dfrac{\\partial g^{-1}(x)}{\\partial x}|Finally: pdf_{LGD^{dollar}}[x] = pdf_{LGD}[\\dfrac{x}{Exposure}] \\times \\dfrac{1}{Exposure} Simulate Portfolio Loss On One Single LoanWe know that: Loss = D \\times LGDTo simulate loss, we first simulate D:123Draw x ~ Uniform[0, 1] If x &lt; PD, then D = 1 Else D = 0 Then simulate LGD based on the pdf of LGD. Multiple each D and LGD to get Loss. Repeat the process to produce a distribution of Loss. Simulate Portfolio Loss On N Independent LoanAssume the default of each of the N loan is independent and have the same probability of default, PD: D_{i} \\sim Bernoulli[PD]Then the total number of defaults follows binomial distribution: \\sum D_{i} \\sim Binomial(PD, N)var\\sum D_{i} = N \\times PD \\times (1-PD)However, based on historically data, the variance is much higher than that of the binomial distribution. Hence default correltion needs to be introduced. Simulate Portfolio Loss On N Correlated LoanAssume that there is a latent unobserved variable zi that is responsible for the default of firm i, i.e. firm i defaults if: z_{i} < \\Phi^{-1}(PD_{i})Assume any two firms i and j are jointly normal. Denote the correlation between zi and zj: \\rho_{i, j}Let ri, j be the correlation between asset return of firm i and j, we know that almost certainly: \\rho_{i, j} < r_{i, j}Denote PDJ as the probability that both firm i and j default: PDJ = P[D_{i} = 1, D_{j} = 1] = \\int_{-\\infty}^{\\Phi^{-1}[PD_{i}]} \\int_{-\\infty}^{\\Phi^{-1}[PD_{j}]} \\phi_{2}(z_{i}, z_{j}, \\rho_{i, j}) \\,dx\\,dyTo calculate PDJ with python:12345678910111213import numpy as npfrom scipy.stats import normfrom scipy.stats import multivariate_normalPD1, PD2 = 0.1, 0.2mean = [0, 0]cov = [[1, .5], [.5, 1]]result = multivariate_normal(mean, cov)PDJ = round(result.cdf(np.array([norm.ppf(PD1), norm.ppf(PD2)])), 4)print(\"Pr[D1=1, D2=1]:\", PDJ) Returns:1Pr[D1=1, D2=1]: 0.0515 Now that we have the Di, we can simulate portfolio loss rate, given the LGD distribution and exposures for each firm. Portfolio Loss Rate = \\dfrac{\\sum D_{i} \\times LGD_{i} \\times Exposure_{i}}{\\sum Exposure}Denote Dcorr to be the correlation between Di and Dj: Dcorr[D_{i}, D_{j}] = \\dfrac{cov[D_{i}, D_{j}]}{\\sqrt{var[D_{i}]var[D_{j}]}} \\\\\\\\ = \\dfrac{PDJ - PD_{i}PD_{j}}{\\sqrt{PD_{i}(1-PD_{i})PD_{j} (1-PD_{j})}} Note that holding PDi, PDj fixed: greater Dcorr =&gt; greater PDJ greater &rho; =&gt; greater PDJ &rho; between -1 and 1 =&gt; PDJ between 0 and min[PDi, PDj] CopulaWhen we model more than three firms, pair-wise correlation is not enough to determine the entire distribution of outcomes. For example, there are N PD’s and N(N-1)/2 pair-wise correlations while we want to calculate 2N outcomes. Hence we introduce the Gauss copula which helps describe the group-wise correlations. Consider a set of multivariate normals: (Z_1, Z_2, ..., Z_N)The quantiles of the set are uniformly distributed by definition: (\\Phi(Z_1), \\Phi(Z_2), ..., \\Phi(Z_N)) \\sim (U_1, U_2,, ..., U_3)The copula of the set (Z1, Z2, …, ZN) is defined as the joint cumulative distribution function of (&#934;(Z1), &#934;(Z2), …, &#934;(ZN)): \\mathbb{C}_{Z_i}(\\vec{x}) = cdf_{\\Phi(\\vec{Z_i})}(\\vec{x}) \\\\\\\\ = P[\\Phi(Z_1) \\leq x_1, \\Phi(Z_2) \\leq x_2, ..., \\Phi(Z_N) \\leq x_N] \\\\\\\\ = P[Z_1 \\leq \\Phi^{-1}(x_1), Z_2 \\leq \\Phi^{-1}(x_2), ..., Z_N \\leq \\Phi^{-1}(x_3)] \\\\\\\\ =cdf_{\\vec{Z_i}}(\\Phi^{-1}(\\vec{x}))The Gauss copula is as follow. Note that among all possible copula, the Central Limit Theorem defines and supports the Gauss copula: \\mathbb{C}^{Gauss}_{Z_i}(\\vec{x}) = cdf^{Gauss}_{\\vec{Z_i}}(\\Phi^{-1}(\\vec{x})) = \\Phi(\\Phi^{-1}(x_1), \\Phi^{-1}(x_2), ... , \\Phi^{-1}(x_N)) In fact, the copula does not contain any information on the marginal distribution. Here we set the marginal distribution FZ to follow standard normal only as an example, but it can be anything continuous such that: F(Z_i) \\sim U_iAnd so: \\mathbb{C}_{Z_i}(\\vec{x}) = cdf_{F(\\vec{Z_i})}(\\vec{x}) \\\\\\\\ = P[F(Z_1) \\leq x_1, F(Z_2) \\leq x_2, ..., F(Z_N) \\leq x_N] \\\\\\\\ = P[Z_1 \\leq F^{-1}(x_1), Z_2 \\leq F^{-1}(x_2), ..., Z_N \\leq F^{-1}(x_N)] \\\\\\\\ =cdf_{\\vec{Z_i}}(F^{-1}(\\vec{x})) In the context of default modeling, we assume that each company’s default follows Bernoulli and simulate with standard normal distribution: P[D_{i}=1] = P[Z_{i} Critical\\;\\; Value_{95th\\;percentile}^{df}For example when df = 1, the critical value = 3.84, we will reject the null with 95% confidence when: D > 3.84OverfitAn overfit model makes worse forecast than a simpler model. We assume the population data (X, Y) follows bivariate normal distribution: X, Y \\sim N^2(0, \\Sigma=\\begin{bmatrix}1 & \\rho \\\\\\\\ \\rho & 1\\end{bmatrix})Given &rho;, the population regression line is: \\hat{Y} = \\rho XThe sample regression line is: \\hat{Y} = bX + aFrom a sample of 30 observations of (X, Y), ordinary least square (OLS) is performed to find the in-sample p-value for the coefficient and R2. MSE is used to evaluate forecast error. When &rho; = 0.8, the sample regression line (yellow) is close to the population regression line (red): When &rho; = 0.2, the sample regression line does NOT match well. This shows that when the population has a week relationship (&rho; = 0.2), estimates of slope are more dispersed. Now we look at the relationship between statistically significance and MSE. The population Mean-Squared Error (MSE) is an out-of-sample measure of forecast errors. The population MSE does NOT depend on any in-sample data: MSE = \\int_{-\\infty}^{+\\infty} \\int_{-\\infty}^{+\\infty} (Y - \\hat{Y})^2 \\;pdf[X, Y]\\;dXdY = 1 + a ^2 + b ^2 - 2b \\rhoWe can see that the population regression (b = &rho;, a = 0) would minimize MSE, by taking partial derivatives. We can also see that higher the &rho;, lower the MSE. \\dfrac{\\partial MSE}{\\partial a} = 0 \\rightarrow a = 0, \\; \\dfrac{\\partial MSE}{\\partial b} = 0 \\rightarrow b = \\rho A regression is significant (at 95% confidence) if the p-value for the coefficient b is less than 0.05. We have observed that when population has a weak relationship (&rho; = 0.2): Forecasts by significant regressions tend to have greater MSE. Forecasts by regressions with higher R-square tend to have greater MSE. This is because the strong relationship suggested by the regression does NOT forecast the week population relationship well. When population has a strong relation (&rho; = 0.8), however, the significant regression/high R-square holds out-of-sample. Conditional LGD RiskcLGDThe history of bond LGD shows that LGD is elevated when default rate is elevated. The elevation is shown to be moderate and similar across different debt types: DR \\uparrow \\;\\;\\rightarrow LGD \\uparrowIt is important to model LGD appropriately in different economic conditions. Like cDR, we define cLGD: Loss = D \\times LGD\\\\\\\\ \\mathbb{E}L = PD \\times \\mathbb{E}LGD\\\\\\\\ cLoss = cDR \\times cLGDNote that: \\mathbb{E}cDR = PD\\\\\\\\ \\mathbb{E}cLoss = \\mathbb{E}L\\\\\\\\ however, \\mathbb{E}cLGD \\neq \\mathbb{E}LGDThere are two ways to calculate ELGD: \\mathbb{E}LGD = \\dfrac{\\mathbb{E}L}{PD} = \\mathbb{E} \\dfrac{cDR \\times cLGD}{PD}Futhermore, \\mathbb{E}cLGD < \\mathbb{E}LGDWhere: EcLGD is the average LGD over conditions ELGD is the average LGD over different loans ELGD is higher than EcLGD because when cLGD is higher, cDR/PD is also higher, which increase the probability weight on the higher cLGDs, while in EcLGD, higher cLGD does not have higher weight. Frye-JacobsModeling cLGD separately from cDR introduces complexity and potential overfit to the cLoss model. Instead, the Frye-Jacobs LGD function assumes that both cDR and cLoss follow Vasicek distribution, and infers cLGD as a function of cDR. Frey-Jacobs assumptions: cDR and cLoss are comonotonic. If cDR goes up, cLoss must go up. If cDR is in its qth quantile, then cLoss must also be in its qth quantile. This implies that there is a cLGD function of cDR: cLGD[cDR] = \\dfrac{F^{-1}_{cLoss}[F_{cDR}\\;[cDR]\\;]}{cDR} cDR follows Vasicek distribution, which stems from the simplest portfolio structure: Large number of Firms Each firm same PD Each pair-wise &rho; the same (same PDJ) Gauss copulas cDR \\sim Vasicek [PD, \\rho] Distribution of cLoss does NOT depend of the definition of default. \\times This implies the distribution of cLoss does not have separate parameters for PD and ELGD. It does have a parameter EL. cLoss follows Vasicek distribution cLoss \\sim Vasicek [PD, \\rho] cLoss and cDR have the same &rho; parameter. \\times This ensure that the LGD function is monotonic Finally, cLGD[cDR] = \\dfrac{\\Phi[\\Phi^{-1}[cDR] - k]}{cDR}, where \\;\\; k = \\dfrac{\\Phi^{-1}[PD] - \\Phi^{-1}[\\mathbb{E}L]}{\\sqrt{1-\\rho}}]Observations: cLGD is strictly monotonic with range (0, 1), for all k \\dfrac{\\partial LGD[DR]}{\\partial DR} > 0, \\forall\\; k cLGD increases slowly, and similarly for all k, at low cDR Elasticity is greatest for loans wth low LGD. Elasticity = \\dfrac{\\dfrac{\\partial LGD[DR]}{\\partial DR}}{\\dfrac{LGD[DR]}{DR}}Frye-Jacobs: Develop Alternative HypothesisIntroduce an additional sensitivity parameter to test the slope of the LGD function. We know that: \\mathbb{E}L = \\mathbb{E}[cDR \\times cLGD[cDR]]In integration form: \\mathbb{E}L = \\int_0^1 x \\times cLGD[x] \\times pdf_{cDR}[x, PD, \\rho] \\;dxBring in the Frye-Jacobs cLGD function: \\mathbb{E}L = \\int_0^1 \\Phi[\\Phi^{-1}[x] - \\dfrac{\\Phi^{-1}[PD] - \\Phi^{-1}[\\mathbb{E}L]}{\\sqrt{1-\\rho}}] \\times pdf_{cDR}[x, PD, \\rho] \\;dxNote that EL is in both lhs and rhs, divide both EL by ELGDa: \\mathbb{E}L = \\int_0^1 \\mathbb{E}LGD^a \\Phi[\\Phi^{-1}[x] - \\dfrac{\\Phi^{-1}[PD] - \\Phi^{-1}[\\dfrac{\\mathbb{E}L}{\\mathbb{E}LGD^a}]}{\\sqrt{1-\\rho}}] \\times pdf_{cDR}[x, PD, \\rho] \\;dxNote that we have identified a new LGD function: cLGD[cDR] = \\dfrac{\\mathbb{E}LGD^a \\Phi[\\Phi^{-1}[cDR] - \\dfrac{\\Phi^{-1}[PD] - \\Phi^{-1}[\\dfrac{\\mathbb{E}L}{\\mathbb{E}LGD^a}]}{\\sqrt{1-\\rho}}]}{cDR}Analyzing the choice of a: When a = 0, the cLGD function is the Frye-Jacob formula. When a = 1, cLGD = ELGD, which implies cLGD does not depend on conditions: cLGD[cDR] = \\mathbb{E}LGDFrye-Jacobs: Hypothesis TestWe introduce finite portfolio, which brings randomness into the D’s and LGD^{dollar}s. We assume the finite portfolio is uniform and all N loans have the same PD and &rho; We assume that given portfolio cDR, the number of defaults is binomial: \\sum D \\sim Binomial (cDR, N) We assume that LGD is normally distributed around cLGD, with &sigma; = 0.2. Note under this assumption, ELGD = cLGD which correspond with a = 1. LGD \\sim N(cLGD [cDR], \\sigma^2)Under finite portfolio, the probability of 0 defaults is: P[\\sum D = 0] = \\int_0^1 (1-x)^N pdf_{cDR}[x] \\;dxWhen conditional on cDR and &Sigma; D &gt; 0, the average portfolio LGD rate is normal: LGD_{portfolio} \\sim N(cLGD [cDR], \\dfrac{\\sigma^2}{\\sum D})Let Y ~ N(0, 1) be a standard normal variable, then LGD becomes: LGD = cLGD[cDR] + \\dfrac{\\sigma}{\\sqrt{\\sum D}}YNow calculate Loss based on DR and LGD: Loss = \\dfrac{\\sum D}{N} \\times LGD = \\dfrac{cLGD[cDR]\\sum D + \\sigma Y\\sqrt{\\sum D}}{N}Use change-of-variable technique to calculate the pdf for Loss: pdf_{Loss}[x] = pdf_Y[g^{-1}(x)] \\times |\\dfrac{\\partial g^{-1}(x)}{\\partial x}|Where: g^{-1}(Loss) = Y = \\dfrac{N Loss + cLGD[cDR]\\sum D}{\\sigma\\sqrt{\\sum D}} \\\\\\\\ |\\dfrac{\\partial g^{-1}(x)}{\\partial x}| = \\dfrac{N}{\\sigma\\sqrt{\\sum D}}Finally, the pdf of loss conditional on &Sigma; D and cDR: pdf_{Loss | \\sum D, cDR}[x] = \\dfrac{N}{\\sigma\\sqrt{\\sum D}} \\phi[\\dfrac{N x + cLGD[cDR]\\sum D}{\\sigma\\sqrt{\\sum D}}]Removing the conditional, the distribution of loss in a uniform portfolio, with N loans, same PD and &rho; and the cLGD function, becomes: pdf_{Loss}[x] = \\int \\sum_{\\sum D = 1}^{N} pdf_{Loss | \\sum D, cDR}[x] \\times pmf_{\\sum D | cDR}[\\sum D] \\times pdf_{cDR}[cDR] \\;dcDR \\\\\\\\ where\\;\\; pmf_{\\sum D | cDR}[\\sum D] = \\binom{N}{\\sum D}cDR^{\\sum D}(1-cDR)^{N-\\sum D}Here is a plot of the the unconditional loss density in a finite (N = 10) portfolio in red and loss density in an infinite portfolio (Vasicek) in blue. (note that the plot use D to denote &Sigma; D): Now we have the pdf for loss, we an test the hypothesis: H0: a = 0 H1: a = MLE Based On Moody’s Loss data As a result MLE(a) = 0.01 based on all loan data and the test failed to reject the null. Same with other bonds and bonds/loans data combination. We conclude that the Fyre-Jacob model is consistent with Moody’s data Vender EstimationDistance-To-Default and EDFRobert Merton argues that: the default of firm i depends on its asset return Merton asserts that a firm defaults if and only if the value of its asset drops below the value of its liability, i.e. its asset return is too low joint default of firm i and j depends on PD and asset return correlation Moody’s suggests that loan contains the option to default, and attempts to use risk-neutral probability to estimate the probability of default. In the context of a put: \\mathbb{P}[S_T < K ] = \\Phi(-d_2) = \\Phi(-\\dfrac{\\log{\\dfrac{S_T}{K}} + (r-\\dfrac{\\sigma^2}{2})T}{\\sigma \\sqrt{T}})Under Moody’s assumption, the firm has an option to default on its assets once it drops below its liability. Here, liability is the strike price, for which Moody’s uses D, or “default point”, to denote short term debt plus half of long term debt to represent liability. DD stands for Distance-To-Default, suggested by Merton. So the probability of default is: \\mathbb{P}[Asset < D] = \\Phi(-DD) = \\Phi(-\\dfrac{\\log{\\dfrac{Asset}{D}}}{AnnualVolatilityOfAssets})Moody’s then estimates the value and volatility of the assets (unobservable) based on the value and volatility of the market capitalization (observable). However, since &Phi;(-DD) gave very poor estimate for the default probability, Moody’s sets the EDF(Estimated Default Frequency) of a firm equal to the average historical default rate of firms with the same Distance-To-Default. An EDF uses DD to find historical analogs of current firms. CorrelationMerton assumes that the correlation &rho; between the latent variable Z’s is equal to the asset return correlation r. However, data suggests that correlation estimated from credit data is less than the correlation based on asset returns. Hence a credit portfolio model that uses asset correlation to estimate &rho; overstates credit risk. References: FINM-36702 Portfolio Management II, Jon Frye, University of Chicago","tags":"math"},{"title":"Guide to Create A Blog With Hexo","url":"/2019/01/guide-to-create-a-blog-with-hexo/","text":"Hexo is a powerful tool to set up your own web space with flexibility and control. Getting StartedInstall git if you have not already done so. Enter the command below and it will prompt an installation on Mac:1$ git --version Install nvm (node version manager):1$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash Once nvm is installed, restart the Terminal.app and install node.js:1$ nvm install stable Finally, install Hexo with npm (node.js package manager):1$ npm install -g hexo-cli Now you are all set to start creating your first Hexo project. Initiate Hexo, Create Blog Post On Local ServerFirst create a root directory for your Hexo project. For me, I created my root directory as a folder called “Hexo” two levels under my home directory (User/username/Documents/Hexo). Initiate Hexo:12$ cd Documents/Hexo$ hexo init Creating your first blog is simple. Run command hexo new &lt;article name&gt; and your first blog post will appear as a markdown file under /source/_post/. Edit the markdown file with Atom (or your favorite text editor).1$ hexo new &lt;article name&gt; You can also create a new webpage in your Hexo project. Run command hexo new page &lt;page name&gt; and a folder with an index.md markdown file will be created under /source/.1$ hexo new page &lt;page name&gt; To view your blog, enter the hexo server command to fire up a local server which displays your website. Enter 0.0.0.0:4000 into your Safari address bar, and your website should be displayed with your first blog post just created above. Note that you can modify your blog post in the markdown file and see instantaneous update on the local server1$ hexo server Deploy Your Blog To GitHubFirst create a github repository under www.github.com/&lt;username&gt;/&lt;username&gt;.github.io. Then initiate git under your Hexo project directory.12$ cd Documents/Hexo$ git init Note: At some point, if you accidentally ran git init in your home directory (as oppose to your Hexo project directory). This caused the “git:(master)” to always appear in your terminal prompt and slow things down dramatically. The solution is to execute this command to delete the erroenous Git repository.1$ rm -rf ~/.git Install package hexo-deploy-git:1$ npm install hexo-deployer-git --save Open the _config.yml file under your Hexo directory with Atom. Update the deploy: section as follow:1234deploy: type: git repository: https://github.com/&lt;username&gt;/&lt;username&gt;.github.io branch: master Now deploy your new blogpost. Use --watch to monitor progress.12$ hexo generate --watch$ hexo deploy or simply12$ hexo g$ hexo d The command hexo generate generate html files each blog posts from the markdown files, as well as a bunch of other essential files such as blog theme. It then save all these files in the hexo/public directory. The hexo deploy command deploys and pushes the content from the hexo/public directory to the repository (i.e. the master branch, as specified above in the _config.yml file). Now go to http://&lt;username&gt;.github.io to the blog. Use Your Own Domain NameWe access information online through domain names, like www.something.com. However, Web browsers interact through Internet Protocol (IP) addresses. DNS servers, or Domain Name System servers, translates domain names to IP addresses so browsers can load Internet resources. The A record maps a name to one or more IP addresses when the IP are known and stable. It is a one-to-many relationship. The CNAME record, or canoical name, maps a name to another name. It should only be used when there are no other records on that name. It is a one-to-one relationship. The ALIAS record maps a name to another name, but can coexist with other records on that name. It is a many-to-one relationship. Now, we have already set up a website, i.e. &lt;username&gt;.github.io, and we want to map our purchased domain name, e.g. www.something.com to the &lt;username&gt;.github.io site. So every time I enter www.something.com, it shows &lt;username&gt;.github.io on my browser. Hence, what we would like is to create a CNAME record to for our purchased domain name. To start, we need to first purchased a domain name, and then modify (through domain seller’s web-based interface) the A record to point to each of the following four GitHub servers:1234185.199.108.153185.199.109.153185.199.110.153185.199.111.153 Next, we update the CNAME record of the purchased domain to point to &lt;username&gt;.github.io (through domain seller’s web-based interface). Note that you can check your DNS records with terminal command dig, or “domain information groper”, which can query DNS servers. You can additional + command to filter on information gathered. 1$ dig www.something.com or123$ dig www.something.com +short$ dig www.something.com MX$ dig www.something.com +nocmd +nostats +noquestion Now we create a file called “CNAME”, which containing a single line of your purhased domain name. We store this “CNAME” file in the public folder of your Hexo project directory. This step is important because the hexo depoloy command pushes the content of the public folder (including the CNAME file) to your git repository. This “CNAME” file ensures that the blog is published in your specified purchased domain, as oppose to the domain “https://.github.io”.12cd Dcouments/hexo/publicecho www.something.com &gt; CNAME Next, go to _config.yml, and update the following:12url: http://www.something.comroot: / Finally we can now generate and deploy Hexo once again. Our blog should now be published and viewable on www.something.com.12hexo ghexo d Setting Shortcuts For Hexo CommandRun these three command to create and load the shell dotfiles: .bash_profile, .bash_prompt and .aliases.123curl -O https://raw.githubusercontent.com/donnemartin/dev-setup/master/.bash_profilecurl -O https://raw.githubusercontent.com/donnemartin/dev-setup/master/.bash_promptcurl -O https://raw.githubusercontent.com/donnemartin/dev-setup/master/.aliases Open up the aliases file $ atom ~/.aliases and add shortcuts for your hexo routine.12345alias h=\"cd Documents/Hexo&amp;&amp;atom .\"alias hs=\"cd&amp;&amp;cd Documents/Hexo&amp;&amp;hexo g &amp;&amp; hexo s\"alias hd=\"cd&amp;&amp;cd Documents/Hexo&amp;&amp;hexo g &amp;&amp; hexo d\"alias hcs=\"hexo clean&amp;&amp;hexo g&amp;&amp;cd public&amp;&amp;echo 'jackliu234.com' &gt; CNAME&amp;&amp;hexo g &amp;&amp; hexo s\"alias hcd=\"hexo clean&amp;&amp;hexo g&amp;&amp;cd public&amp;&amp;echo 'jackliu234.com' &gt; CNAME&amp;&amp;hexo g &amp;&amp; hexo d\"","tags":"tech"},{"title":"Notes on Portfolio Theory","url":"/2018/12/portfolio-theory/","text":"Portfolio DiversificationTwo-Asset PortfolioConsider an investment portfolio V on two assets: P = wB + (1-w)SWe can calculate the mean and variance of the return on the portfolio, based on the mean and variance of the return on each asset. \\begin{align} \\mu_p &= w\\mu_b + (1-w)\\mu_s \\\\ \\sigma^2_p &= w^2\\sigma^2_b + (1-w)^2\\sigma^2_s + 2w(1-w)\\rho\\sigma_s\\sigma_b \\end{align}We can see that if \\rho","tags":"math"},{"title":"","url":"/about/index.html","text":"Hi there! My name is Rongjia Liu, and I love exploring both new tech ideas and old math tricks. I started this website when I was a grad student at the University of Chicago, first as a note taking device as I crammed through the finals. It had since become my favorite corner of the internet where I can gather （自）and share （嗨）random thoughts and discoveries. The page you are staring at right now is built with Hexo and hosted on my own Github repo, with this awesome theme arctic that I customized.","tags":""},{"title":"","url":"/project-lab/index.html","text":"project-lab /*! * * Twitter Bootstrap * */ /*! * Bootstrap v3.3.7 (http://getbootstrap.com) * Copyright 2011-2016 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE) */ /*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */ html { font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; } body { margin: 0; } article, aside, details, figcaption, figure, footer, header, hgroup, main, menu, nav, section, summary { display: block; } audio, canvas, progress, video { display: inline-block; vertical-align: baseline; } audio:not([controls]) { display: none; height: 0; } [hidden], template { display: none; } a { background-color: transparent; } a:active, a:hover { outline: 0; } abbr[title] { border-bottom: 1px dotted; } b, strong { font-weight: bold; } dfn { font-style: italic; } h1 { font-size: 2em; margin: 0.67em 0; } mark { background: #ff0; color: #000; } small { font-size: 80%; } sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; } sup { top: -0.5em; } sub { bottom: -0.25em; } img { border: 0; } svg:not(:root) { overflow: hidden; } figure { margin: 1em 40px; } hr { box-sizing: content-box; height: 0; } pre { overflow: auto; } code, kbd, pre, samp { font-family: monospace, monospace; font-size: 1em; } button, input, optgroup, select, textarea { color: inherit; font: inherit; margin: 0; } button { overflow: visible; } button, select { text-transform: none; } button, html input[type=\"button\"], input[type=\"reset\"], input[type=\"submit\"] { -webkit-appearance: button; cursor: pointer; } button[disabled], html input[disabled] { cursor: default; } button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; } input { line-height: normal; } input[type=\"checkbox\"], input[type=\"radio\"] { box-sizing: border-box; padding: 0; } input[type=\"number\"]::-webkit-inner-spin-button, input[type=\"number\"]::-webkit-outer-spin-button { height: auto; } input[type=\"search\"] { -webkit-appearance: textfield; box-sizing: content-box; } input[type=\"search\"]::-webkit-search-cancel-button, input[type=\"search\"]::-webkit-search-decoration { -webkit-appearance: none; } fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; } legend { border: 0; padding: 0; } textarea { overflow: auto; } optgroup { font-weight: bold; } table { border-collapse: collapse; border-spacing: 0; } td, th { padding: 0; } /*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */ @media print { *, *:before, *:after { background: transparent !important; box-shadow: none !important; text-shadow: none !important; } a, a:visited { text-decoration: underline; } a[href]:after { content: \" (\" attr(href) \")\"; } abbr[title]:after { content: \" (\" attr(title) \")\"; } a[href^=\"#\"]:after, a[href^=\"javascript:\"]:after { content: \"\"; } pre, blockquote { border: 1px solid #999; page-break-inside: avoid; } thead { display: table-header-group; } tr, img { page-break-inside: avoid; } img { max-width: 100% !important; } p, h2, h3 { orphans: 3; widows: 3; } h2, h3 { page-break-after: avoid; } .navbar { display: none; } .btn > .caret, .dropup > .btn > .caret { border-top-color: #000 !important; } .label { border: 1px solid #000; } .table { border-collapse: collapse !important; } .table td, .table th { background-color: #fff !important; } .table-bordered th, .table-bordered td { border: 1px solid #ddd !important; } } @font-face { font-family: 'Glyphicons Halflings'; src: url('../components/bootstrap/fonts/glyphicons-halflings-regular.eot'); src: url('../components/bootstrap/fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.woff2') format('woff2'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.woff') format('woff'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.ttf') format('truetype'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular') format('svg'); } .glyphicon { position: relative; top: 1px; display: inline-block; font-family: 'Glyphicons Halflings'; font-style: normal; font-weight: normal; line-height: 1; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } .glyphicon-asterisk:before { content: \"\\002a\"; } .glyphicon-plus:before { content: \"\\002b\"; } .glyphicon-euro:before, .glyphicon-eur:before { content: \"\\20ac\"; } .glyphicon-minus:before { content: \"\\2212\"; } .glyphicon-cloud:before { content: \"\\2601\"; } .glyphicon-envelope:before { content: \"\\2709\"; } .glyphicon-pencil:before { content: \"\\270f\"; } .glyphicon-glass:before { content: \"\\e001\"; } .glyphicon-music:before { content: \"\\e002\"; } .glyphicon-search:before { content: \"\\e003\"; } .glyphicon-heart:before { content: \"\\e005\"; } .glyphicon-star:before { content: \"\\e006\"; } .glyphicon-star-empty:before { content: \"\\e007\"; } .glyphicon-user:before { content: \"\\e008\"; } .glyphicon-film:before { content: \"\\e009\"; } .glyphicon-th-large:before { content: \"\\e010\"; } .glyphicon-th:before { content: \"\\e011\"; } .glyphicon-th-list:before { content: \"\\e012\"; } .glyphicon-ok:before { content: \"\\e013\"; } .glyphicon-remove:before { content: \"\\e014\"; } .glyphicon-zoom-in:before { content: \"\\e015\"; } .glyphicon-zoom-out:before { content: \"\\e016\"; } .glyphicon-off:before { content: \"\\e017\"; } .glyphicon-signal:before { content: \"\\e018\"; } .glyphicon-cog:before { content: \"\\e019\"; } .glyphicon-trash:before { content: \"\\e020\"; } .glyphicon-home:before { content: \"\\e021\"; } .glyphicon-file:before { content: \"\\e022\"; } .glyphicon-time:before { content: \"\\e023\"; } .glyphicon-road:before { content: \"\\e024\"; } .glyphicon-download-alt:before { content: \"\\e025\"; } .glyphicon-download:before { content: \"\\e026\"; } .glyphicon-upload:before { content: \"\\e027\"; } .glyphicon-inbox:before { content: \"\\e028\"; } .glyphicon-play-circle:before { content: \"\\e029\"; } .glyphicon-repeat:before { content: \"\\e030\"; } .glyphicon-refresh:before { content: \"\\e031\"; } .glyphicon-list-alt:before { content: \"\\e032\"; } .glyphicon-lock:before { content: \"\\e033\"; } .glyphicon-flag:before { content: \"\\e034\"; } .glyphicon-headphones:before { content: \"\\e035\"; } .glyphicon-volume-off:before { content: \"\\e036\"; } .glyphicon-volume-down:before { content: \"\\e037\"; } .glyphicon-volume-up:before { content: \"\\e038\"; } .glyphicon-qrcode:before { content: \"\\e039\"; } .glyphicon-barcode:before { content: \"\\e040\"; } .glyphicon-tag:before { content: \"\\e041\"; } .glyphicon-tags:before { content: \"\\e042\"; } .glyphicon-book:before { content: \"\\e043\"; } .glyphicon-bookmark:before { content: \"\\e044\"; } .glyphicon-print:before { content: \"\\e045\"; } .glyphicon-camera:before { content: \"\\e046\"; } .glyphicon-font:before { content: \"\\e047\"; } .glyphicon-bold:before { content: \"\\e048\"; } .glyphicon-italic:before { content: \"\\e049\"; } .glyphicon-text-height:before { content: \"\\e050\"; } .glyphicon-text-width:before { content: \"\\e051\"; } .glyphicon-align-left:before { content: \"\\e052\"; } .glyphicon-align-center:before { content: \"\\e053\"; } .glyphicon-align-right:before { content: \"\\e054\"; } .glyphicon-align-justify:before { content: \"\\e055\"; } .glyphicon-list:before { content: \"\\e056\"; } .glyphicon-indent-left:before { content: \"\\e057\"; } .glyphicon-indent-right:before { content: \"\\e058\"; } .glyphicon-facetime-video:before { content: \"\\e059\"; } .glyphicon-picture:before { content: \"\\e060\"; } .glyphicon-map-marker:before { content: \"\\e062\"; } .glyphicon-adjust:before { content: \"\\e063\"; } .glyphicon-tint:before { content: \"\\e064\"; } .glyphicon-edit:before { content: \"\\e065\"; } .glyphicon-share:before { content: \"\\e066\"; } .glyphicon-check:before { content: \"\\e067\"; } .glyphicon-move:before { content: \"\\e068\"; } .glyphicon-step-backward:before { content: \"\\e069\"; } .glyphicon-fast-backward:before { content: \"\\e070\"; } .glyphicon-backward:before { content: \"\\e071\"; } .glyphicon-play:before { content: \"\\e072\"; } .glyphicon-pause:before { content: \"\\e073\"; } .glyphicon-stop:before { content: \"\\e074\"; } .glyphicon-forward:before { content: \"\\e075\"; } .glyphicon-fast-forward:before { content: \"\\e076\"; } .glyphicon-step-forward:before { content: \"\\e077\"; } .glyphicon-eject:before { content: \"\\e078\"; } .glyphicon-chevron-left:before { content: \"\\e079\"; } .glyphicon-chevron-right:before { content: \"\\e080\"; } .glyphicon-plus-sign:before { content: \"\\e081\"; } .glyphicon-minus-sign:before { content: \"\\e082\"; } .glyphicon-remove-sign:before { content: \"\\e083\"; } .glyphicon-ok-sign:before { content: \"\\e084\"; } .glyphicon-question-sign:before { content: \"\\e085\"; } .glyphicon-info-sign:before { content: \"\\e086\"; } .glyphicon-screenshot:before { content: \"\\e087\"; } .glyphicon-remove-circle:before { content: \"\\e088\"; } .glyphicon-ok-circle:before { content: \"\\e089\"; } .glyphicon-ban-circle:before { content: \"\\e090\"; } .glyphicon-arrow-left:before { content: \"\\e091\"; } .glyphicon-arrow-right:before { content: \"\\e092\"; } .glyphicon-arrow-up:before { content: \"\\e093\"; } .glyphicon-arrow-down:before { content: \"\\e094\"; } .glyphicon-share-alt:before { content: \"\\e095\"; } .glyphicon-resize-full:before { content: \"\\e096\"; } .glyphicon-resize-small:before { content: \"\\e097\"; } .glyphicon-exclamation-sign:before { content: \"\\e101\"; } .glyphicon-gift:before { content: \"\\e102\"; } .glyphicon-leaf:before { content: \"\\e103\"; } .glyphicon-fire:before { content: \"\\e104\"; } .glyphicon-eye-open:before { content: \"\\e105\"; } .glyphicon-eye-close:before { content: \"\\e106\"; } .glyphicon-warning-sign:before { content: \"\\e107\"; } .glyphicon-plane:before { content: \"\\e108\"; } .glyphicon-calendar:before { content: \"\\e109\"; } .glyphicon-random:before { content: \"\\e110\"; } .glyphicon-comment:before { content: \"\\e111\"; } .glyphicon-magnet:before { content: \"\\e112\"; } .glyphicon-chevron-up:before { content: \"\\e113\"; } .glyphicon-chevron-down:before { content: \"\\e114\"; } .glyphicon-retweet:before { content: \"\\e115\"; } .glyphicon-shopping-cart:before { content: \"\\e116\"; } .glyphicon-folder-close:before { content: \"\\e117\"; } .glyphicon-folder-open:before { content: \"\\e118\"; } .glyphicon-resize-vertical:before { content: \"\\e119\"; } .glyphicon-resize-horizontal:before { content: \"\\e120\"; } .glyphicon-hdd:before { content: \"\\e121\"; } .glyphicon-bullhorn:before { content: \"\\e122\"; } .glyphicon-bell:before { content: \"\\e123\"; } .glyphicon-certificate:before { content: \"\\e124\"; } .glyphicon-thumbs-up:before { content: \"\\e125\"; } .glyphicon-thumbs-down:before { content: \"\\e126\"; } .glyphicon-hand-right:before { content: \"\\e127\"; } .glyphicon-hand-left:before { content: \"\\e128\"; } .glyphicon-hand-up:before { content: \"\\e129\"; } .glyphicon-hand-down:before { content: \"\\e130\"; } .glyphicon-circle-arrow-right:before { content: \"\\e131\"; } .glyphicon-circle-arrow-left:before { content: \"\\e132\"; } .glyphicon-circle-arrow-up:before { content: \"\\e133\"; } .glyphicon-circle-arrow-down:before { content: \"\\e134\"; } .glyphicon-globe:before { content: \"\\e135\"; } .glyphicon-wrench:before { content: \"\\e136\"; } .glyphicon-tasks:before { content: \"\\e137\"; } .glyphicon-filter:before { content: \"\\e138\"; } .glyphicon-briefcase:before { content: \"\\e139\"; } .glyphicon-fullscreen:before { content: \"\\e140\"; } .glyphicon-dashboard:before { content: \"\\e141\"; } .glyphicon-paperclip:before { content: \"\\e142\"; } .glyphicon-heart-empty:before { content: \"\\e143\"; } .glyphicon-link:before { content: \"\\e144\"; } .glyphicon-phone:before { content: \"\\e145\"; } .glyphicon-pushpin:before { content: \"\\e146\"; } .glyphicon-usd:before { content: \"\\e148\"; } .glyphicon-gbp:before { content: \"\\e149\"; } .glyphicon-sort:before { content: \"\\e150\"; } .glyphicon-sort-by-alphabet:before { content: \"\\e151\"; } .glyphicon-sort-by-alphabet-alt:before { content: \"\\e152\"; } .glyphicon-sort-by-order:before { content: \"\\e153\"; } .glyphicon-sort-by-order-alt:before { content: \"\\e154\"; } .glyphicon-sort-by-attributes:before { content: \"\\e155\"; } .glyphicon-sort-by-attributes-alt:before { content: \"\\e156\"; } .glyphicon-unchecked:before { content: \"\\e157\"; } .glyphicon-expand:before { content: \"\\e158\"; } .glyphicon-collapse-down:before { content: \"\\e159\"; } .glyphicon-collapse-up:before { content: \"\\e160\"; } .glyphicon-log-in:before { content: \"\\e161\"; } .glyphicon-flash:before { content: \"\\e162\"; } .glyphicon-log-out:before { content: \"\\e163\"; } .glyphicon-new-window:before { content: \"\\e164\"; } .glyphicon-record:before { content: \"\\e165\"; } .glyphicon-save:before { content: \"\\e166\"; } .glyphicon-open:before { content: \"\\e167\"; } .glyphicon-saved:before { content: \"\\e168\"; } .glyphicon-import:before { content: \"\\e169\"; } .glyphicon-export:before { content: \"\\e170\"; } .glyphicon-send:before { content: \"\\e171\"; } .glyphicon-floppy-disk:before { content: \"\\e172\"; } .glyphicon-floppy-saved:before { content: \"\\e173\"; } .glyphicon-floppy-remove:before { content: \"\\e174\"; } .glyphicon-floppy-save:before { content: \"\\e175\"; } .glyphicon-floppy-open:before { content: \"\\e176\"; } .glyphicon-credit-card:before { content: \"\\e177\"; } .glyphicon-transfer:before { content: \"\\e178\"; } .glyphicon-cutlery:before { content: \"\\e179\"; } .glyphicon-header:before { content: \"\\e180\"; } .glyphicon-compressed:before { content: \"\\e181\"; } .glyphicon-earphone:before { content: \"\\e182\"; } .glyphicon-phone-alt:before { content: \"\\e183\"; } .glyphicon-tower:before { content: \"\\e184\"; } .glyphicon-stats:before { content: \"\\e185\"; } .glyphicon-sd-video:before { content: \"\\e186\"; } .glyphicon-hd-video:before { content: \"\\e187\"; } .glyphicon-subtitles:before { content: \"\\e188\"; } .glyphicon-sound-stereo:before { content: \"\\e189\"; } .glyphicon-sound-dolby:before { content: \"\\e190\"; } .glyphicon-sound-5-1:before { content: \"\\e191\"; } .glyphicon-sound-6-1:before { content: \"\\e192\"; } .glyphicon-sound-7-1:before { content: \"\\e193\"; } .glyphicon-copyright-mark:before { content: \"\\e194\"; } .glyphicon-registration-mark:before { content: \"\\e195\"; } .glyphicon-cloud-download:before { content: \"\\e197\"; } .glyphicon-cloud-upload:before { content: \"\\e198\"; } .glyphicon-tree-conifer:before { content: \"\\e199\"; } .glyphicon-tree-deciduous:before { content: \"\\e200\"; } .glyphicon-cd:before { content: \"\\e201\"; } .glyphicon-save-file:before { content: \"\\e202\"; } .glyphicon-open-file:before { content: \"\\e203\"; } .glyphicon-level-up:before { content: \"\\e204\"; } .glyphicon-copy:before { content: \"\\e205\"; } .glyphicon-paste:before { content: \"\\e206\"; } .glyphicon-alert:before { content: \"\\e209\"; } .glyphicon-equalizer:before { content: \"\\e210\"; } .glyphicon-king:before { content: \"\\e211\"; } .glyphicon-queen:before { content: \"\\e212\"; } .glyphicon-pawn:before { content: \"\\e213\"; } .glyphicon-bishop:before { content: \"\\e214\"; } .glyphicon-knight:before { content: \"\\e215\"; } .glyphicon-baby-formula:before { content: \"\\e216\"; } .glyphicon-tent:before { content: \"\\26fa\"; } .glyphicon-blackboard:before { content: \"\\e218\"; } .glyphicon-bed:before { content: \"\\e219\"; } .glyphicon-apple:before { content: \"\\f8ff\"; } .glyphicon-erase:before { content: \"\\e221\"; } .glyphicon-hourglass:before { content: \"\\231b\"; } .glyphicon-lamp:before { content: \"\\e223\"; } .glyphicon-duplicate:before { content: \"\\e224\"; } .glyphicon-piggy-bank:before { content: \"\\e225\"; } .glyphicon-scissors:before { content: \"\\e226\"; } .glyphicon-bitcoin:before { content: \"\\e227\"; } .glyphicon-btc:before { content: \"\\e227\"; } .glyphicon-xbt:before { content: \"\\e227\"; } .glyphicon-yen:before { content: \"\\00a5\"; } .glyphicon-jpy:before { content: \"\\00a5\"; } .glyphicon-ruble:before { content: \"\\20bd\"; } .glyphicon-rub:before { content: \"\\20bd\"; } .glyphicon-scale:before { content: \"\\e230\"; } .glyphicon-ice-lolly:before { content: \"\\e231\"; } .glyphicon-ice-lolly-tasted:before { content: \"\\e232\"; } .glyphicon-education:before { content: \"\\e233\"; } .glyphicon-option-horizontal:before { content: \"\\e234\"; } .glyphicon-option-vertical:before { content: \"\\e235\"; } .glyphicon-menu-hamburger:before { content: \"\\e236\"; } .glyphicon-modal-window:before { content: \"\\e237\"; } .glyphicon-oil:before { content: \"\\e238\"; } .glyphicon-grain:before { content: \"\\e239\"; } .glyphicon-sunglasses:before { content: \"\\e240\"; } .glyphicon-text-size:before { content: \"\\e241\"; } .glyphicon-text-color:before { content: \"\\e242\"; } .glyphicon-text-background:before { content: \"\\e243\"; } .glyphicon-object-align-top:before { content: \"\\e244\"; } .glyphicon-object-align-bottom:before { content: \"\\e245\"; } .glyphicon-object-align-horizontal:before { content: \"\\e246\"; } .glyphicon-object-align-left:before { content: \"\\e247\"; } .glyphicon-object-align-vertical:before { content: \"\\e248\"; } .glyphicon-object-align-right:before { content: \"\\e249\"; } .glyphicon-triangle-right:before { content: \"\\e250\"; } .glyphicon-triangle-left:before { content: \"\\e251\"; } .glyphicon-triangle-bottom:before { content: \"\\e252\"; } .glyphicon-triangle-top:before { content: \"\\e253\"; } .glyphicon-console:before { content: \"\\e254\"; } .glyphicon-superscript:before { content: \"\\e255\"; } .glyphicon-subscript:before { content: \"\\e256\"; } .glyphicon-menu-left:before { content: \"\\e257\"; } .glyphicon-menu-right:before { content: \"\\e258\"; } .glyphicon-menu-down:before { content: \"\\e259\"; } .glyphicon-menu-up:before { content: \"\\e260\"; } * { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; } *:before, *:after { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; } html { font-size: 10px; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); } body { font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; font-size: 13px; line-height: 1.42857143; color: #000; background-color: #fff; } input, button, select, textarea { font-family: inherit; font-size: inherit; line-height: inherit; } a { color: #337ab7; text-decoration: none; } a:hover, a:focus { color: #23527c; text-decoration: underline; } a:focus { outline: 5px auto -webkit-focus-ring-color; outline-offset: -2px; } figure { margin: 0; } img { vertical-align: middle; } .img-responsive, .thumbnail > img, .thumbnail a > img, .carousel-inner > .item > img, .carousel-inner > .item > a > img { display: block; max-width: 100%; height: auto; } .img-rounded { border-radius: 3px; } .img-thumbnail { padding: 4px; line-height: 1.42857143; background-color: #fff; border: 1px solid #ddd; border-radius: 2px; -webkit-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out; display: inline-block; max-width: 100%; height: auto; } .img-circle { border-radius: 50%; } hr { margin-top: 18px; margin-bottom: 18px; border: 0; border-top: 1px solid #eeeeee; } .sr-only { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; } .sr-only-focusable:active, .sr-only-focusable:focus { position: static; width: auto; height: auto; margin: 0; overflow: visible; clip: auto; } [role=\"button\"] { cursor: pointer; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 { font-family: inherit; font-weight: 500; line-height: 1.1; color: inherit; } h1 small, h2 small, h3 small, h4 small, h5 small, h6 small, .h1 small, .h2 small, .h3 small, .h4 small, .h5 small, .h6 small, h1 .small, h2 .small, h3 .small, h4 .small, h5 .small, h6 .small, .h1 .small, .h2 .small, .h3 .small, .h4 .small, .h5 .small, .h6 .small { font-weight: normal; line-height: 1; color: #777777; } h1, .h1, h2, .h2, h3, .h3 { margin-top: 18px; margin-bottom: 9px; } h1 small, .h1 small, h2 small, .h2 small, h3 small, .h3 small, h1 .small, .h1 .small, h2 .small, .h2 .small, h3 .small, .h3 .small { font-size: 65%; } h4, .h4, h5, .h5, h6, .h6 { margin-top: 9px; margin-bottom: 9px; } h4 small, .h4 small, h5 small, .h5 small, h6 small, .h6 small, h4 .small, .h4 .small, h5 .small, .h5 .small, h6 .small, .h6 .small { font-size: 75%; } h1, .h1 { font-size: 33px; } h2, .h2 { font-size: 27px; } h3, .h3 { font-size: 23px; } h4, .h4 { font-size: 17px; } h5, .h5 { font-size: 13px; } h6, .h6 { font-size: 12px; } p { margin: 0 0 9px; } .lead { margin-bottom: 18px; font-size: 14px; font-weight: 300; line-height: 1.4; } @media (min-width: 768px) { .lead { font-size: 19.5px; } } small, .small { font-size: 92%; } mark, .mark { background-color: #fcf8e3; padding: .2em; } .text-left { text-align: left; } .text-right { text-align: right; } .text-center { text-align: center; } .text-justify { text-align: justify; } .text-nowrap { white-space: nowrap; } .text-lowercase { text-transform: lowercase; } .text-uppercase { text-transform: uppercase; } .text-capitalize { text-transform: capitalize; } .text-muted { color: #777777; } .text-primary { color: #337ab7; } a.text-primary:hover, a.text-primary:focus { color: #286090; } .text-success { color: #3c763d; } a.text-success:hover, a.text-success:focus { color: #2b542c; } .text-info { color: #31708f; } a.text-info:hover, a.text-info:focus { color: #245269; } .text-warning { color: #8a6d3b; } a.text-warning:hover, a.text-warning:focus { color: #66512c; } .text-danger { color: #a94442; } a.text-danger:hover, a.text-danger:focus { color: #843534; } .bg-primary { color: #fff; background-color: #337ab7; } a.bg-primary:hover, a.bg-primary:focus { background-color: #286090; } .bg-success { background-color: #dff0d8; } a.bg-success:hover, a.bg-success:focus { background-color: #c1e2b3; } .bg-info { background-color: #d9edf7; } a.bg-info:hover, a.bg-info:focus { background-color: #afd9ee; } .bg-warning { background-color: #fcf8e3; } a.bg-warning:hover, a.bg-warning:focus { background-color: #f7ecb5; } .bg-danger { background-color: #f2dede; } a.bg-danger:hover, a.bg-danger:focus { background-color: #e4b9b9; } .page-header { padding-bottom: 8px; margin: 36px 0 18px; border-bottom: 1px solid #eeeeee; } ul, ol { margin-top: 0; margin-bottom: 9px; } ul ul, ol ul, ul ol, ol ol { margin-bottom: 0; } .list-unstyled { padding-left: 0; list-style: none; } .list-inline { padding-left: 0; list-style: none; margin-left: -5px; } .list-inline > li { display: inline-block; padding-left: 5px; padding-right: 5px; } dl { margin-top: 0; margin-bottom: 18px; } dt, dd { line-height: 1.42857143; } dt { font-weight: bold; } dd { margin-left: 0; } @media (min-width: 541px) { .dl-horizontal dt { float: left; width: 160px; clear: left; text-align: right; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } .dl-horizontal dd { margin-left: 180px; } } abbr[title], abbr[data-original-title] { cursor: help; border-bottom: 1px dotted #777777; } .initialism { font-size: 90%; text-transform: uppercase; } blockquote { padding: 9px 18px; margin: 0 0 18px; font-size: inherit; border-left: 5px solid #eeeeee; } blockquote p:last-child, blockquote ul:last-child, blockquote ol:last-child { margin-bottom: 0; } blockquote footer, blockquote small, blockquote .small { display: block; font-size: 80%; line-height: 1.42857143; color: #777777; } blockquote footer:before, blockquote small:before, blockquote .small:before { content: '\\2014 \\00A0'; } .blockquote-reverse, blockquote.pull-right { padding-right: 15px; padding-left: 0; border-right: 5px solid #eeeeee; border-left: 0; text-align: right; } .blockquote-reverse footer:before, blockquote.pull-right footer:before, .blockquote-reverse small:before, blockquote.pull-right small:before, .blockquote-reverse .small:before, blockquote.pull-right .small:before { content: ''; } .blockquote-reverse footer:after, blockquote.pull-right footer:after, .blockquote-reverse small:after, blockquote.pull-right small:after, .blockquote-reverse .small:after, blockquote.pull-right .small:after { content: '\\00A0 \\2014'; } address { margin-bottom: 18px; font-style: normal; line-height: 1.42857143; } code, kbd, pre, samp { font-family: monospace; } code { padding: 2px 4px; font-size: 90%; color: #c7254e; background-color: #f9f2f4; border-radius: 2px; } kbd { padding: 2px 4px; font-size: 90%; color: #888; background-color: transparent; border-radius: 1px; box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25); } kbd kbd { padding: 0; font-size: 100%; font-weight: bold; box-shadow: none; } pre { display: block; padding: 8.5px; margin: 0 0 9px; font-size: 12px; line-height: 1.42857143; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 2px; } pre code { padding: 0; font-size: inherit; color: inherit; white-space: pre-wrap; background-color: transparent; border-radius: 0; } .pre-scrollable { max-height: 340px; overflow-y: scroll; } .container { margin-right: auto; margin-left: auto; padding-left: 0px; padding-right: 0px; } @media (min-width: 768px) { .container { width: 768px; } } @media (min-width: 992px) { .container { width: 940px; } } @media (min-width: 1200px) { .container { width: 1140px; } } .container-fluid { margin-right: auto; margin-left: auto; padding-left: 0px; padding-right: 0px; } .row { margin-left: 0px; margin-right: 0px; } .col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12 { position: relative; min-height: 1px; padding-left: 0px; padding-right: 0px; } .col-xs-1, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9, .col-xs-10, .col-xs-11, .col-xs-12 { float: left; } .col-xs-12 { width: 100%; } .col-xs-11 { width: 91.66666667%; } .col-xs-10 { width: 83.33333333%; } .col-xs-9 { width: 75%; } .col-xs-8 { width: 66.66666667%; } .col-xs-7 { width: 58.33333333%; } .col-xs-6 { width: 50%; } .col-xs-5 { width: 41.66666667%; } .col-xs-4 { width: 33.33333333%; } .col-xs-3 { width: 25%; } .col-xs-2 { width: 16.66666667%; } .col-xs-1 { width: 8.33333333%; } .col-xs-pull-12 { right: 100%; } .col-xs-pull-11 { right: 91.66666667%; } .col-xs-pull-10 { right: 83.33333333%; } .col-xs-pull-9 { right: 75%; } .col-xs-pull-8 { right: 66.66666667%; } .col-xs-pull-7 { right: 58.33333333%; } .col-xs-pull-6 { right: 50%; } .col-xs-pull-5 { right: 41.66666667%; } .col-xs-pull-4 { right: 33.33333333%; } .col-xs-pull-3 { right: 25%; } .col-xs-pull-2 { right: 16.66666667%; } .col-xs-pull-1 { right: 8.33333333%; } .col-xs-pull-0 { right: auto; } .col-xs-push-12 { left: 100%; } .col-xs-push-11 { left: 91.66666667%; } .col-xs-push-10 { left: 83.33333333%; } .col-xs-push-9 { left: 75%; } .col-xs-push-8 { left: 66.66666667%; } .col-xs-push-7 { left: 58.33333333%; } .col-xs-push-6 { left: 50%; } .col-xs-push-5 { left: 41.66666667%; } .col-xs-push-4 { left: 33.33333333%; } .col-xs-push-3 { left: 25%; } .col-xs-push-2 { left: 16.66666667%; } .col-xs-push-1 { left: 8.33333333%; } .col-xs-push-0 { left: auto; } .col-xs-offset-12 { margin-left: 100%; } .col-xs-offset-11 { margin-left: 91.66666667%; } .col-xs-offset-10 { margin-left: 83.33333333%; } .col-xs-offset-9 { margin-left: 75%; } .col-xs-offset-8 { margin-left: 66.66666667%; } .col-xs-offset-7 { margin-left: 58.33333333%; } .col-xs-offset-6 { margin-left: 50%; } .col-xs-offset-5 { margin-left: 41.66666667%; } .col-xs-offset-4 { margin-left: 33.33333333%; } .col-xs-offset-3 { margin-left: 25%; } .col-xs-offset-2 { margin-left: 16.66666667%; } .col-xs-offset-1 { margin-left: 8.33333333%; } .col-xs-offset-0 { margin-left: 0%; } @media (min-width: 768px) { .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12 { float: left; } .col-sm-12 { width: 100%; } .col-sm-11 { width: 91.66666667%; } .col-sm-10 { width: 83.33333333%; } .col-sm-9 { width: 75%; } .col-sm-8 { width: 66.66666667%; } .col-sm-7 { width: 58.33333333%; } .col-sm-6 { width: 50%; } .col-sm-5 { width: 41.66666667%; } .col-sm-4 { width: 33.33333333%; } .col-sm-3 { width: 25%; } .col-sm-2 { width: 16.66666667%; } .col-sm-1 { width: 8.33333333%; } .col-sm-pull-12 { right: 100%; } .col-sm-pull-11 { right: 91.66666667%; } .col-sm-pull-10 { right: 83.33333333%; } .col-sm-pull-9 { right: 75%; } .col-sm-pull-8 { right: 66.66666667%; } .col-sm-pull-7 { right: 58.33333333%; } .col-sm-pull-6 { right: 50%; } .col-sm-pull-5 { right: 41.66666667%; } .col-sm-pull-4 { right: 33.33333333%; } .col-sm-pull-3 { right: 25%; } .col-sm-pull-2 { right: 16.66666667%; } .col-sm-pull-1 { right: 8.33333333%; } .col-sm-pull-0 { right: auto; } .col-sm-push-12 { left: 100%; } .col-sm-push-11 { left: 91.66666667%; } .col-sm-push-10 { left: 83.33333333%; } .col-sm-push-9 { left: 75%; } .col-sm-push-8 { left: 66.66666667%; } .col-sm-push-7 { left: 58.33333333%; } .col-sm-push-6 { left: 50%; } .col-sm-push-5 { left: 41.66666667%; } .col-sm-push-4 { left: 33.33333333%; } .col-sm-push-3 { left: 25%; } .col-sm-push-2 { left: 16.66666667%; } .col-sm-push-1 { left: 8.33333333%; } .col-sm-push-0 { left: auto; } .col-sm-offset-12 { margin-left: 100%; } .col-sm-offset-11 { margin-left: 91.66666667%; } .col-sm-offset-10 { margin-left: 83.33333333%; } .col-sm-offset-9 { margin-left: 75%; } .col-sm-offset-8 { margin-left: 66.66666667%; } .col-sm-offset-7 { margin-left: 58.33333333%; } .col-sm-offset-6 { margin-left: 50%; } .col-sm-offset-5 { margin-left: 41.66666667%; } .col-sm-offset-4 { margin-left: 33.33333333%; } .col-sm-offset-3 { margin-left: 25%; } .col-sm-offset-2 { margin-left: 16.66666667%; } .col-sm-offset-1 { margin-left: 8.33333333%; } .col-sm-offset-0 { margin-left: 0%; } } @media (min-width: 992px) { .col-md-1, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-10, .col-md-11, .col-md-12 { float: left; } .col-md-12 { width: 100%; } .col-md-11 { width: 91.66666667%; } .col-md-10 { width: 83.33333333%; } .col-md-9 { width: 75%; } .col-md-8 { width: 66.66666667%; } .col-md-7 { width: 58.33333333%; } .col-md-6 { width: 50%; } .col-md-5 { width: 41.66666667%; } .col-md-4 { width: 33.33333333%; } .col-md-3 { width: 25%; } .col-md-2 { width: 16.66666667%; } .col-md-1 { width: 8.33333333%; } .col-md-pull-12 { right: 100%; } .col-md-pull-11 { right: 91.66666667%; } .col-md-pull-10 { right: 83.33333333%; } .col-md-pull-9 { right: 75%; } .col-md-pull-8 { right: 66.66666667%; } .col-md-pull-7 { right: 58.33333333%; } .col-md-pull-6 { right: 50%; } .col-md-pull-5 { right: 41.66666667%; } .col-md-pull-4 { right: 33.33333333%; } .col-md-pull-3 { right: 25%; } .col-md-pull-2 { right: 16.66666667%; } .col-md-pull-1 { right: 8.33333333%; } .col-md-pull-0 { right: auto; } .col-md-push-12 { left: 100%; } .col-md-push-11 { left: 91.66666667%; } .col-md-push-10 { left: 83.33333333%; } .col-md-push-9 { left: 75%; } .col-md-push-8 { left: 66.66666667%; } .col-md-push-7 { left: 58.33333333%; } .col-md-push-6 { left: 50%; } .col-md-push-5 { left: 41.66666667%; } .col-md-push-4 { left: 33.33333333%; } .col-md-push-3 { left: 25%; } .col-md-push-2 { left: 16.66666667%; } .col-md-push-1 { left: 8.33333333%; } .col-md-push-0 { left: auto; } .col-md-offset-12 { margin-left: 100%; } .col-md-offset-11 { margin-left: 91.66666667%; } .col-md-offset-10 { margin-left: 83.33333333%; } .col-md-offset-9 { margin-left: 75%; } .col-md-offset-8 { margin-left: 66.66666667%; } .col-md-offset-7 { margin-left: 58.33333333%; } .col-md-offset-6 { margin-left: 50%; } .col-md-offset-5 { margin-left: 41.66666667%; } .col-md-offset-4 { margin-left: 33.33333333%; } .col-md-offset-3 { margin-left: 25%; } .col-md-offset-2 { margin-left: 16.66666667%; } .col-md-offset-1 { margin-left: 8.33333333%; } .col-md-offset-0 { margin-left: 0%; } } @media (min-width: 1200px) { .col-lg-1, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-10, .col-lg-11, .col-lg-12 { float: left; } .col-lg-12 { width: 100%; } .col-lg-11 { width: 91.66666667%; } .col-lg-10 { width: 83.33333333%; } .col-lg-9 { width: 75%; } .col-lg-8 { width: 66.66666667%; } .col-lg-7 { width: 58.33333333%; } .col-lg-6 { width: 50%; } .col-lg-5 { width: 41.66666667%; } .col-lg-4 { width: 33.33333333%; } .col-lg-3 { width: 25%; } .col-lg-2 { width: 16.66666667%; } .col-lg-1 { width: 8.33333333%; } .col-lg-pull-12 { right: 100%; } .col-lg-pull-11 { right: 91.66666667%; } .col-lg-pull-10 { right: 83.33333333%; } .col-lg-pull-9 { right: 75%; } .col-lg-pull-8 { right: 66.66666667%; } .col-lg-pull-7 { right: 58.33333333%; } .col-lg-pull-6 { right: 50%; } .col-lg-pull-5 { right: 41.66666667%; } .col-lg-pull-4 { right: 33.33333333%; } .col-lg-pull-3 { right: 25%; } .col-lg-pull-2 { right: 16.66666667%; } .col-lg-pull-1 { right: 8.33333333%; } .col-lg-pull-0 { right: auto; } .col-lg-push-12 { left: 100%; } .col-lg-push-11 { left: 91.66666667%; } .col-lg-push-10 { left: 83.33333333%; } .col-lg-push-9 { left: 75%; } .col-lg-push-8 { left: 66.66666667%; } .col-lg-push-7 { left: 58.33333333%; } .col-lg-push-6 { left: 50%; } .col-lg-push-5 { left: 41.66666667%; } .col-lg-push-4 { left: 33.33333333%; } .col-lg-push-3 { left: 25%; } .col-lg-push-2 { left: 16.66666667%; } .col-lg-push-1 { left: 8.33333333%; } .col-lg-push-0 { left: auto; } .col-lg-offset-12 { margin-left: 100%; } .col-lg-offset-11 { margin-left: 91.66666667%; } .col-lg-offset-10 { margin-left: 83.33333333%; } .col-lg-offset-9 { margin-left: 75%; } .col-lg-offset-8 { margin-left: 66.66666667%; } .col-lg-offset-7 { margin-left: 58.33333333%; } .col-lg-offset-6 { margin-left: 50%; } .col-lg-offset-5 { margin-left: 41.66666667%; } .col-lg-offset-4 { margin-left: 33.33333333%; } .col-lg-offset-3 { margin-left: 25%; } .col-lg-offset-2 { margin-left: 16.66666667%; } .col-lg-offset-1 { margin-left: 8.33333333%; } .col-lg-offset-0 { margin-left: 0%; } } table { background-color: transparent; } caption { padding-top: 8px; padding-bottom: 8px; color: #777777; text-align: left; } th { text-align: left; } .table { width: 100%; max-width: 100%; margin-bottom: 18px; } .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td { padding: 8px; line-height: 1.42857143; vertical-align: top; border-top: 1px solid #ddd; } .table > thead > tr > th { vertical-align: bottom; border-bottom: 2px solid #ddd; } .table > caption + thead > tr:first-child > th, .table > colgroup + thead > tr:first-child > th, .table > thead:first-child > tr:first-child > th, .table > caption + thead > tr:first-child > td, .table > colgroup + thead > tr:first-child > td, .table > thead:first-child > tr:first-child > td { border-top: 0; } .table > tbody + tbody { border-top: 2px solid #ddd; } .table .table { background-color: #fff; } .table-condensed > thead > tr > th, .table-condensed > tbody > tr > th, .table-condensed > tfoot > tr > th, .table-condensed > thead > tr > td, .table-condensed > tbody > tr > td, .table-condensed > tfoot > tr > td { padding: 5px; } .table-bordered { border: 1px solid #ddd; } .table-bordered > thead > tr > th, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > tbody > tr > td, .table-bordered > tfoot > tr > td { border: 1px solid #ddd; } .table-bordered > thead > tr > th, .table-bordered > thead > tr > td { border-bottom-width: 2px; } .table-striped > tbody > tr:nth-of-type(odd) { background-color: #f9f9f9; } .table-hover > tbody > tr:hover { background-color: #f5f5f5; } table col[class*=\"col-\"] { position: static; float: none; display: table-column; } table td[class*=\"col-\"], table th[class*=\"col-\"] { position: static; float: none; display: table-cell; } .table > thead > tr > td.active, .table > tbody > tr > td.active, .table > tfoot > tr > td.active, .table > thead > tr > th.active, .table > tbody > tr > th.active, .table > tfoot > tr > th.active, .table > thead > tr.active > td, .table > tbody > tr.active > td, .table > tfoot > tr.active > td, .table > thead > tr.active > th, .table > tbody > tr.active > th, .table > tfoot > tr.active > th { background-color: #f5f5f5; } .table-hover > tbody > tr > td.active:hover, .table-hover > tbody > tr > th.active:hover, .table-hover > tbody > tr.active:hover > td, .table-hover > tbody > tr:hover > .active, .table-hover > tbody > tr.active:hover > th { background-color: #e8e8e8; } .table > thead > tr > td.success, .table > tbody > tr > td.success, .table > tfoot > tr > td.success, .table > thead > tr > th.success, .table > tbody > tr > th.success, .table > tfoot > tr > th.success, .table > thead > tr.success > td, .table > tbody > tr.success > td, .table > tfoot > tr.success > td, .table > thead > tr.success > th, .table > tbody > tr.success > th, .table > tfoot > tr.success > th { background-color: #dff0d8; } .table-hover > tbody > tr > td.success:hover, .table-hover > tbody > tr > th.success:hover, .table-hover > tbody > tr.success:hover > td, .table-hover > tbody > tr:hover > .success, .table-hover > tbody > tr.success:hover > th { background-color: #d0e9c6; } .table > thead > tr > td.info, .table > tbody > tr > td.info, .table > tfoot > tr > td.info, .table > thead > tr > th.info, .table > tbody > tr > th.info, .table > tfoot > tr > th.info, .table > thead > tr.info > td, .table > tbody > tr.info > td, .table > tfoot > tr.info > td, .table > thead > tr.info > th, .table > tbody > tr.info > th, .table > tfoot > tr.info > th { background-color: #d9edf7; } .table-hover > tbody > tr > td.info:hover, .table-hover > tbody > tr > th.info:hover, .table-hover > tbody > tr.info:hover > td, .table-hover > tbody > tr:hover > .info, .table-hover > tbody > tr.info:hover > th { background-color: #c4e3f3; } .table > thead > tr > td.warning, .table > tbody > tr > td.warning, .table > tfoot > tr > td.warning, .table > thead > tr > th.warning, .table > tbody > tr > th.warning, .table > tfoot > tr > th.warning, .table > thead > tr.warning > td, .table > tbody > tr.warning > td, .table > tfoot > tr.warning > td, .table > thead > tr.warning > th, .table > tbody > tr.warning > th, .table > tfoot > tr.warning > th { background-color: #fcf8e3; } .table-hover > tbody > tr > td.warning:hover, .table-hover > tbody > tr > th.warning:hover, .table-hover > tbody > tr.warning:hover > td, .table-hover > tbody > tr:hover > .warning, .table-hover > tbody > tr.warning:hover > th { background-color: #faf2cc; } .table > thead > tr > td.danger, .table > tbody > tr > td.danger, .table > tfoot > tr > td.danger, .table > thead > tr > th.danger, .table > tbody > tr > th.danger, .table > tfoot > tr > th.danger, .table > thead > tr.danger > td, .table > tbody > tr.danger > td, .table > tfoot > tr.danger > td, .table > thead > tr.danger > th, .table > tbody > tr.danger > th, .table > tfoot > tr.danger > th { background-color: #f2dede; } .table-hover > tbody > tr > td.danger:hover, .table-hover > tbody > tr > th.danger:hover, .table-hover > tbody > tr.danger:hover > td, .table-hover > tbody > tr:hover > .danger, .table-hover > tbody > tr.danger:hover > th { background-color: #ebcccc; } .table-responsive { overflow-x: auto; min-height: 0.01%; } @media screen and (max-width: 767px) { .table-responsive { width: 100%; margin-bottom: 13.5px; overflow-y: hidden; -ms-overflow-style: -ms-autohiding-scrollbar; border: 1px solid #ddd; } .table-responsive > .table { margin-bottom: 0; } .table-responsive > .table > thead > tr > th, .table-responsive > .table > tbody > tr > th, .table-responsive > .table > tfoot > tr > th, .table-responsive > .table > thead > tr > td, .table-responsive > .table > tbody > tr > td, .table-responsive > .table > tfoot > tr > td { white-space: nowrap; } .table-responsive > .table-bordered { border: 0; } .table-responsive > .table-bordered > thead > tr > th:first-child, .table-responsive > .table-bordered > tbody > tr > th:first-child, .table-responsive > .table-bordered > tfoot > tr > th:first-child, .table-responsive > .table-bordered > thead > tr > td:first-child, .table-responsive > .table-bordered > tbody > tr > td:first-child, .table-responsive > .table-bordered > tfoot > tr > td:first-child { border-left: 0; } .table-responsive > .table-bordered > thead > tr > th:last-child, .table-responsive > .table-bordered > tbody > tr > th:last-child, .table-responsive > .table-bordered > tfoot > tr > th:last-child, .table-responsive > .table-bordered > thead > tr > td:last-child, .table-responsive > .table-bordered > tbody > tr > td:last-child, .table-responsive > .table-bordered > tfoot > tr > td:last-child { border-right: 0; } .table-responsive > .table-bordered > tbody > tr:last-child > th, .table-responsive > .table-bordered > tfoot > tr:last-child > th, .table-responsive > .table-bordered > tbody > tr:last-child > td, .table-responsive > .table-bordered > tfoot > tr:last-child > td { border-bottom: 0; } } fieldset { padding: 0; margin: 0; border: 0; min-width: 0; } legend { display: block; width: 100%; padding: 0; margin-bottom: 18px; font-size: 19.5px; line-height: inherit; color: #333333; border: 0; border-bottom: 1px solid #e5e5e5; } label { display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold; } input[type=\"search\"] { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; } input[type=\"radio\"], input[type=\"checkbox\"] { margin: 4px 0 0; margin-top: 1px \\9; line-height: normal; } input[type=\"file\"] { display: block; } input[type=\"range\"] { display: block; width: 100%; } select[multiple], select[size] { height: auto; } input[type=\"file\"]:focus, input[type=\"radio\"]:focus, input[type=\"checkbox\"]:focus { outline: 5px auto -webkit-focus-ring-color; outline-offset: -2px; } output { display: block; padding-top: 7px; font-size: 13px; line-height: 1.42857143; color: #555555; } .form-control { display: block; width: 100%; height: 32px; padding: 6px 12px; font-size: 13px; line-height: 1.42857143; color: #555555; background-color: #fff; background-image: none; border: 1px solid #ccc; border-radius: 2px; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; } .form-control:focus { border-color: #66afe9; outline: 0; -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6); box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6); } .form-control::-moz-placeholder { color: #999; opacity: 1; } .form-control:-ms-input-placeholder { color: #999; } .form-control::-webkit-input-placeholder { color: #999; } .form-control::-ms-expand { border: 0; background-color: transparent; } .form-control[disabled], .form-control[readonly], fieldset[disabled] .form-control { background-color: #eeeeee; opacity: 1; } .form-control[disabled], fieldset[disabled] .form-control { cursor: not-allowed; } textarea.form-control { height: auto; } input[type=\"search\"] { -webkit-appearance: none; } @media screen and (-webkit-min-device-pixel-ratio: 0) { input[type=\"date\"].form-control, input[type=\"time\"].form-control, input[type=\"datetime-local\"].form-control, input[type=\"month\"].form-control { line-height: 32px; } input[type=\"date\"].input-sm, input[type=\"time\"].input-sm, input[type=\"datetime-local\"].input-sm, input[type=\"month\"].input-sm, .input-group-sm input[type=\"date\"], .input-group-sm input[type=\"time\"], .input-group-sm input[type=\"datetime-local\"], .input-group-sm input[type=\"month\"] { line-height: 30px; } input[type=\"date\"].input-lg, input[type=\"time\"].input-lg, input[type=\"datetime-local\"].input-lg, input[type=\"month\"].input-lg, .input-group-lg input[type=\"date\"], .input-group-lg input[type=\"time\"], .input-group-lg input[type=\"datetime-local\"], .input-group-lg input[type=\"month\"] { line-height: 45px; } } .form-group { margin-bottom: 15px; } .radio, .checkbox { position: relative; display: block; margin-top: 10px; margin-bottom: 10px; } .radio label, .checkbox label { min-height: 18px; padding-left: 20px; margin-bottom: 0; font-weight: normal; cursor: pointer; } .radio input[type=\"radio\"], .radio-inline input[type=\"radio\"], .checkbox input[type=\"checkbox\"], .checkbox-inline input[type=\"checkbox\"] { position: absolute; margin-left: -20px; margin-top: 4px \\9; } .radio + .radio, .checkbox + .checkbox { margin-top: -5px; } .radio-inline, .checkbox-inline { position: relative; display: inline-block; padding-left: 20px; margin-bottom: 0; vertical-align: middle; font-weight: normal; cursor: pointer; } .radio-inline + .radio-inline, .checkbox-inline + .checkbox-inline { margin-top: 0; margin-left: 10px; } input[type=\"radio\"][disabled], input[type=\"checkbox\"][disabled], input[type=\"radio\"].disabled, input[type=\"checkbox\"].disabled, fieldset[disabled] input[type=\"radio\"], fieldset[disabled] input[type=\"checkbox\"] { cursor: not-allowed; } .radio-inline.disabled, .checkbox-inline.disabled, fieldset[disabled] .radio-inline, fieldset[disabled] .checkbox-inline { cursor: not-allowed; } .radio.disabled label, .checkbox.disabled label, fieldset[disabled] .radio label, fieldset[disabled] .checkbox label { cursor: not-allowed; } .form-control-static { padding-top: 7px; padding-bottom: 7px; margin-bottom: 0; min-height: 31px; } .form-control-static.input-lg, .form-control-static.input-sm { padding-left: 0; padding-right: 0; } .input-sm { height: 30px; padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 1px; } select.input-sm { height: 30px; line-height: 30px; } textarea.input-sm, select[multiple].input-sm { height: auto; } .form-group-sm .form-control { height: 30px; padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 1px; } .form-group-sm select.form-control { height: 30px; line-height: 30px; } .form-group-sm textarea.form-control, .form-group-sm select[multiple].form-control { height: auto; } .form-group-sm .form-control-static { height: 30px; min-height: 30px; padding: 6px 10px; font-size: 12px; line-height: 1.5; } .input-lg { height: 45px; padding: 10px 16px; font-size: 17px; line-height: 1.3333333; border-radius: 3px; } select.input-lg { height: 45px; line-height: 45px; } textarea.input-lg, select[multiple].input-lg { height: auto; } .form-group-lg .form-control { height: 45px; padding: 10px 16px; font-size: 17px; line-height: 1.3333333; border-radius: 3px; } .form-group-lg select.form-control { height: 45px; line-height: 45px; } .form-group-lg textarea.form-control, .form-group-lg select[multiple].form-control { height: auto; } .form-group-lg .form-control-static { height: 45px; min-height: 35px; padding: 11px 16px; font-size: 17px; line-height: 1.3333333; } .has-feedback { position: relative; } .has-feedback .form-control { padding-right: 40px; } .form-control-feedback { position: absolute; top: 0; right: 0; z-index: 2; display: block; width: 32px; height: 32px; line-height: 32px; text-align: center; pointer-events: none; } .input-lg + .form-control-feedback, .input-group-lg + .form-control-feedback, .form-group-lg .form-control + .form-control-feedback { width: 45px; height: 45px; line-height: 45px; } .input-sm + .form-control-feedback, .input-group-sm + .form-control-feedback, .form-group-sm .form-control + .form-control-feedback { width: 30px; height: 30px; line-height: 30px; } .has-success .help-block, .has-success .control-label, .has-success .radio, .has-success .checkbox, .has-success .radio-inline, .has-success .checkbox-inline, .has-success.radio label, .has-success.checkbox label, .has-success.radio-inline label, .has-success.checkbox-inline label { color: #3c763d; } .has-success .form-control { border-color: #3c763d; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); } .has-success .form-control:focus { border-color: #2b542c; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168; box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168; } .has-success .input-group-addon { color: #3c763d; border-color: #3c763d; background-color: #dff0d8; } .has-success .form-control-feedback { color: #3c763d; } .has-warning .help-block, .has-warning .control-label, .has-warning .radio, .has-warning .checkbox, .has-warning .radio-inline, .has-warning .checkbox-inline, .has-warning.radio label, .has-warning.checkbox label, .has-warning.radio-inline label, .has-warning.checkbox-inline label { color: #8a6d3b; } .has-warning .form-control { border-color: #8a6d3b; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); } .has-warning .form-control:focus { border-color: #66512c; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b; box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b; } .has-warning .input-group-addon { color: #8a6d3b; border-color: #8a6d3b; background-color: #fcf8e3; } .has-warning .form-control-feedback { color: #8a6d3b; } .has-error .help-block, .has-error .control-label, .has-error .radio, .has-error .checkbox, .has-error .radio-inline, .has-error .checkbox-inline, .has-error.radio label, .has-error.checkbox label, .has-error.radio-inline label, .has-error.checkbox-inline label { color: #a94442; } .has-error .form-control { border-color: #a94442; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); } .has-error .form-control:focus { border-color: #843534; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483; box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483; } .has-error .input-group-addon { color: #a94442; border-color: #a94442; background-color: #f2dede; } .has-error .form-control-feedback { color: #a94442; } .has-feedback label ~ .form-control-feedback { top: 23px; } .has-feedback label.sr-only ~ .form-control-feedback { top: 0; } .help-block { display: block; margin-top: 5px; margin-bottom: 10px; color: #404040; } @media (min-width: 768px) { .form-inline .form-group { display: inline-block; margin-bottom: 0; vertical-align: middle; } .form-inline .form-control { display: inline-block; width: auto; vertical-align: middle; } .form-inline .form-control-static { display: inline-block; } .form-inline .input-group { display: inline-table; vertical-align: middle; } .form-inline .input-group .input-group-addon, .form-inline .input-group .input-group-btn, .form-inline .input-group .form-control { width: auto; } .form-inline .input-group > .form-control { width: 100%; } .form-inline .control-label { margin-bottom: 0; vertical-align: middle; } .form-inline .radio, .form-inline .checkbox { display: inline-block; margin-top: 0; margin-bottom: 0; vertical-align: middle; } .form-inline .radio label, .form-inline .checkbox label { padding-left: 0; } .form-inline .radio input[type=\"radio\"], .form-inline .checkbox input[type=\"checkbox\"] { position: relative; margin-left: 0; } .form-inline .has-feedback .form-control-feedback { top: 0; } } .form-horizontal .radio, .form-horizontal .checkbox, .form-horizontal .radio-inline, .form-horizontal .checkbox-inline { margin-top: 0; margin-bottom: 0; padding-top: 7px; } .form-horizontal .radio, .form-horizontal .checkbox { min-height: 25px; } .form-horizontal .form-group { margin-left: 0px; margin-right: 0px; } @media (min-width: 768px) { .form-horizontal .control-label { text-align: right; margin-bottom: 0; padding-top: 7px; } } .form-horizontal .has-feedback .form-control-feedback { right: 0px; } @media (min-width: 768px) { .form-horizontal .form-group-lg .control-label { padding-top: 11px; font-size: 17px; } } @media (min-width: 768px) { .form-horizontal .form-group-sm .control-label { padding-top: 6px; font-size: 12px; } } .btn { display: inline-block; margin-bottom: 0; font-weight: normal; text-align: center; vertical-align: middle; touch-action: manipulation; cursor: pointer; background-image: none; border: 1px solid transparent; white-space: nowrap; padding: 6px 12px; font-size: 13px; line-height: 1.42857143; border-radius: 2px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .btn:focus, .btn:active:focus, .btn.active:focus, .btn.focus, .btn:active.focus, .btn.active.focus { outline: 5px auto -webkit-focus-ring-color; outline-offset: -2px; } .btn:hover, .btn:focus, .btn.focus { color: #333; text-decoration: none; } .btn:active, .btn.active { outline: 0; background-image: none; -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125); box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125); } .btn.disabled, .btn[disabled], fieldset[disabled] .btn { cursor: not-allowed; opacity: 0.65; filter: alpha(opacity=65); -webkit-box-shadow: none; box-shadow: none; } a.btn.disabled, fieldset[disabled] a.btn { pointer-events: none; } .btn-default { color: #333; background-color: #fff; border-color: #ccc; } .btn-default:focus, .btn-default.focus { color: #333; background-color: #e6e6e6; border-color: #8c8c8c; } .btn-default:hover { color: #333; background-color: #e6e6e6; border-color: #adadad; } .btn-default:active, .btn-default.active, .open > .dropdown-toggle.btn-default { color: #333; background-color: #e6e6e6; border-color: #adadad; } .btn-default:active:hover, .btn-default.active:hover, .open > .dropdown-toggle.btn-default:hover, .btn-default:active:focus, .btn-default.active:focus, .open > .dropdown-toggle.btn-default:focus, .btn-default:active.focus, .btn-default.active.focus, .open > .dropdown-toggle.btn-default.focus { color: #333; background-color: #d4d4d4; border-color: #8c8c8c; } .btn-default:active, .btn-default.active, .open > .dropdown-toggle.btn-default { background-image: none; } .btn-default.disabled:hover, .btn-default[disabled]:hover, fieldset[disabled] .btn-default:hover, .btn-default.disabled:focus, .btn-default[disabled]:focus, fieldset[disabled] .btn-default:focus, .btn-default.disabled.focus, .btn-default[disabled].focus, fieldset[disabled] .btn-default.focus { background-color: #fff; border-color: #ccc; } .btn-default .badge { color: #fff; background-color: #333; } .btn-primary { color: #fff; background-color: #337ab7; border-color: #2e6da4; } .btn-primary:focus, .btn-primary.focus { color: #fff; background-color: #286090; border-color: #122b40; } .btn-primary:hover { color: #fff; background-color: #286090; border-color: #204d74; } .btn-primary:active, .btn-primary.active, .open > .dropdown-toggle.btn-primary { color: #fff; background-color: #286090; border-color: #204d74; } .btn-primary:active:hover, .btn-primary.active:hover, .open > .dropdown-toggle.btn-primary:hover, .btn-primary:active:focus, .btn-primary.active:focus, .open > .dropdown-toggle.btn-primary:focus, .btn-primary:active.focus, .btn-primary.active.focus, .open > .dropdown-toggle.btn-primary.focus { color: #fff; background-color: #204d74; border-color: #122b40; } .btn-primary:active, .btn-primary.active, .open > .dropdown-toggle.btn-primary { background-image: none; } .btn-primary.disabled:hover, .btn-primary[disabled]:hover, fieldset[disabled] .btn-primary:hover, .btn-primary.disabled:focus, .btn-primary[disabled]:focus, fieldset[disabled] .btn-primary:focus, .btn-primary.disabled.focus, .btn-primary[disabled].focus, fieldset[disabled] .btn-primary.focus { background-color: #337ab7; border-color: #2e6da4; } .btn-primary .badge { color: #337ab7; background-color: #fff; } .btn-success { color: #fff; background-color: #5cb85c; border-color: #4cae4c; } .btn-success:focus, .btn-success.focus { color: #fff; background-color: #449d44; border-color: #255625; } .btn-success:hover { color: #fff; background-color: #449d44; border-color: #398439; } .btn-success:active, .btn-success.active, .open > .dropdown-toggle.btn-success { color: #fff; background-color: #449d44; border-color: #398439; } .btn-success:active:hover, .btn-success.active:hover, .open > .dropdown-toggle.btn-success:hover, .btn-success:active:focus, .btn-success.active:focus, .open > .dropdown-toggle.btn-success:focus, .btn-success:active.focus, .btn-success.active.focus, .open > .dropdown-toggle.btn-success.focus { color: #fff; background-color: #398439; border-color: #255625; } .btn-success:active, .btn-success.active, .open > .dropdown-toggle.btn-success { background-image: none; } .btn-success.disabled:hover, .btn-success[disabled]:hover, fieldset[disabled] .btn-success:hover, .btn-success.disabled:focus, .btn-success[disabled]:focus, fieldset[disabled] .btn-success:focus, .btn-success.disabled.focus, .btn-success[disabled].focus, fieldset[disabled] .btn-success.focus { background-color: #5cb85c; border-color: #4cae4c; } .btn-success .badge { color: #5cb85c; background-color: #fff; } .btn-info { color: #fff; background-color: #5bc0de; border-color: #46b8da; } .btn-info:focus, .btn-info.focus { color: #fff; background-color: #31b0d5; border-color: #1b6d85; } .btn-info:hover { color: #fff; background-color: #31b0d5; border-color: #269abc; } .btn-info:active, .btn-info.active, .open > .dropdown-toggle.btn-info { color: #fff; background-color: #31b0d5; border-color: #269abc; } .btn-info:active:hover, .btn-info.active:hover, .open > .dropdown-toggle.btn-info:hover, .btn-info:active:focus, .btn-info.active:focus, .open > .dropdown-toggle.btn-info:focus, .btn-info:active.focus, .btn-info.active.focus, .open > .dropdown-toggle.btn-info.focus { color: #fff; background-color: #269abc; border-color: #1b6d85; } .btn-info:active, .btn-info.active, .open > .dropdown-toggle.btn-info { background-image: none; } .btn-info.disabled:hover, .btn-info[disabled]:hover, fieldset[disabled] .btn-info:hover, .btn-info.disabled:focus, .btn-info[disabled]:focus, fieldset[disabled] .btn-info:focus, .btn-info.disabled.focus, .btn-info[disabled].focus, fieldset[disabled] .btn-info.focus { background-color: #5bc0de; border-color: #46b8da; } .btn-info .badge { color: #5bc0de; background-color: #fff; } .btn-warning { color: #fff; background-color: #f0ad4e; border-color: #eea236; } .btn-warning:focus, .btn-warning.focus { color: #fff; background-color: #ec971f; border-color: #985f0d; } .btn-warning:hover { color: #fff; background-color: #ec971f; border-color: #d58512; } .btn-warning:active, .btn-warning.active, .open > .dropdown-toggle.btn-warning { color: #fff; background-color: #ec971f; border-color: #d58512; } .btn-warning:active:hover, .btn-warning.active:hover, .open > .dropdown-toggle.btn-warning:hover, .btn-warning:active:focus, .btn-warning.active:focus, .open > .dropdown-toggle.btn-warning:focus, .btn-warning:active.focus, .btn-warning.active.focus, .open > .dropdown-toggle.btn-warning.focus { color: #fff; background-color: #d58512; border-color: #985f0d; } .btn-warning:active, .btn-warning.active, .open > .dropdown-toggle.btn-warning { background-image: none; } .btn-warning.disabled:hover, .btn-warning[disabled]:hover, fieldset[disabled] .btn-warning:hover, .btn-warning.disabled:focus, .btn-warning[disabled]:focus, fieldset[disabled] .btn-warning:focus, .btn-warning.disabled.focus, .btn-warning[disabled].focus, fieldset[disabled] .btn-warning.focus { background-color: #f0ad4e; border-color: #eea236; } .btn-warning .badge { color: #f0ad4e; background-color: #fff; } .btn-danger { color: #fff; background-color: #d9534f; border-color: #d43f3a; } .btn-danger:focus, .btn-danger.focus { color: #fff; background-color: #c9302c; border-color: #761c19; } .btn-danger:hover { color: #fff; background-color: #c9302c; border-color: #ac2925; } .btn-danger:active, .btn-danger.active, .open > .dropdown-toggle.btn-danger { color: #fff; background-color: #c9302c; border-color: #ac2925; } .btn-danger:active:hover, .btn-danger.active:hover, .open > .dropdown-toggle.btn-danger:hover, .btn-danger:active:focus, .btn-danger.active:focus, .open > .dropdown-toggle.btn-danger:focus, .btn-danger:active.focus, .btn-danger.active.focus, .open > .dropdown-toggle.btn-danger.focus { color: #fff; background-color: #ac2925; border-color: #761c19; } .btn-danger:active, .btn-danger.active, .open > .dropdown-toggle.btn-danger { background-image: none; } .btn-danger.disabled:hover, .btn-danger[disabled]:hover, fieldset[disabled] .btn-danger:hover, .btn-danger.disabled:focus, .btn-danger[disabled]:focus, fieldset[disabled] .btn-danger:focus, .btn-danger.disabled.focus, .btn-danger[disabled].focus, fieldset[disabled] .btn-danger.focus { background-color: #d9534f; border-color: #d43f3a; } .btn-danger .badge { color: #d9534f; background-color: #fff; } .btn-link { color: #337ab7; font-weight: normal; border-radius: 0; } .btn-link, .btn-link:active, .btn-link.active, .btn-link[disabled], fieldset[disabled] .btn-link { background-color: transparent; -webkit-box-shadow: none; box-shadow: none; } .btn-link, .btn-link:hover, .btn-link:focus, .btn-link:active { border-color: transparent; } .btn-link:hover, .btn-link:focus { color: #23527c; text-decoration: underline; background-color: transparent; } .btn-link[disabled]:hover, fieldset[disabled] .btn-link:hover, .btn-link[disabled]:focus, fieldset[disabled] .btn-link:focus { color: #777777; text-decoration: none; } .btn-lg, .btn-group-lg > .btn { padding: 10px 16px; font-size: 17px; line-height: 1.3333333; border-radius: 3px; } .btn-sm, .btn-group-sm > .btn { padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 1px; } .btn-xs, .btn-group-xs > .btn { padding: 1px 5px; font-size: 12px; line-height: 1.5; border-radius: 1px; } .btn-block { display: block; width: 100%; } .btn-block + .btn-block { margin-top: 5px; } input[type=\"submit\"].btn-block, input[type=\"reset\"].btn-block, input[type=\"button\"].btn-block { width: 100%; } .fade { opacity: 0; -webkit-transition: opacity 0.15s linear; -o-transition: opacity 0.15s linear; transition: opacity 0.15s linear; } .fade.in { opacity: 1; } .collapse { display: none; } .collapse.in { display: block; } tr.collapse.in { display: table-row; } tbody.collapse.in { display: table-row-group; } .collapsing { position: relative; height: 0; overflow: hidden; -webkit-transition-property: height, visibility; transition-property: height, visibility; -webkit-transition-duration: 0.35s; transition-duration: 0.35s; -webkit-transition-timing-function: ease; transition-timing-function: ease; } .caret { display: inline-block; width: 0; height: 0; margin-left: 2px; vertical-align: middle; border-top: 4px dashed; border-top: 4px solid \\9; border-right: 4px solid transparent; border-left: 4px solid transparent; } .dropup, .dropdown { position: relative; } .dropdown-toggle:focus { outline: 0; } .dropdown-menu { position: absolute; top: 100%; left: 0; z-index: 1000; display: none; float: left; min-width: 160px; padding: 5px 0; margin: 2px 0 0; list-style: none; font-size: 13px; text-align: left; background-color: #fff; border: 1px solid #ccc; border: 1px solid rgba(0, 0, 0, 0.15); border-radius: 2px; -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175); background-clip: padding-box; } .dropdown-menu.pull-right { right: 0; left: auto; } .dropdown-menu .divider { height: 1px; margin: 8px 0; overflow: hidden; background-color: #e5e5e5; } .dropdown-menu > li > a { display: block; padding: 3px 20px; clear: both; font-weight: normal; line-height: 1.42857143; color: #333333; white-space: nowrap; } .dropdown-menu > li > a:hover, .dropdown-menu > li > a:focus { text-decoration: none; color: #262626; background-color: #f5f5f5; } .dropdown-menu > .active > a, .dropdown-menu > .active > a:hover, .dropdown-menu > .active > a:focus { color: #fff; text-decoration: none; outline: 0; background-color: #337ab7; } .dropdown-menu > .disabled > a, .dropdown-menu > .disabled > a:hover, .dropdown-menu > .disabled > a:focus { color: #777777; } .dropdown-menu > .disabled > a:hover, .dropdown-menu > .disabled > a:focus { text-decoration: none; background-color: transparent; background-image: none; filter: progid:DXImageTransform.Microsoft.gradient(enabled = false); cursor: not-allowed; } .open > .dropdown-menu { display: block; } .open > a { outline: 0; } .dropdown-menu-right { left: auto; right: 0; } .dropdown-menu-left { left: 0; right: auto; } .dropdown-header { display: block; padding: 3px 20px; font-size: 12px; line-height: 1.42857143; color: #777777; white-space: nowrap; } .dropdown-backdrop { position: fixed; left: 0; right: 0; bottom: 0; top: 0; z-index: 990; } .pull-right > .dropdown-menu { right: 0; left: auto; } .dropup .caret, .navbar-fixed-bottom .dropdown .caret { border-top: 0; border-bottom: 4px dashed; border-bottom: 4px solid \\9; content: \"\"; } .dropup .dropdown-menu, .navbar-fixed-bottom .dropdown .dropdown-menu { top: auto; bottom: 100%; margin-bottom: 2px; } @media (min-width: 541px) { .navbar-right .dropdown-menu { left: auto; right: 0; } .navbar-right .dropdown-menu-left { left: 0; right: auto; } } .btn-group, .btn-group-vertical { position: relative; display: inline-block; vertical-align: middle; } .btn-group > .btn, .btn-group-vertical > .btn { position: relative; float: left; } .btn-group > .btn:hover, .btn-group-vertical > .btn:hover, .btn-group > .btn:focus, .btn-group-vertical > .btn:focus, .btn-group > .btn:active, .btn-group-vertical > .btn:active, .btn-group > .btn.active, .btn-group-vertical > .btn.active { z-index: 2; } .btn-group .btn + .btn, .btn-group .btn + .btn-group, .btn-group .btn-group + .btn, .btn-group .btn-group + .btn-group { margin-left: -1px; } .btn-toolbar { margin-left: -5px; } .btn-toolbar .btn, .btn-toolbar .btn-group, .btn-toolbar .input-group { float: left; } .btn-toolbar > .btn, .btn-toolbar > .btn-group, .btn-toolbar > .input-group { margin-left: 5px; } .btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) { border-radius: 0; } .btn-group > .btn:first-child { margin-left: 0; } .btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) { border-bottom-right-radius: 0; border-top-right-radius: 0; } .btn-group > .btn:last-child:not(:first-child), .btn-group > .dropdown-toggle:not(:first-child) { border-bottom-left-radius: 0; border-top-left-radius: 0; } .btn-group > .btn-group { float: left; } .btn-group > .btn-group:not(:first-child):not(:last-child) > .btn { border-radius: 0; } .btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child, .btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle { border-bottom-right-radius: 0; border-top-right-radius: 0; } .btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child { border-bottom-left-radius: 0; border-top-left-radius: 0; } .btn-group .dropdown-toggle:active, .btn-group.open .dropdown-toggle { outline: 0; } .btn-group > .btn + .dropdown-toggle { padding-left: 8px; padding-right: 8px; } .btn-group > .btn-lg + .dropdown-toggle { padding-left: 12px; padding-right: 12px; } .btn-group.open .dropdown-toggle { -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125); box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125); } .btn-group.open .dropdown-toggle.btn-link { -webkit-box-shadow: none; box-shadow: none; } .btn .caret { margin-left: 0; } .btn-lg .caret { border-width: 5px 5px 0; border-bottom-width: 0; } .dropup .btn-lg .caret { border-width: 0 5px 5px; } .btn-group-vertical > .btn, .btn-group-vertical > .btn-group, .btn-group-vertical > .btn-group > .btn { display: block; float: none; width: 100%; max-width: 100%; } .btn-group-vertical > .btn-group > .btn { float: none; } .btn-group-vertical > .btn + .btn, .btn-group-vertical > .btn + .btn-group, .btn-group-vertical > .btn-group + .btn, .btn-group-vertical > .btn-group + .btn-group { margin-top: -1px; margin-left: 0; } .btn-group-vertical > .btn:not(:first-child):not(:last-child) { border-radius: 0; } .btn-group-vertical > .btn:first-child:not(:last-child) { border-top-right-radius: 2px; border-top-left-radius: 2px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; } .btn-group-vertical > .btn:last-child:not(:first-child) { border-top-right-radius: 0; border-top-left-radius: 0; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; } .btn-group-vertical > .btn-group:not(:first-child):not(:last-child) > .btn { border-radius: 0; } .btn-group-vertical > .btn-group:first-child:not(:last-child) > .btn:last-child, .btn-group-vertical > .btn-group:first-child:not(:last-child) > .dropdown-toggle { border-bottom-right-radius: 0; border-bottom-left-radius: 0; } .btn-group-vertical > .btn-group:last-child:not(:first-child) > .btn:first-child { border-top-right-radius: 0; border-top-left-radius: 0; } .btn-group-justified { display: table; width: 100%; table-layout: fixed; border-collapse: separate; } .btn-group-justified > .btn, .btn-group-justified > .btn-group { float: none; display: table-cell; width: 1%; } .btn-group-justified > .btn-group .btn { width: 100%; } .btn-group-justified > .btn-group .dropdown-menu { left: auto; } [data-toggle=\"buttons\"] > .btn input[type=\"radio\"], [data-toggle=\"buttons\"] > .btn-group > .btn input[type=\"radio\"], [data-toggle=\"buttons\"] > .btn input[type=\"checkbox\"], [data-toggle=\"buttons\"] > .btn-group > .btn input[type=\"checkbox\"] { position: absolute; clip: rect(0, 0, 0, 0); pointer-events: none; } .input-group { position: relative; display: table; border-collapse: separate; } .input-group[class*=\"col-\"] { float: none; padding-left: 0; padding-right: 0; } .input-group .form-control { position: relative; z-index: 2; float: left; width: 100%; margin-bottom: 0; } .input-group .form-control:focus { z-index: 3; } .input-group-lg > .form-control, .input-group-lg > .input-group-addon, .input-group-lg > .input-group-btn > .btn { height: 45px; padding: 10px 16px; font-size: 17px; line-height: 1.3333333; border-radius: 3px; } select.input-group-lg > .form-control, select.input-group-lg > .input-group-addon, select.input-group-lg > .input-group-btn > .btn { height: 45px; line-height: 45px; } textarea.input-group-lg > .form-control, textarea.input-group-lg > .input-group-addon, textarea.input-group-lg > .input-group-btn > .btn, select[multiple].input-group-lg > .form-control, select[multiple].input-group-lg > .input-group-addon, select[multiple].input-group-lg > .input-group-btn > .btn { height: auto; } .input-group-sm > .form-control, .input-group-sm > .input-group-addon, .input-group-sm > .input-group-btn > .btn { height: 30px; padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 1px; } select.input-group-sm > .form-control, select.input-group-sm > .input-group-addon, select.input-group-sm > .input-group-btn > .btn { height: 30px; line-height: 30px; } textarea.input-group-sm > .form-control, textarea.input-group-sm > .input-group-addon, textarea.input-group-sm > .input-group-btn > .btn, select[multiple].input-group-sm > .form-control, select[multiple].input-group-sm > .input-group-addon, select[multiple].input-group-sm > .input-group-btn > .btn { height: auto; } .input-group-addon, .input-group-btn, .input-group .form-control { display: table-cell; } .input-group-addon:not(:first-child):not(:last-child), .input-group-btn:not(:first-child):not(:last-child), .input-group .form-control:not(:first-child):not(:last-child) { border-radius: 0; } .input-group-addon, .input-group-btn { width: 1%; white-space: nowrap; vertical-align: middle; } .input-group-addon { padding: 6px 12px; font-size: 13px; font-weight: normal; line-height: 1; color: #555555; text-align: center; background-color: #eeeeee; border: 1px solid #ccc; border-radius: 2px; } .input-group-addon.input-sm { padding: 5px 10px; font-size: 12px; border-radius: 1px; } .input-group-addon.input-lg { padding: 10px 16px; font-size: 17px; border-radius: 3px; } .input-group-addon input[type=\"radio\"], .input-group-addon input[type=\"checkbox\"] { margin-top: 0; } .input-group .form-control:first-child, .input-group-addon:first-child, .input-group-btn:first-child > .btn, .input-group-btn:first-child > .btn-group > .btn, .input-group-btn:first-child > .dropdown-toggle, .input-group-btn:last-child > .btn:not(:last-child):not(.dropdown-toggle), .input-group-btn:last-child > .btn-group:not(:last-child) > .btn { border-bottom-right-radius: 0; border-top-right-radius: 0; } .input-group-addon:first-child { border-right: 0; } .input-group .form-control:last-child, .input-group-addon:last-child, .input-group-btn:last-child > .btn, .input-group-btn:last-child > .btn-group > .btn, .input-group-btn:last-child > .dropdown-toggle, .input-group-btn:first-child > .btn:not(:first-child), .input-group-btn:first-child > .btn-group:not(:first-child) > .btn { border-bottom-left-radius: 0; border-top-left-radius: 0; } .input-group-addon:last-child { border-left: 0; } .input-group-btn { position: relative; font-size: 0; white-space: nowrap; } .input-group-btn > .btn { position: relative; } .input-group-btn > .btn + .btn { margin-left: -1px; } .input-group-btn > .btn:hover, .input-group-btn > .btn:focus, .input-group-btn > .btn:active { z-index: 2; } .input-group-btn:first-child > .btn, .input-group-btn:first-child > .btn-group { margin-right: -1px; } .input-group-btn:last-child > .btn, .input-group-btn:last-child > .btn-group { z-index: 2; margin-left: -1px; } .nav { margin-bottom: 0; padding-left: 0; list-style: none; } .nav > li { position: relative; display: block; } .nav > li > a { position: relative; display: block; padding: 10px 15px; } .nav > li > a:hover, .nav > li > a:focus { text-decoration: none; background-color: #eeeeee; } .nav > li.disabled > a { color: #777777; } .nav > li.disabled > a:hover, .nav > li.disabled > a:focus { color: #777777; text-decoration: none; background-color: transparent; cursor: not-allowed; } .nav .open > a, .nav .open > a:hover, .nav .open > a:focus { background-color: #eeeeee; border-color: #337ab7; } .nav .nav-divider { height: 1px; margin: 8px 0; overflow: hidden; background-color: #e5e5e5; } .nav > li > a > img { max-width: none; } .nav-tabs { border-bottom: 1px solid #ddd; } .nav-tabs > li { float: left; margin-bottom: -1px; } .nav-tabs > li > a { margin-right: 2px; line-height: 1.42857143; border: 1px solid transparent; border-radius: 2px 2px 0 0; } .nav-tabs > li > a:hover { border-color: #eeeeee #eeeeee #ddd; } .nav-tabs > li.active > a, .nav-tabs > li.active > a:hover, .nav-tabs > li.active > a:focus { color: #555555; background-color: #fff; border: 1px solid #ddd; border-bottom-color: transparent; cursor: default; } .nav-tabs.nav-justified { width: 100%; border-bottom: 0; } .nav-tabs.nav-justified > li { float: none; } .nav-tabs.nav-justified > li > a { text-align: center; margin-bottom: 5px; } .nav-tabs.nav-justified > .dropdown .dropdown-menu { top: auto; left: auto; } @media (min-width: 768px) { .nav-tabs.nav-justified > li { display: table-cell; width: 1%; } .nav-tabs.nav-justified > li > a { margin-bottom: 0; } } .nav-tabs.nav-justified > li > a { margin-right: 0; border-radius: 2px; } .nav-tabs.nav-justified > .active > a, .nav-tabs.nav-justified > .active > a:hover, .nav-tabs.nav-justified > .active > a:focus { border: 1px solid #ddd; } @media (min-width: 768px) { .nav-tabs.nav-justified > li > a { border-bottom: 1px solid #ddd; border-radius: 2px 2px 0 0; } .nav-tabs.nav-justified > .active > a, .nav-tabs.nav-justified > .active > a:hover, .nav-tabs.nav-justified > .active > a:focus { border-bottom-color: #fff; } } .nav-pills > li { float: left; } .nav-pills > li > a { border-radius: 2px; } .nav-pills > li + li { margin-left: 2px; } .nav-pills > li.active > a, .nav-pills > li.active > a:hover, .nav-pills > li.active > a:focus { color: #fff; background-color: #337ab7; } .nav-stacked > li { float: none; } .nav-stacked > li + li { margin-top: 2px; margin-left: 0; } .nav-justified { width: 100%; } .nav-justified > li { float: none; } .nav-justified > li > a { text-align: center; margin-bottom: 5px; } .nav-justified > .dropdown .dropdown-menu { top: auto; left: auto; } @media (min-width: 768px) { .nav-justified > li { display: table-cell; width: 1%; } .nav-justified > li > a { margin-bottom: 0; } } .nav-tabs-justified { border-bottom: 0; } .nav-tabs-justified > li > a { margin-right: 0; border-radius: 2px; } .nav-tabs-justified > .active > a, .nav-tabs-justified > .active > a:hover, .nav-tabs-justified > .active > a:focus { border: 1px solid #ddd; } @media (min-width: 768px) { .nav-tabs-justified > li > a { border-bottom: 1px solid #ddd; border-radius: 2px 2px 0 0; } .nav-tabs-justified > .active > a, .nav-tabs-justified > .active > a:hover, .nav-tabs-justified > .active > a:focus { border-bottom-color: #fff; } } .tab-content > .tab-pane { display: none; } .tab-content > .active { display: block; } .nav-tabs .dropdown-menu { margin-top: -1px; border-top-right-radius: 0; border-top-left-radius: 0; } .navbar { position: relative; min-height: 30px; margin-bottom: 18px; border: 1px solid transparent; } @media (min-width: 541px) { .navbar { border-radius: 2px; } } @media (min-width: 541px) { .navbar-header { float: left; } } .navbar-collapse { overflow-x: visible; padding-right: 0px; padding-left: 0px; border-top: 1px solid transparent; box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1); -webkit-overflow-scrolling: touch; } .navbar-collapse.in { overflow-y: auto; } @media (min-width: 541px) { .navbar-collapse { width: auto; border-top: 0; box-shadow: none; } .navbar-collapse.collapse { display: block !important; height: auto !important; padding-bottom: 0; overflow: visible !important; } .navbar-collapse.in { overflow-y: visible; } .navbar-fixed-top .navbar-collapse, .navbar-static-top .navbar-collapse, .navbar-fixed-bottom .navbar-collapse { padding-left: 0; padding-right: 0; } } .navbar-fixed-top .navbar-collapse, .navbar-fixed-bottom .navbar-collapse { max-height: 340px; } @media (max-device-width: 540px) and (orientation: landscape) { .navbar-fixed-top .navbar-collapse, .navbar-fixed-bottom .navbar-collapse { max-height: 200px; } } .container > .navbar-header, .container-fluid > .navbar-header, .container > .navbar-collapse, .container-fluid > .navbar-collapse { margin-right: 0px; margin-left: 0px; } @media (min-width: 541px) { .container > .navbar-header, .container-fluid > .navbar-header, .container > .navbar-collapse, .container-fluid > .navbar-collapse { margin-right: 0; margin-left: 0; } } .navbar-static-top { z-index: 1000; border-width: 0 0 1px; } @media (min-width: 541px) { .navbar-static-top { border-radius: 0; } } .navbar-fixed-top, .navbar-fixed-bottom { position: fixed; right: 0; left: 0; z-index: 1030; } @media (min-width: 541px) { .navbar-fixed-top, .navbar-fixed-bottom { border-radius: 0; } } .navbar-fixed-top { top: 0; border-width: 0 0 1px; } .navbar-fixed-bottom { bottom: 0; margin-bottom: 0; border-width: 1px 0 0; } .navbar-brand { float: left; padding: 6px 0px; font-size: 17px; line-height: 18px; height: 30px; } .navbar-brand:hover, .navbar-brand:focus { text-decoration: none; } .navbar-brand > img { display: block; } @media (min-width: 541px) { .navbar > .container .navbar-brand, .navbar > .container-fluid .navbar-brand { margin-left: 0px; } } .navbar-toggle { position: relative; float: right; margin-right: 0px; padding: 9px 10px; margin-top: -2px; margin-bottom: -2px; background-color: transparent; background-image: none; border: 1px solid transparent; border-radius: 2px; } .navbar-toggle:focus { outline: 0; } .navbar-toggle .icon-bar { display: block; width: 22px; height: 2px; border-radius: 1px; } .navbar-toggle .icon-bar + .icon-bar { margin-top: 4px; } @media (min-width: 541px) { .navbar-toggle { display: none; } } .navbar-nav { margin: 3px 0px; } .navbar-nav > li > a { padding-top: 10px; padding-bottom: 10px; line-height: 18px; } @media (max-width: 540px) { .navbar-nav .open .dropdown-menu { position: static; float: none; width: auto; margin-top: 0; background-color: transparent; border: 0; box-shadow: none; } .navbar-nav .open .dropdown-menu > li > a, .navbar-nav .open .dropdown-menu .dropdown-header { padding: 5px 15px 5px 25px; } .navbar-nav .open .dropdown-menu > li > a { line-height: 18px; } .navbar-nav .open .dropdown-menu > li > a:hover, .navbar-nav .open .dropdown-menu > li > a:focus { background-image: none; } } @media (min-width: 541px) { .navbar-nav { float: left; margin: 0; } .navbar-nav > li { float: left; } .navbar-nav > li > a { padding-top: 6px; padding-bottom: 6px; } } .navbar-form { margin-left: 0px; margin-right: 0px; padding: 10px 0px; border-top: 1px solid transparent; border-bottom: 1px solid transparent; -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1); box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1); margin-top: -1px; margin-bottom: -1px; } @media (min-width: 768px) { .navbar-form .form-group { display: inline-block; margin-bottom: 0; vertical-align: middle; } .navbar-form .form-control { display: inline-block; width: auto; vertical-align: middle; } .navbar-form .form-control-static { display: inline-block; } .navbar-form .input-group { display: inline-table; vertical-align: middle; } .navbar-form .input-group .input-group-addon, .navbar-form .input-group .input-group-btn, .navbar-form .input-group .form-control { width: auto; } .navbar-form .input-group > .form-control { width: 100%; } .navbar-form .control-label { margin-bottom: 0; vertical-align: middle; } .navbar-form .radio, .navbar-form .checkbox { display: inline-block; margin-top: 0; margin-bottom: 0; vertical-align: middle; } .navbar-form .radio label, .navbar-form .checkbox label { padding-left: 0; } .navbar-form .radio input[type=\"radio\"], .navbar-form .checkbox input[type=\"checkbox\"] { position: relative; margin-left: 0; } .navbar-form .has-feedback .form-control-feedback { top: 0; } } @media (max-width: 540px) { .navbar-form .form-group { margin-bottom: 5px; } .navbar-form .form-group:last-child { margin-bottom: 0; } } @media (min-width: 541px) { .navbar-form { width: auto; border: 0; margin-left: 0; margin-right: 0; padding-top: 0; padding-bottom: 0; -webkit-box-shadow: none; box-shadow: none; } } .navbar-nav > li > .dropdown-menu { margin-top: 0; border-top-right-radius: 0; border-top-left-radius: 0; } .navbar-fixed-bottom .navbar-nav > li > .dropdown-menu { margin-bottom: 0; border-top-right-radius: 2px; border-top-left-radius: 2px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; } .navbar-btn { margin-top: -1px; margin-bottom: -1px; } .navbar-btn.btn-sm { margin-top: 0px; margin-bottom: 0px; } .navbar-btn.btn-xs { margin-top: 4px; margin-bottom: 4px; } .navbar-text { margin-top: 6px; margin-bottom: 6px; } @media (min-width: 541px) { .navbar-text { float: left; margin-left: 0px; margin-right: 0px; } } @media (min-width: 541px) { .navbar-left { float: left !important; float: left; } .navbar-right { float: right !important; float: right; margin-right: 0px; } .navbar-right ~ .navbar-right { margin-right: 0; } } .navbar-default { background-color: #f8f8f8; border-color: #e7e7e7; } .navbar-default .navbar-brand { color: #777; } .navbar-default .navbar-brand:hover, .navbar-default .navbar-brand:focus { color: #5e5e5e; background-color: transparent; } .navbar-default .navbar-text { color: #777; } .navbar-default .navbar-nav > li > a { color: #777; } .navbar-default .navbar-nav > li > a:hover, .navbar-default .navbar-nav > li > a:focus { color: #333; background-color: transparent; } .navbar-default .navbar-nav > .active > a, .navbar-default .navbar-nav > .active > a:hover, .navbar-default .navbar-nav > .active > a:focus { color: #555; background-color: #e7e7e7; } .navbar-default .navbar-nav > .disabled > a, .navbar-default .navbar-nav > .disabled > a:hover, .navbar-default .navbar-nav > .disabled > a:focus { color: #ccc; background-color: transparent; } .navbar-default .navbar-toggle { border-color: #ddd; } .navbar-default .navbar-toggle:hover, .navbar-default .navbar-toggle:focus { background-color: #ddd; } .navbar-default .navbar-toggle .icon-bar { background-color: #888; } .navbar-default .navbar-collapse, .navbar-default .navbar-form { border-color: #e7e7e7; } .navbar-default .navbar-nav > .open > a, .navbar-default .navbar-nav > .open > a:hover, .navbar-default .navbar-nav > .open > a:focus { background-color: #e7e7e7; color: #555; } @media (max-width: 540px) { .navbar-default .navbar-nav .open .dropdown-menu > li > a { color: #777; } .navbar-default .navbar-nav .open .dropdown-menu > li > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > li > a:focus { color: #333; background-color: transparent; } .navbar-default .navbar-nav .open .dropdown-menu > .active > a, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:focus { color: #555; background-color: #e7e7e7; } .navbar-default .navbar-nav .open .dropdown-menu > .disabled > a, .navbar-default .navbar-nav .open .dropdown-menu > .disabled > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > .disabled > a:focus { color: #ccc; background-color: transparent; } } .navbar-default .navbar-link { color: #777; } .navbar-default .navbar-link:hover { color: #333; } .navbar-default .btn-link { color: #777; } .navbar-default .btn-link:hover, .navbar-default .btn-link:focus { color: #333; } .navbar-default .btn-link[disabled]:hover, fieldset[disabled] .navbar-default .btn-link:hover, .navbar-default .btn-link[disabled]:focus, fieldset[disabled] .navbar-default .btn-link:focus { color: #ccc; } .navbar-inverse { background-color: #222; border-color: #080808; } .navbar-inverse .navbar-brand { color: #9d9d9d; } .navbar-inverse .navbar-brand:hover, .navbar-inverse .navbar-brand:focus { color: #fff; background-color: transparent; } .navbar-inverse .navbar-text { color: #9d9d9d; } .navbar-inverse .navbar-nav > li > a { color: #9d9d9d; } .navbar-inverse .navbar-nav > li > a:hover, .navbar-inverse .navbar-nav > li > a:focus { color: #fff; background-color: transparent; } .navbar-inverse .navbar-nav > .active > a, .navbar-inverse .navbar-nav > .active > a:hover, .navbar-inverse .navbar-nav > .active > a:focus { color: #fff; background-color: #080808; } .navbar-inverse .navbar-nav > .disabled > a, .navbar-inverse .navbar-nav > .disabled > a:hover, .navbar-inverse .navbar-nav > .disabled > a:focus { color: #444; background-color: transparent; } .navbar-inverse .navbar-toggle { border-color: #333; } .navbar-inverse .navbar-toggle:hover, .navbar-inverse .navbar-toggle:focus { background-color: #333; } .navbar-inverse .navbar-toggle .icon-bar { background-color: #fff; } .navbar-inverse .navbar-collapse, .navbar-inverse .navbar-form { border-color: #101010; } .navbar-inverse .navbar-nav > .open > a, .navbar-inverse .navbar-nav > .open > a:hover, .navbar-inverse .navbar-nav > .open > a:focus { background-color: #080808; color: #fff; } @media (max-width: 540px) { .navbar-inverse .navbar-nav .open .dropdown-menu > .dropdown-header { border-color: #080808; } .navbar-inverse .navbar-nav .open .dropdown-menu .divider { background-color: #080808; } .navbar-inverse .navbar-nav .open .dropdown-menu > li > a { color: #9d9d9d; } .navbar-inverse .navbar-nav .open .dropdown-menu > li > a:hover, .navbar-inverse .navbar-nav .open .dropdown-menu > li > a:focus { color: #fff; background-color: transparent; } .navbar-inverse .navbar-nav .open .dropdown-menu > .active > a, .navbar-inverse .navbar-nav .open .dropdown-menu > .active > a:hover, .navbar-inverse .navbar-nav .open .dropdown-menu > .active > a:focus { color: #fff; background-color: #080808; } .navbar-inverse .navbar-nav .open .dropdown-menu > .disabled > a, .navbar-inverse .navbar-nav .open .dropdown-menu > .disabled > a:hover, .navbar-inverse .navbar-nav .open .dropdown-menu > .disabled > a:focus { color: #444; background-color: transparent; } } .navbar-inverse .navbar-link { color: #9d9d9d; } .navbar-inverse .navbar-link:hover { color: #fff; } .navbar-inverse .btn-link { color: #9d9d9d; } .navbar-inverse .btn-link:hover, .navbar-inverse .btn-link:focus { color: #fff; } .navbar-inverse .btn-link[disabled]:hover, fieldset[disabled] .navbar-inverse .btn-link:hover, .navbar-inverse .btn-link[disabled]:focus, fieldset[disabled] .navbar-inverse .btn-link:focus { color: #444; } .breadcrumb { padding: 8px 15px; margin-bottom: 18px; list-style: none; background-color: #f5f5f5; border-radius: 2px; } .breadcrumb > li { display: inline-block; } .breadcrumb > li + li:before { content: \"/\\00a0\"; padding: 0 5px; color: #5e5e5e; } .breadcrumb > .active { color: #777777; } .pagination { display: inline-block; padding-left: 0; margin: 18px 0; border-radius: 2px; } .pagination > li { display: inline; } .pagination > li > a, .pagination > li > span { position: relative; float: left; padding: 6px 12px; line-height: 1.42857143; text-decoration: none; color: #337ab7; background-color: #fff; border: 1px solid #ddd; margin-left: -1px; } .pagination > li:first-child > a, .pagination > li:first-child > span { margin-left: 0; border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .pagination > li:last-child > a, .pagination > li:last-child > span { border-bottom-right-radius: 2px; border-top-right-radius: 2px; } .pagination > li > a:hover, .pagination > li > span:hover, .pagination > li > a:focus, .pagination > li > span:focus { z-index: 2; color: #23527c; background-color: #eeeeee; border-color: #ddd; } .pagination > .active > a, .pagination > .active > span, .pagination > .active > a:hover, .pagination > .active > span:hover, .pagination > .active > a:focus, .pagination > .active > span:focus { z-index: 3; color: #fff; background-color: #337ab7; border-color: #337ab7; cursor: default; } .pagination > .disabled > span, .pagination > .disabled > span:hover, .pagination > .disabled > span:focus, .pagination > .disabled > a, .pagination > .disabled > a:hover, .pagination > .disabled > a:focus { color: #777777; background-color: #fff; border-color: #ddd; cursor: not-allowed; } .pagination-lg > li > a, .pagination-lg > li > span { padding: 10px 16px; font-size: 17px; line-height: 1.3333333; } .pagination-lg > li:first-child > a, .pagination-lg > li:first-child > span { border-bottom-left-radius: 3px; border-top-left-radius: 3px; } .pagination-lg > li:last-child > a, .pagination-lg > li:last-child > span { border-bottom-right-radius: 3px; border-top-right-radius: 3px; } .pagination-sm > li > a, .pagination-sm > li > span { padding: 5px 10px; font-size: 12px; line-height: 1.5; } .pagination-sm > li:first-child > a, .pagination-sm > li:first-child > span { border-bottom-left-radius: 1px; border-top-left-radius: 1px; } .pagination-sm > li:last-child > a, .pagination-sm > li:last-child > span { border-bottom-right-radius: 1px; border-top-right-radius: 1px; } .pager { padding-left: 0; margin: 18px 0; list-style: none; text-align: center; } .pager li { display: inline; } .pager li > a, .pager li > span { display: inline-block; padding: 5px 14px; background-color: #fff; border: 1px solid #ddd; border-radius: 15px; } .pager li > a:hover, .pager li > a:focus { text-decoration: none; background-color: #eeeeee; } .pager .next > a, .pager .next > span { float: right; } .pager .previous > a, .pager .previous > span { float: left; } .pager .disabled > a, .pager .disabled > a:hover, .pager .disabled > a:focus, .pager .disabled > span { color: #777777; background-color: #fff; cursor: not-allowed; } .label { display: inline; padding: .2em .6em .3em; font-size: 75%; font-weight: bold; line-height: 1; color: #fff; text-align: center; white-space: nowrap; vertical-align: baseline; border-radius: .25em; } a.label:hover, a.label:focus { color: #fff; text-decoration: none; cursor: pointer; } .label:empty { display: none; } .btn .label { position: relative; top: -1px; } .label-default { background-color: #777777; } .label-default[href]:hover, .label-default[href]:focus { background-color: #5e5e5e; } .label-primary { background-color: #337ab7; } .label-primary[href]:hover, .label-primary[href]:focus { background-color: #286090; } .label-success { background-color: #5cb85c; } .label-success[href]:hover, .label-success[href]:focus { background-color: #449d44; } .label-info { background-color: #5bc0de; } .label-info[href]:hover, .label-info[href]:focus { background-color: #31b0d5; } .label-warning { background-color: #f0ad4e; } .label-warning[href]:hover, .label-warning[href]:focus { background-color: #ec971f; } .label-danger { background-color: #d9534f; } .label-danger[href]:hover, .label-danger[href]:focus { background-color: #c9302c; } .badge { display: inline-block; min-width: 10px; padding: 3px 7px; font-size: 12px; font-weight: bold; color: #fff; line-height: 1; vertical-align: middle; white-space: nowrap; text-align: center; background-color: #777777; border-radius: 10px; } .badge:empty { display: none; } .btn .badge { position: relative; top: -1px; } .btn-xs .badge, .btn-group-xs > .btn .badge { top: 0; padding: 1px 5px; } a.badge:hover, a.badge:focus { color: #fff; text-decoration: none; cursor: pointer; } .list-group-item.active > .badge, .nav-pills > .active > a > .badge { color: #337ab7; background-color: #fff; } .list-group-item > .badge { float: right; } .list-group-item > .badge + .badge { margin-right: 5px; } .nav-pills > li > a > .badge { margin-left: 3px; } .jumbotron { padding-top: 30px; padding-bottom: 30px; margin-bottom: 30px; color: inherit; background-color: #eeeeee; } .jumbotron h1, .jumbotron .h1 { color: inherit; } .jumbotron p { margin-bottom: 15px; font-size: 20px; font-weight: 200; } .jumbotron > hr { border-top-color: #d5d5d5; } .container .jumbotron, .container-fluid .jumbotron { border-radius: 3px; padding-left: 0px; padding-right: 0px; } .jumbotron .container { max-width: 100%; } @media screen and (min-width: 768px) { .jumbotron { padding-top: 48px; padding-bottom: 48px; } .container .jumbotron, .container-fluid .jumbotron { padding-left: 60px; padding-right: 60px; } .jumbotron h1, .jumbotron .h1 { font-size: 59px; } } .thumbnail { display: block; padding: 4px; margin-bottom: 18px; line-height: 1.42857143; background-color: #fff; border: 1px solid #ddd; border-radius: 2px; -webkit-transition: border 0.2s ease-in-out; -o-transition: border 0.2s ease-in-out; transition: border 0.2s ease-in-out; } .thumbnail > img, .thumbnail a > img { margin-left: auto; margin-right: auto; } a.thumbnail:hover, a.thumbnail:focus, a.thumbnail.active { border-color: #337ab7; } .thumbnail .caption { padding: 9px; color: #000; } .alert { padding: 15px; margin-bottom: 18px; border: 1px solid transparent; border-radius: 2px; } .alert h4 { margin-top: 0; color: inherit; } .alert .alert-link { font-weight: bold; } .alert > p, .alert > ul { margin-bottom: 0; } .alert > p + p { margin-top: 5px; } .alert-dismissable, .alert-dismissible { padding-right: 35px; } .alert-dismissable .close, .alert-dismissible .close { position: relative; top: -2px; right: -21px; color: inherit; } .alert-success { background-color: #dff0d8; border-color: #d6e9c6; color: #3c763d; } .alert-success hr { border-top-color: #c9e2b3; } .alert-success .alert-link { color: #2b542c; } .alert-info { background-color: #d9edf7; border-color: #bce8f1; color: #31708f; } .alert-info hr { border-top-color: #a6e1ec; } .alert-info .alert-link { color: #245269; } .alert-warning { background-color: #fcf8e3; border-color: #faebcc; color: #8a6d3b; } .alert-warning hr { border-top-color: #f7e1b5; } .alert-warning .alert-link { color: #66512c; } .alert-danger { background-color: #f2dede; border-color: #ebccd1; color: #a94442; } .alert-danger hr { border-top-color: #e4b9c0; } .alert-danger .alert-link { color: #843534; } @-webkit-keyframes progress-bar-stripes { from { background-position: 40px 0; } to { background-position: 0 0; } } @keyframes progress-bar-stripes { from { background-position: 40px 0; } to { background-position: 0 0; } } .progress { overflow: hidden; height: 18px; margin-bottom: 18px; background-color: #f5f5f5; border-radius: 2px; -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1); box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1); } .progress-bar { float: left; width: 0%; height: 100%; font-size: 12px; line-height: 18px; color: #fff; text-align: center; background-color: #337ab7; -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15); box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15); -webkit-transition: width 0.6s ease; -o-transition: width 0.6s ease; transition: width 0.6s ease; } .progress-striped .progress-bar, .progress-bar-striped { background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-size: 40px 40px; } .progress.active .progress-bar, .progress-bar.active { -webkit-animation: progress-bar-stripes 2s linear infinite; -o-animation: progress-bar-stripes 2s linear infinite; animation: progress-bar-stripes 2s linear infinite; } .progress-bar-success { background-color: #5cb85c; } .progress-striped .progress-bar-success { background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); } .progress-bar-info { background-color: #5bc0de; } .progress-striped .progress-bar-info { background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); } .progress-bar-warning { background-color: #f0ad4e; } .progress-striped .progress-bar-warning { background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); } .progress-bar-danger { background-color: #d9534f; } .progress-striped .progress-bar-danger { background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); } .media { margin-top: 15px; } .media:first-child { margin-top: 0; } .media, .media-body { zoom: 1; overflow: hidden; } .media-body { width: 10000px; } .media-object { display: block; } .media-object.img-thumbnail { max-width: none; } .media-right, .media > .pull-right { padding-left: 10px; } .media-left, .media > .pull-left { padding-right: 10px; } .media-left, .media-right, .media-body { display: table-cell; vertical-align: top; } .media-middle { vertical-align: middle; } .media-bottom { vertical-align: bottom; } .media-heading { margin-top: 0; margin-bottom: 5px; } .media-list { padding-left: 0; list-style: none; } .list-group { margin-bottom: 20px; padding-left: 0; } .list-group-item { position: relative; display: block; padding: 10px 15px; margin-bottom: -1px; background-color: #fff; border: 1px solid #ddd; } .list-group-item:first-child { border-top-right-radius: 2px; border-top-left-radius: 2px; } .list-group-item:last-child { margin-bottom: 0; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; } a.list-group-item, button.list-group-item { color: #555; } a.list-group-item .list-group-item-heading, button.list-group-item .list-group-item-heading { color: #333; } a.list-group-item:hover, button.list-group-item:hover, a.list-group-item:focus, button.list-group-item:focus { text-decoration: none; color: #555; background-color: #f5f5f5; } button.list-group-item { width: 100%; text-align: left; } .list-group-item.disabled, .list-group-item.disabled:hover, .list-group-item.disabled:focus { background-color: #eeeeee; color: #777777; cursor: not-allowed; } .list-group-item.disabled .list-group-item-heading, .list-group-item.disabled:hover .list-group-item-heading, .list-group-item.disabled:focus .list-group-item-heading { color: inherit; } .list-group-item.disabled .list-group-item-text, .list-group-item.disabled:hover .list-group-item-text, .list-group-item.disabled:focus .list-group-item-text { color: #777777; } .list-group-item.active, .list-group-item.active:hover, .list-group-item.active:focus { z-index: 2; color: #fff; background-color: #337ab7; border-color: #337ab7; } .list-group-item.active .list-group-item-heading, .list-group-item.active:hover .list-group-item-heading, .list-group-item.active:focus .list-group-item-heading, .list-group-item.active .list-group-item-heading > small, .list-group-item.active:hover .list-group-item-heading > small, .list-group-item.active:focus .list-group-item-heading > small, .list-group-item.active .list-group-item-heading > .small, .list-group-item.active:hover .list-group-item-heading > .small, .list-group-item.active:focus .list-group-item-heading > .small { color: inherit; } .list-group-item.active .list-group-item-text, .list-group-item.active:hover .list-group-item-text, .list-group-item.active:focus .list-group-item-text { color: #c7ddef; } .list-group-item-success { color: #3c763d; background-color: #dff0d8; } a.list-group-item-success, button.list-group-item-success { color: #3c763d; } a.list-group-item-success .list-group-item-heading, button.list-group-item-success .list-group-item-heading { color: inherit; } a.list-group-item-success:hover, button.list-group-item-success:hover, a.list-group-item-success:focus, button.list-group-item-success:focus { color: #3c763d; background-color: #d0e9c6; } a.list-group-item-success.active, button.list-group-item-success.active, a.list-group-item-success.active:hover, button.list-group-item-success.active:hover, a.list-group-item-success.active:focus, button.list-group-item-success.active:focus { color: #fff; background-color: #3c763d; border-color: #3c763d; } .list-group-item-info { color: #31708f; background-color: #d9edf7; } a.list-group-item-info, button.list-group-item-info { color: #31708f; } a.list-group-item-info .list-group-item-heading, button.list-group-item-info .list-group-item-heading { color: inherit; } a.list-group-item-info:hover, button.list-group-item-info:hover, a.list-group-item-info:focus, button.list-group-item-info:focus { color: #31708f; background-color: #c4e3f3; } a.list-group-item-info.active, button.list-group-item-info.active, a.list-group-item-info.active:hover, button.list-group-item-info.active:hover, a.list-group-item-info.active:focus, button.list-group-item-info.active:focus { color: #fff; background-color: #31708f; border-color: #31708f; } .list-group-item-warning { color: #8a6d3b; background-color: #fcf8e3; } a.list-group-item-warning, button.list-group-item-warning { color: #8a6d3b; } a.list-group-item-warning .list-group-item-heading, button.list-group-item-warning .list-group-item-heading { color: inherit; } a.list-group-item-warning:hover, button.list-group-item-warning:hover, a.list-group-item-warning:focus, button.list-group-item-warning:focus { color: #8a6d3b; background-color: #faf2cc; } a.list-group-item-warning.active, button.list-group-item-warning.active, a.list-group-item-warning.active:hover, button.list-group-item-warning.active:hover, a.list-group-item-warning.active:focus, button.list-group-item-warning.active:focus { color: #fff; background-color: #8a6d3b; border-color: #8a6d3b; } .list-group-item-danger { color: #a94442; background-color: #f2dede; } a.list-group-item-danger, button.list-group-item-danger { color: #a94442; } a.list-group-item-danger .list-group-item-heading, button.list-group-item-danger .list-group-item-heading { color: inherit; } a.list-group-item-danger:hover, button.list-group-item-danger:hover, a.list-group-item-danger:focus, button.list-group-item-danger:focus { color: #a94442; background-color: #ebcccc; } a.list-group-item-danger.active, button.list-group-item-danger.active, a.list-group-item-danger.active:hover, button.list-group-item-danger.active:hover, a.list-group-item-danger.active:focus, button.list-group-item-danger.active:focus { color: #fff; background-color: #a94442; border-color: #a94442; } .list-group-item-heading { margin-top: 0; margin-bottom: 5px; } .list-group-item-text { margin-bottom: 0; line-height: 1.3; } .panel { margin-bottom: 18px; background-color: #fff; border: 1px solid transparent; border-radius: 2px; -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05); box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05); } .panel-body { padding: 15px; } .panel-heading { padding: 10px 15px; border-bottom: 1px solid transparent; border-top-right-radius: 1px; border-top-left-radius: 1px; } .panel-heading > .dropdown .dropdown-toggle { color: inherit; } .panel-title { margin-top: 0; margin-bottom: 0; font-size: 15px; color: inherit; } .panel-title > a, .panel-title > small, .panel-title > .small, .panel-title > small > a, .panel-title > .small > a { color: inherit; } .panel-footer { padding: 10px 15px; background-color: #f5f5f5; border-top: 1px solid #ddd; border-bottom-right-radius: 1px; border-bottom-left-radius: 1px; } .panel > .list-group, .panel > .panel-collapse > .list-group { margin-bottom: 0; } .panel > .list-group .list-group-item, .panel > .panel-collapse > .list-group .list-group-item { border-width: 1px 0; border-radius: 0; } .panel > .list-group:first-child .list-group-item:first-child, .panel > .panel-collapse > .list-group:first-child .list-group-item:first-child { border-top: 0; border-top-right-radius: 1px; border-top-left-radius: 1px; } .panel > .list-group:last-child .list-group-item:last-child, .panel > .panel-collapse > .list-group:last-child .list-group-item:last-child { border-bottom: 0; border-bottom-right-radius: 1px; border-bottom-left-radius: 1px; } .panel > .panel-heading + .panel-collapse > .list-group .list-group-item:first-child { border-top-right-radius: 0; border-top-left-radius: 0; } .panel-heading + .list-group .list-group-item:first-child { border-top-width: 0; } .list-group + .panel-footer { border-top-width: 0; } .panel > .table, .panel > .table-responsive > .table, .panel > .panel-collapse > .table { margin-bottom: 0; } .panel > .table caption, .panel > .table-responsive > .table caption, .panel > .panel-collapse > .table caption { padding-left: 15px; padding-right: 15px; } .panel > .table:first-child, .panel > .table-responsive:first-child > .table:first-child { border-top-right-radius: 1px; border-top-left-radius: 1px; } .panel > .table:first-child > thead:first-child > tr:first-child, .panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child, .panel > .table:first-child > tbody:first-child > tr:first-child, .panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child { border-top-left-radius: 1px; border-top-right-radius: 1px; } .panel > .table:first-child > thead:first-child > tr:first-child td:first-child, .panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child td:first-child, .panel > .table:first-child > tbody:first-child > tr:first-child td:first-child, .panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child td:first-child, .panel > .table:first-child > thead:first-child > tr:first-child th:first-child, .panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child th:first-child, .panel > .table:first-child > tbody:first-child > tr:first-child th:first-child, .panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child th:first-child { border-top-left-radius: 1px; } .panel > .table:first-child > thead:first-child > tr:first-child td:last-child, .panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child td:last-child, .panel > .table:first-child > tbody:first-child > tr:first-child td:last-child, .panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child td:last-child, .panel > .table:first-child > thead:first-child > tr:first-child th:last-child, .panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child th:last-child, .panel > .table:first-child > tbody:first-child > tr:first-child th:last-child, .panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child th:last-child { border-top-right-radius: 1px; } .panel > .table:last-child, .panel > .table-responsive:last-child > .table:last-child { border-bottom-right-radius: 1px; border-bottom-left-radius: 1px; } .panel > .table:last-child > tbody:last-child > tr:last-child, .panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child, .panel > .table:last-child > tfoot:last-child > tr:last-child, .panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child { border-bottom-left-radius: 1px; border-bottom-right-radius: 1px; } .panel > .table:last-child > tbody:last-child > tr:last-child td:first-child, .panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child td:first-child, .panel > .table:last-child > tfoot:last-child > tr:last-child td:first-child, .panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child td:first-child, .panel > .table:last-child > tbody:last-child > tr:last-child th:first-child, .panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child th:first-child, .panel > .table:last-child > tfoot:last-child > tr:last-child th:first-child, .panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child th:first-child { border-bottom-left-radius: 1px; } .panel > .table:last-child > tbody:last-child > tr:last-child td:last-child, .panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child td:last-child, .panel > .table:last-child > tfoot:last-child > tr:last-child td:last-child, .panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child td:last-child, .panel > .table:last-child > tbody:last-child > tr:last-child th:last-child, .panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child th:last-child, .panel > .table:last-child > tfoot:last-child > tr:last-child th:last-child, .panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child th:last-child { border-bottom-right-radius: 1px; } .panel > .panel-body + .table, .panel > .panel-body + .table-responsive, .panel > .table + .panel-body, .panel > .table-responsive + .panel-body { border-top: 1px solid #ddd; } .panel > .table > tbody:first-child > tr:first-child th, .panel > .table > tbody:first-child > tr:first-child td { border-top: 0; } .panel > .table-bordered, .panel > .table-responsive > .table-bordered { border: 0; } .panel > .table-bordered > thead > tr > th:first-child, .panel > .table-responsive > .table-bordered > thead > tr > th:first-child, .panel > .table-bordered > tbody > tr > th:first-child, .panel > .table-responsive > .table-bordered > tbody > tr > th:first-child, .panel > .table-bordered > tfoot > tr > th:first-child, .panel > .table-responsive > .table-bordered > tfoot > tr > th:first-child, .panel > .table-bordered > thead > tr > td:first-child, .panel > .table-responsive > .table-bordered > thead > tr > td:first-child, .panel > .table-bordered > tbody > tr > td:first-child, .panel > .table-responsive > .table-bordered > tbody > tr > td:first-child, .panel > .table-bordered > tfoot > tr > td:first-child, .panel > .table-responsive > .table-bordered > tfoot > tr > td:first-child { border-left: 0; } .panel > .table-bordered > thead > tr > th:last-child, .panel > .table-responsive > .table-bordered > thead > tr > th:last-child, .panel > .table-bordered > tbody > tr > th:last-child, .panel > .table-responsive > .table-bordered > tbody > tr > th:last-child, .panel > .table-bordered > tfoot > tr > th:last-child, .panel > .table-responsive > .table-bordered > tfoot > tr > th:last-child, .panel > .table-bordered > thead > tr > td:last-child, .panel > .table-responsive > .table-bordered > thead > tr > td:last-child, .panel > .table-bordered > tbody > tr > td:last-child, .panel > .table-responsive > .table-bordered > tbody > tr > td:last-child, .panel > .table-bordered > tfoot > tr > td:last-child, .panel > .table-responsive > .table-bordered > tfoot > tr > td:last-child { border-right: 0; } .panel > .table-bordered > thead > tr:first-child > td, .panel > .table-responsive > .table-bordered > thead > tr:first-child > td, .panel > .table-bordered > tbody > tr:first-child > td, .panel > .table-responsive > .table-bordered > tbody > tr:first-child > td, .panel > .table-bordered > thead > tr:first-child > th, .panel > .table-responsive > .table-bordered > thead > tr:first-child > th, .panel > .table-bordered > tbody > tr:first-child > th, .panel > .table-responsive > .table-bordered > tbody > tr:first-child > th { border-bottom: 0; } .panel > .table-bordered > tbody > tr:last-child > td, .panel > .table-responsive > .table-bordered > tbody > tr:last-child > td, .panel > .table-bordered > tfoot > tr:last-child > td, .panel > .table-responsive > .table-bordered > tfoot > tr:last-child > td, .panel > .table-bordered > tbody > tr:last-child > th, .panel > .table-responsive > .table-bordered > tbody > tr:last-child > th, .panel > .table-bordered > tfoot > tr:last-child > th, .panel > .table-responsive > .table-bordered > tfoot > tr:last-child > th { border-bottom: 0; } .panel > .table-responsive { border: 0; margin-bottom: 0; } .panel-group { margin-bottom: 18px; } .panel-group .panel { margin-bottom: 0; border-radius: 2px; } .panel-group .panel + .panel { margin-top: 5px; } .panel-group .panel-heading { border-bottom: 0; } .panel-group .panel-heading + .panel-collapse > .panel-body, .panel-group .panel-heading + .panel-collapse > .list-group { border-top: 1px solid #ddd; } .panel-group .panel-footer { border-top: 0; } .panel-group .panel-footer + .panel-collapse .panel-body { border-bottom: 1px solid #ddd; } .panel-default { border-color: #ddd; } .panel-default > .panel-heading { color: #333333; background-color: #f5f5f5; border-color: #ddd; } .panel-default > .panel-heading + .panel-collapse > .panel-body { border-top-color: #ddd; } .panel-default > .panel-heading .badge { color: #f5f5f5; background-color: #333333; } .panel-default > .panel-footer + .panel-collapse > .panel-body { border-bottom-color: #ddd; } .panel-primary { border-color: #337ab7; } .panel-primary > .panel-heading { color: #fff; background-color: #337ab7; border-color: #337ab7; } .panel-primary > .panel-heading + .panel-collapse > .panel-body { border-top-color: #337ab7; } .panel-primary > .panel-heading .badge { color: #337ab7; background-color: #fff; } .panel-primary > .panel-footer + .panel-collapse > .panel-body { border-bottom-color: #337ab7; } .panel-success { border-color: #d6e9c6; } .panel-success > .panel-heading { color: #3c763d; background-color: #dff0d8; border-color: #d6e9c6; } .panel-success > .panel-heading + .panel-collapse > .panel-body { border-top-color: #d6e9c6; } .panel-success > .panel-heading .badge { color: #dff0d8; background-color: #3c763d; } .panel-success > .panel-footer + .panel-collapse > .panel-body { border-bottom-color: #d6e9c6; } .panel-info { border-color: #bce8f1; } .panel-info > .panel-heading { color: #31708f; background-color: #d9edf7; border-color: #bce8f1; } .panel-info > .panel-heading + .panel-collapse > .panel-body { border-top-color: #bce8f1; } .panel-info > .panel-heading .badge { color: #d9edf7; background-color: #31708f; } .panel-info > .panel-footer + .panel-collapse > .panel-body { border-bottom-color: #bce8f1; } .panel-warning { border-color: #faebcc; } .panel-warning > .panel-heading { color: #8a6d3b; background-color: #fcf8e3; border-color: #faebcc; } .panel-warning > .panel-heading + .panel-collapse > .panel-body { border-top-color: #faebcc; } .panel-warning > .panel-heading .badge { color: #fcf8e3; background-color: #8a6d3b; } .panel-warning > .panel-footer + .panel-collapse > .panel-body { border-bottom-color: #faebcc; } .panel-danger { border-color: #ebccd1; } .panel-danger > .panel-heading { color: #a94442; background-color: #f2dede; border-color: #ebccd1; } .panel-danger > .panel-heading + .panel-collapse > .panel-body { border-top-color: #ebccd1; } .panel-danger > .panel-heading .badge { color: #f2dede; background-color: #a94442; } .panel-danger > .panel-footer + .panel-collapse > .panel-body { border-bottom-color: #ebccd1; } .embed-responsive { position: relative; display: block; height: 0; padding: 0; overflow: hidden; } .embed-responsive .embed-responsive-item, .embed-responsive iframe, .embed-responsive embed, .embed-responsive object, .embed-responsive video { position: absolute; top: 0; left: 0; bottom: 0; height: 100%; width: 100%; border: 0; } .embed-responsive-16by9 { padding-bottom: 56.25%; } .embed-responsive-4by3 { padding-bottom: 75%; } .well { min-height: 20px; padding: 19px; margin-bottom: 20px; background-color: #f5f5f5; border: 1px solid #e3e3e3; border-radius: 2px; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05); } .well blockquote { border-color: #ddd; border-color: rgba(0, 0, 0, 0.15); } .well-lg { padding: 24px; border-radius: 3px; } .well-sm { padding: 9px; border-radius: 1px; } .close { float: right; font-size: 19.5px; font-weight: bold; line-height: 1; color: #000; text-shadow: 0 1px 0 #fff; opacity: 0.2; filter: alpha(opacity=20); } .close:hover, .close:focus { color: #000; text-decoration: none; cursor: pointer; opacity: 0.5; filter: alpha(opacity=50); } button.close { padding: 0; cursor: pointer; background: transparent; border: 0; -webkit-appearance: none; } .modal-open { overflow: hidden; } .modal { display: none; overflow: hidden; position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 1050; -webkit-overflow-scrolling: touch; outline: 0; } .modal.fade .modal-dialog { -webkit-transform: translate(0, -25%); -ms-transform: translate(0, -25%); -o-transform: translate(0, -25%); transform: translate(0, -25%); -webkit-transition: -webkit-transform 0.3s ease-out; -moz-transition: -moz-transform 0.3s ease-out; -o-transition: -o-transform 0.3s ease-out; transition: transform 0.3s ease-out; } .modal.in .modal-dialog { -webkit-transform: translate(0, 0); -ms-transform: translate(0, 0); -o-transform: translate(0, 0); transform: translate(0, 0); } .modal-open .modal { overflow-x: hidden; overflow-y: auto; } .modal-dialog { position: relative; width: auto; margin: 10px; } .modal-content { position: relative; background-color: #fff; border: 1px solid #999; border: 1px solid rgba(0, 0, 0, 0.2); border-radius: 3px; -webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5); box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5); background-clip: padding-box; outline: 0; } .modal-backdrop { position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 1040; background-color: #000; } .modal-backdrop.fade { opacity: 0; filter: alpha(opacity=0); } .modal-backdrop.in { opacity: 0.5; filter: alpha(opacity=50); } .modal-header { padding: 15px; border-bottom: 1px solid #e5e5e5; } .modal-header .close { margin-top: -2px; } .modal-title { margin: 0; line-height: 1.42857143; } .modal-body { position: relative; padding: 15px; } .modal-footer { padding: 15px; text-align: right; border-top: 1px solid #e5e5e5; } .modal-footer .btn + .btn { margin-left: 5px; margin-bottom: 0; } .modal-footer .btn-group .btn + .btn { margin-left: -1px; } .modal-footer .btn-block + .btn-block { margin-left: 0; } .modal-scrollbar-measure { position: absolute; top: -9999px; width: 50px; height: 50px; overflow: scroll; } @media (min-width: 768px) { .modal-dialog { width: 600px; margin: 30px auto; } .modal-content { -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); } .modal-sm { width: 300px; } } @media (min-width: 992px) { .modal-lg { width: 900px; } } .tooltip { position: absolute; z-index: 1070; display: block; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; font-style: normal; font-weight: normal; letter-spacing: normal; line-break: auto; line-height: 1.42857143; text-align: left; text-align: start; text-decoration: none; text-shadow: none; text-transform: none; white-space: normal; word-break: normal; word-spacing: normal; word-wrap: normal; font-size: 12px; opacity: 0; filter: alpha(opacity=0); } .tooltip.in { opacity: 0.9; filter: alpha(opacity=90); } .tooltip.top { margin-top: -3px; padding: 5px 0; } .tooltip.right { margin-left: 3px; padding: 0 5px; } .tooltip.bottom { margin-top: 3px; padding: 5px 0; } .tooltip.left { margin-left: -3px; padding: 0 5px; } .tooltip-inner { max-width: 200px; padding: 3px 8px; color: #fff; text-align: center; background-color: #000; border-radius: 2px; } .tooltip-arrow { position: absolute; width: 0; height: 0; border-color: transparent; border-style: solid; } .tooltip.top .tooltip-arrow { bottom: 0; left: 50%; margin-left: -5px; border-width: 5px 5px 0; border-top-color: #000; } .tooltip.top-left .tooltip-arrow { bottom: 0; right: 5px; margin-bottom: -5px; border-width: 5px 5px 0; border-top-color: #000; } .tooltip.top-right .tooltip-arrow { bottom: 0; left: 5px; margin-bottom: -5px; border-width: 5px 5px 0; border-top-color: #000; } .tooltip.right .tooltip-arrow { top: 50%; left: 0; margin-top: -5px; border-width: 5px 5px 5px 0; border-right-color: #000; } .tooltip.left .tooltip-arrow { top: 50%; right: 0; margin-top: -5px; border-width: 5px 0 5px 5px; border-left-color: #000; } .tooltip.bottom .tooltip-arrow { top: 0; left: 50%; margin-left: -5px; border-width: 0 5px 5px; border-bottom-color: #000; } .tooltip.bottom-left .tooltip-arrow { top: 0; right: 5px; margin-top: -5px; border-width: 0 5px 5px; border-bottom-color: #000; } .tooltip.bottom-right .tooltip-arrow { top: 0; left: 5px; margin-top: -5px; border-width: 0 5px 5px; border-bottom-color: #000; } .popover { position: absolute; top: 0; left: 0; z-index: 1060; display: none; max-width: 276px; padding: 1px; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; font-style: normal; font-weight: normal; letter-spacing: normal; line-break: auto; line-height: 1.42857143; text-align: left; text-align: start; text-decoration: none; text-shadow: none; text-transform: none; white-space: normal; word-break: normal; word-spacing: normal; word-wrap: normal; font-size: 13px; background-color: #fff; background-clip: padding-box; border: 1px solid #ccc; border: 1px solid rgba(0, 0, 0, 0.2); border-radius: 3px; -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); } .popover.top { margin-top: -10px; } .popover.right { margin-left: 10px; } .popover.bottom { margin-top: 10px; } .popover.left { margin-left: -10px; } .popover-title { margin: 0; padding: 8px 14px; font-size: 13px; background-color: #f7f7f7; border-bottom: 1px solid #ebebeb; border-radius: 2px 2px 0 0; } .popover-content { padding: 9px 14px; } .popover > .arrow, .popover > .arrow:after { position: absolute; display: block; width: 0; height: 0; border-color: transparent; border-style: solid; } .popover > .arrow { border-width: 11px; } .popover > .arrow:after { border-width: 10px; content: \"\"; } .popover.top > .arrow { left: 50%; margin-left: -11px; border-bottom-width: 0; border-top-color: #999999; border-top-color: rgba(0, 0, 0, 0.25); bottom: -11px; } .popover.top > .arrow:after { content: \" \"; bottom: 1px; margin-left: -10px; border-bottom-width: 0; border-top-color: #fff; } .popover.right > .arrow { top: 50%; left: -11px; margin-top: -11px; border-left-width: 0; border-right-color: #999999; border-right-color: rgba(0, 0, 0, 0.25); } .popover.right > .arrow:after { content: \" \"; left: 1px; bottom: -10px; border-left-width: 0; border-right-color: #fff; } .popover.bottom > .arrow { left: 50%; margin-left: -11px; border-top-width: 0; border-bottom-color: #999999; border-bottom-color: rgba(0, 0, 0, 0.25); top: -11px; } .popover.bottom > .arrow:after { content: \" \"; top: 1px; margin-left: -10px; border-top-width: 0; border-bottom-color: #fff; } .popover.left > .arrow { top: 50%; right: -11px; margin-top: -11px; border-right-width: 0; border-left-color: #999999; border-left-color: rgba(0, 0, 0, 0.25); } .popover.left > .arrow:after { content: \" \"; right: 1px; border-right-width: 0; border-left-color: #fff; bottom: -10px; } .carousel { position: relative; } .carousel-inner { position: relative; overflow: hidden; width: 100%; } .carousel-inner > .item { display: none; position: relative; -webkit-transition: 0.6s ease-in-out left; -o-transition: 0.6s ease-in-out left; transition: 0.6s ease-in-out left; } .carousel-inner > .item > img, .carousel-inner > .item > a > img { line-height: 1; } @media all and (transform-3d), (-webkit-transform-3d) { .carousel-inner > .item { -webkit-transition: -webkit-transform 0.6s ease-in-out; -moz-transition: -moz-transform 0.6s ease-in-out; -o-transition: -o-transform 0.6s ease-in-out; transition: transform 0.6s ease-in-out; -webkit-backface-visibility: hidden; -moz-backface-visibility: hidden; backface-visibility: hidden; -webkit-perspective: 1000px; -moz-perspective: 1000px; perspective: 1000px; } .carousel-inner > .item.next, .carousel-inner > .item.active.right { -webkit-transform: translate3d(100%, 0, 0); transform: translate3d(100%, 0, 0); left: 0; } .carousel-inner > .item.prev, .carousel-inner > .item.active.left { -webkit-transform: translate3d(-100%, 0, 0); transform: translate3d(-100%, 0, 0); left: 0; } .carousel-inner > .item.next.left, .carousel-inner > .item.prev.right, .carousel-inner > .item.active { -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); left: 0; } } .carousel-inner > .active, .carousel-inner > .next, .carousel-inner > .prev { display: block; } .carousel-inner > .active { left: 0; } .carousel-inner > .next, .carousel-inner > .prev { position: absolute; top: 0; width: 100%; } .carousel-inner > .next { left: 100%; } .carousel-inner > .prev { left: -100%; } .carousel-inner > .next.left, .carousel-inner > .prev.right { left: 0; } .carousel-inner > .active.left { left: -100%; } .carousel-inner > .active.right { left: 100%; } .carousel-control { position: absolute; top: 0; left: 0; bottom: 0; width: 15%; opacity: 0.5; filter: alpha(opacity=50); font-size: 20px; color: #fff; text-align: center; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6); background-color: rgba(0, 0, 0, 0); } .carousel-control.left { background-image: -webkit-linear-gradient(left, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.0001) 100%); background-image: -o-linear-gradient(left, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.0001) 100%); background-image: linear-gradient(to right, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.0001) 100%); background-repeat: repeat-x; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000', endColorstr='#00000000', GradientType=1); } .carousel-control.right { left: auto; right: 0; background-image: -webkit-linear-gradient(left, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.5) 100%); background-image: -o-linear-gradient(left, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.5) 100%); background-image: linear-gradient(to right, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.5) 100%); background-repeat: repeat-x; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#80000000', GradientType=1); } .carousel-control:hover, .carousel-control:focus { outline: 0; color: #fff; text-decoration: none; opacity: 0.9; filter: alpha(opacity=90); } .carousel-control .icon-prev, .carousel-control .icon-next, .carousel-control .glyphicon-chevron-left, .carousel-control .glyphicon-chevron-right { position: absolute; top: 50%; margin-top: -10px; z-index: 5; display: inline-block; } .carousel-control .icon-prev, .carousel-control .glyphicon-chevron-left { left: 50%; margin-left: -10px; } .carousel-control .icon-next, .carousel-control .glyphicon-chevron-right { right: 50%; margin-right: -10px; } .carousel-control .icon-prev, .carousel-control .icon-next { width: 20px; height: 20px; line-height: 1; font-family: serif; } .carousel-control .icon-prev:before { content: '\\2039'; } .carousel-control .icon-next:before { content: '\\203a'; } .carousel-indicators { position: absolute; bottom: 10px; left: 50%; z-index: 15; width: 60%; margin-left: -30%; padding-left: 0; list-style: none; text-align: center; } .carousel-indicators li { display: inline-block; width: 10px; height: 10px; margin: 1px; text-indent: -999px; border: 1px solid #fff; border-radius: 10px; cursor: pointer; background-color: #000 \\9; background-color: rgba(0, 0, 0, 0); } .carousel-indicators .active { margin: 0; width: 12px; height: 12px; background-color: #fff; } .carousel-caption { position: absolute; left: 15%; right: 15%; bottom: 20px; z-index: 10; padding-top: 20px; padding-bottom: 20px; color: #fff; text-align: center; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6); } .carousel-caption .btn { text-shadow: none; } @media screen and (min-width: 768px) { .carousel-control .glyphicon-chevron-left, .carousel-control .glyphicon-chevron-right, .carousel-control .icon-prev, .carousel-control .icon-next { width: 30px; height: 30px; margin-top: -10px; font-size: 30px; } .carousel-control .glyphicon-chevron-left, .carousel-control .icon-prev { margin-left: -10px; } .carousel-control .glyphicon-chevron-right, .carousel-control .icon-next { margin-right: -10px; } .carousel-caption { left: 20%; right: 20%; padding-bottom: 30px; } .carousel-indicators { bottom: 20px; } } .clearfix:before, .clearfix:after, .dl-horizontal dd:before, .dl-horizontal dd:after, .container:before, .container:after, .container-fluid:before, .container-fluid:after, .row:before, .row:after, .form-horizontal .form-group:before, .form-horizontal .form-group:after, .btn-toolbar:before, .btn-toolbar:after, .btn-group-vertical > .btn-group:before, .btn-group-vertical > .btn-group:after, .nav:before, .nav:after, .navbar:before, .navbar:after, .navbar-header:before, .navbar-header:after, .navbar-collapse:before, .navbar-collapse:after, .pager:before, .pager:after, .panel-body:before, .panel-body:after, .modal-header:before, .modal-header:after, .modal-footer:before, .modal-footer:after, .item_buttons:before, .item_buttons:after { content: \" \"; display: table; } .clearfix:after, .dl-horizontal dd:after, .container:after, .container-fluid:after, .row:after, .form-horizontal .form-group:after, .btn-toolbar:after, .btn-group-vertical > .btn-group:after, .nav:after, .navbar:after, .navbar-header:after, .navbar-collapse:after, .pager:after, .panel-body:after, .modal-header:after, .modal-footer:after, .item_buttons:after { clear: both; } .center-block { display: block; margin-left: auto; margin-right: auto; } .pull-right { float: right !important; } .pull-left { float: left !important; } .hide { display: none !important; } .show { display: block !important; } .invisible { visibility: hidden; } .text-hide { font: 0/0 a; color: transparent; text-shadow: none; background-color: transparent; border: 0; } .hidden { display: none !important; } .affix { position: fixed; } @-ms-viewport { width: device-width; } .visible-xs, .visible-sm, .visible-md, .visible-lg { display: none !important; } .visible-xs-block, .visible-xs-inline, .visible-xs-inline-block, .visible-sm-block, .visible-sm-inline, .visible-sm-inline-block, .visible-md-block, .visible-md-inline, .visible-md-inline-block, .visible-lg-block, .visible-lg-inline, .visible-lg-inline-block { display: none !important; } @media (max-width: 767px) { .visible-xs { display: block !important; } table.visible-xs { display: table !important; } tr.visible-xs { display: table-row !important; } th.visible-xs, td.visible-xs { display: table-cell !important; } } @media (max-width: 767px) { .visible-xs-block { display: block !important; } } @media (max-width: 767px) { .visible-xs-inline { display: inline !important; } } @media (max-width: 767px) { .visible-xs-inline-block { display: inline-block !important; } } @media (min-width: 768px) and (max-width: 991px) { .visible-sm { display: block !important; } table.visible-sm { display: table !important; } tr.visible-sm { display: table-row !important; } th.visible-sm, td.visible-sm { display: table-cell !important; } } @media (min-width: 768px) and (max-width: 991px) { .visible-sm-block { display: block !important; } } @media (min-width: 768px) and (max-width: 991px) { .visible-sm-inline { display: inline !important; } } @media (min-width: 768px) and (max-width: 991px) { .visible-sm-inline-block { display: inline-block !important; } } @media (min-width: 992px) and (max-width: 1199px) { .visible-md { display: block !important; } table.visible-md { display: table !important; } tr.visible-md { display: table-row !important; } th.visible-md, td.visible-md { display: table-cell !important; } } @media (min-width: 992px) and (max-width: 1199px) { .visible-md-block { display: block !important; } } @media (min-width: 992px) and (max-width: 1199px) { .visible-md-inline { display: inline !important; } } @media (min-width: 992px) and (max-width: 1199px) { .visible-md-inline-block { display: inline-block !important; } } @media (min-width: 1200px) { .visible-lg { display: block !important; } table.visible-lg { display: table !important; } tr.visible-lg { display: table-row !important; } th.visible-lg, td.visible-lg { display: table-cell !important; } } @media (min-width: 1200px) { .visible-lg-block { display: block !important; } } @media (min-width: 1200px) { .visible-lg-inline { display: inline !important; } } @media (min-width: 1200px) { .visible-lg-inline-block { display: inline-block !important; } } @media (max-width: 767px) { .hidden-xs { display: none !important; } } @media (min-width: 768px) and (max-width: 991px) { .hidden-sm { display: none !important; } } @media (min-width: 992px) and (max-width: 1199px) { .hidden-md { display: none !important; } } @media (min-width: 1200px) { .hidden-lg { display: none !important; } } .visible-print { display: none !important; } @media print { .visible-print { display: block !important; } table.visible-print { display: table !important; } tr.visible-print { display: table-row !important; } th.visible-print, td.visible-print { display: table-cell !important; } } .visible-print-block { display: none !important; } @media print { .visible-print-block { display: block !important; } } .visible-print-inline { display: none !important; } @media print { .visible-print-inline { display: inline !important; } } .visible-print-inline-block { display: none !important; } @media print { .visible-print-inline-block { display: inline-block !important; } } @media print { .hidden-print { display: none !important; } } /*! * * Font Awesome * */ /*! * Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome * License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License) */ /* FONT PATH * -------------------------- */ @font-face { font-family: 'FontAwesome'; src: url('../components/font-awesome/fonts/fontawesome-webfont.eot?v=4.7.0'); src: url('../components/font-awesome/fonts/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), url('../components/font-awesome/fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'), url('../components/font-awesome/fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'), url('../components/font-awesome/fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'), url('../components/font-awesome/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg'); font-weight: normal; font-style: normal; } .fa { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } /* makes the font 33% larger relative to the icon container */ .fa-lg { font-size: 1.33333333em; line-height: 0.75em; vertical-align: -15%; } .fa-2x { font-size: 2em; } .fa-3x { font-size: 3em; } .fa-4x { font-size: 4em; } .fa-5x { font-size: 5em; } .fa-fw { width: 1.28571429em; text-align: center; } .fa-ul { padding-left: 0; margin-left: 2.14285714em; list-style-type: none; } .fa-ul > li { position: relative; } .fa-li { position: absolute; left: -2.14285714em; width: 2.14285714em; top: 0.14285714em; text-align: center; } .fa-li.fa-lg { left: -1.85714286em; } .fa-border { padding: .2em .25em .15em; border: solid 0.08em #eee; border-radius: .1em; } .fa-pull-left { float: left; } .fa-pull-right { float: right; } .fa.fa-pull-left { margin-right: .3em; } .fa.fa-pull-right { margin-left: .3em; } /* Deprecated as of 4.4.0 */ .pull-right { float: right; } .pull-left { float: left; } .fa.pull-left { margin-right: .3em; } .fa.pull-right { margin-left: .3em; } .fa-spin { -webkit-animation: fa-spin 2s infinite linear; animation: fa-spin 2s infinite linear; } .fa-pulse { -webkit-animation: fa-spin 1s infinite steps(8); animation: fa-spin 1s infinite steps(8); } @-webkit-keyframes fa-spin { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(359deg); transform: rotate(359deg); } } @keyframes fa-spin { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(359deg); transform: rotate(359deg); } } .fa-rotate-90 { -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)\"; -webkit-transform: rotate(90deg); -ms-transform: rotate(90deg); transform: rotate(90deg); } .fa-rotate-180 { -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)\"; -webkit-transform: rotate(180deg); -ms-transform: rotate(180deg); transform: rotate(180deg); } .fa-rotate-270 { -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)\"; -webkit-transform: rotate(270deg); -ms-transform: rotate(270deg); transform: rotate(270deg); } .fa-flip-horizontal { -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)\"; -webkit-transform: scale(-1, 1); -ms-transform: scale(-1, 1); transform: scale(-1, 1); } .fa-flip-vertical { -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)\"; -webkit-transform: scale(1, -1); -ms-transform: scale(1, -1); transform: scale(1, -1); } :root .fa-rotate-90, :root .fa-rotate-180, :root .fa-rotate-270, :root .fa-flip-horizontal, :root .fa-flip-vertical { filter: none; } .fa-stack { position: relative; display: inline-block; width: 2em; height: 2em; line-height: 2em; vertical-align: middle; } .fa-stack-1x, .fa-stack-2x { position: absolute; left: 0; width: 100%; text-align: center; } .fa-stack-1x { line-height: inherit; } .fa-stack-2x { font-size: 2em; } .fa-inverse { color: #fff; } /* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen readers do not read off random characters that represent icons */ .fa-glass:before { content: \"\\f000\"; } .fa-music:before { content: \"\\f001\"; } .fa-search:before { content: \"\\f002\"; } .fa-envelope-o:before { content: \"\\f003\"; } .fa-heart:before { content: \"\\f004\"; } .fa-star:before { content: \"\\f005\"; } .fa-star-o:before { content: \"\\f006\"; } .fa-user:before { content: \"\\f007\"; } .fa-film:before { content: \"\\f008\"; } .fa-th-large:before { content: \"\\f009\"; } .fa-th:before { content: \"\\f00a\"; } .fa-th-list:before { content: \"\\f00b\"; } .fa-check:before { content: \"\\f00c\"; } .fa-remove:before, .fa-close:before, .fa-times:before { content: \"\\f00d\"; } .fa-search-plus:before { content: \"\\f00e\"; } .fa-search-minus:before { content: \"\\f010\"; } .fa-power-off:before { content: \"\\f011\"; } .fa-signal:before { content: \"\\f012\"; } .fa-gear:before, .fa-cog:before { content: \"\\f013\"; } .fa-trash-o:before { content: \"\\f014\"; } .fa-home:before { content: \"\\f015\"; } .fa-file-o:before { content: \"\\f016\"; } .fa-clock-o:before { content: \"\\f017\"; } .fa-road:before { content: \"\\f018\"; } .fa-download:before { content: \"\\f019\"; } .fa-arrow-circle-o-down:before { content: \"\\f01a\"; } .fa-arrow-circle-o-up:before { content: \"\\f01b\"; } .fa-inbox:before { content: \"\\f01c\"; } .fa-play-circle-o:before { content: \"\\f01d\"; } .fa-rotate-right:before, .fa-repeat:before { content: \"\\f01e\"; } .fa-refresh:before { content: \"\\f021\"; } .fa-list-alt:before { content: \"\\f022\"; } .fa-lock:before { content: \"\\f023\"; } .fa-flag:before { content: \"\\f024\"; } .fa-headphones:before { content: \"\\f025\"; } .fa-volume-off:before { content: \"\\f026\"; } .fa-volume-down:before { content: \"\\f027\"; } .fa-volume-up:before { content: \"\\f028\"; } .fa-qrcode:before { content: \"\\f029\"; } .fa-barcode:before { content: \"\\f02a\"; } .fa-tag:before { content: \"\\f02b\"; } .fa-tags:before { content: \"\\f02c\"; } .fa-book:before { content: \"\\f02d\"; } .fa-bookmark:before { content: \"\\f02e\"; } .fa-print:before { content: \"\\f02f\"; } .fa-camera:before { content: \"\\f030\"; } .fa-font:before { content: \"\\f031\"; } .fa-bold:before { content: \"\\f032\"; } .fa-italic:before { content: \"\\f033\"; } .fa-text-height:before { content: \"\\f034\"; } .fa-text-width:before { content: \"\\f035\"; } .fa-align-left:before { content: \"\\f036\"; } .fa-align-center:before { content: \"\\f037\"; } .fa-align-right:before { content: \"\\f038\"; } .fa-align-justify:before { content: \"\\f039\"; } .fa-list:before { content: \"\\f03a\"; } .fa-dedent:before, .fa-outdent:before { content: \"\\f03b\"; } .fa-indent:before { content: \"\\f03c\"; } .fa-video-camera:before { content: \"\\f03d\"; } .fa-photo:before, .fa-image:before, .fa-picture-o:before { content: \"\\f03e\"; } .fa-pencil:before { content: \"\\f040\"; } .fa-map-marker:before { content: \"\\f041\"; } .fa-adjust:before { content: \"\\f042\"; } .fa-tint:before { content: \"\\f043\"; } .fa-edit:before, .fa-pencil-square-o:before { content: \"\\f044\"; } .fa-share-square-o:before { content: \"\\f045\"; } .fa-check-square-o:before { content: \"\\f046\"; } .fa-arrows:before { content: \"\\f047\"; } .fa-step-backward:before { content: \"\\f048\"; } .fa-fast-backward:before { content: \"\\f049\"; } .fa-backward:before { content: \"\\f04a\"; } .fa-play:before { content: \"\\f04b\"; } .fa-pause:before { content: \"\\f04c\"; } .fa-stop:before { content: \"\\f04d\"; } .fa-forward:before { content: \"\\f04e\"; } .fa-fast-forward:before { content: \"\\f050\"; } .fa-step-forward:before { content: \"\\f051\"; } .fa-eject:before { content: \"\\f052\"; } .fa-chevron-left:before { content: \"\\f053\"; } .fa-chevron-right:before { content: \"\\f054\"; } .fa-plus-circle:before { content: \"\\f055\"; } .fa-minus-circle:before { content: \"\\f056\"; } .fa-times-circle:before { content: \"\\f057\"; } .fa-check-circle:before { content: \"\\f058\"; } .fa-question-circle:before { content: \"\\f059\"; } .fa-info-circle:before { content: \"\\f05a\"; } .fa-crosshairs:before { content: \"\\f05b\"; } .fa-times-circle-o:before { content: \"\\f05c\"; } .fa-check-circle-o:before { content: \"\\f05d\"; } .fa-ban:before { content: \"\\f05e\"; } .fa-arrow-left:before { content: \"\\f060\"; } .fa-arrow-right:before { content: \"\\f061\"; } .fa-arrow-up:before { content: \"\\f062\"; } .fa-arrow-down:before { content: \"\\f063\"; } .fa-mail-forward:before, .fa-share:before { content: \"\\f064\"; } .fa-expand:before { content: \"\\f065\"; } .fa-compress:before { content: \"\\f066\"; } .fa-plus:before { content: \"\\f067\"; } .fa-minus:before { content: \"\\f068\"; } .fa-asterisk:before { content: \"\\f069\"; } .fa-exclamation-circle:before { content: \"\\f06a\"; } .fa-gift:before { content: \"\\f06b\"; } .fa-leaf:before { content: \"\\f06c\"; } .fa-fire:before { content: \"\\f06d\"; } .fa-eye:before { content: \"\\f06e\"; } .fa-eye-slash:before { content: \"\\f070\"; } .fa-warning:before, .fa-exclamation-triangle:before { content: \"\\f071\"; } .fa-plane:before { content: \"\\f072\"; } .fa-calendar:before { content: \"\\f073\"; } .fa-random:before { content: \"\\f074\"; } .fa-comment:before { content: \"\\f075\"; } .fa-magnet:before { content: \"\\f076\"; } .fa-chevron-up:before { content: \"\\f077\"; } .fa-chevron-down:before { content: \"\\f078\"; } .fa-retweet:before { content: \"\\f079\"; } .fa-shopping-cart:before { content: \"\\f07a\"; } .fa-folder:before { content: \"\\f07b\"; } .fa-folder-open:before { content: \"\\f07c\"; } .fa-arrows-v:before { content: \"\\f07d\"; } .fa-arrows-h:before { content: \"\\f07e\"; } .fa-bar-chart-o:before, .fa-bar-chart:before { content: \"\\f080\"; } .fa-twitter-square:before { content: \"\\f081\"; } .fa-facebook-square:before { content: \"\\f082\"; } .fa-camera-retro:before { content: \"\\f083\"; } .fa-key:before { content: \"\\f084\"; } .fa-gears:before, .fa-cogs:before { content: \"\\f085\"; } .fa-comments:before { content: \"\\f086\"; } .fa-thumbs-o-up:before { content: \"\\f087\"; } .fa-thumbs-o-down:before { content: \"\\f088\"; } .fa-star-half:before { content: \"\\f089\"; } .fa-heart-o:before { content: \"\\f08a\"; } .fa-sign-out:before { content: \"\\f08b\"; } .fa-linkedin-square:before { content: \"\\f08c\"; } .fa-thumb-tack:before { content: \"\\f08d\"; } .fa-external-link:before { content: \"\\f08e\"; } .fa-sign-in:before { content: \"\\f090\"; } .fa-trophy:before { content: \"\\f091\"; } .fa-github-square:before { content: \"\\f092\"; } .fa-upload:before { content: \"\\f093\"; } .fa-lemon-o:before { content: \"\\f094\"; } .fa-phone:before { content: \"\\f095\"; } .fa-square-o:before { content: \"\\f096\"; } .fa-bookmark-o:before { content: \"\\f097\"; } .fa-phone-square:before { content: \"\\f098\"; } .fa-twitter:before { content: \"\\f099\"; } .fa-facebook-f:before, .fa-facebook:before { content: \"\\f09a\"; } .fa-github:before { content: \"\\f09b\"; } .fa-unlock:before { content: \"\\f09c\"; } .fa-credit-card:before { content: \"\\f09d\"; } .fa-feed:before, .fa-rss:before { content: \"\\f09e\"; } .fa-hdd-o:before { content: \"\\f0a0\"; } .fa-bullhorn:before { content: \"\\f0a1\"; } .fa-bell:before { content: \"\\f0f3\"; } .fa-certificate:before { content: \"\\f0a3\"; } .fa-hand-o-right:before { content: \"\\f0a4\"; } .fa-hand-o-left:before { content: \"\\f0a5\"; } .fa-hand-o-up:before { content: \"\\f0a6\"; } .fa-hand-o-down:before { content: \"\\f0a7\"; } .fa-arrow-circle-left:before { content: \"\\f0a8\"; } .fa-arrow-circle-right:before { content: \"\\f0a9\"; } .fa-arrow-circle-up:before { content: \"\\f0aa\"; } .fa-arrow-circle-down:before { content: \"\\f0ab\"; } .fa-globe:before { content: \"\\f0ac\"; } .fa-wrench:before { content: \"\\f0ad\"; } .fa-tasks:before { content: \"\\f0ae\"; } .fa-filter:before { content: \"\\f0b0\"; } .fa-briefcase:before { content: \"\\f0b1\"; } .fa-arrows-alt:before { content: \"\\f0b2\"; } .fa-group:before, .fa-users:before { content: \"\\f0c0\"; } .fa-chain:before, .fa-link:before { content: \"\\f0c1\"; } .fa-cloud:before { content: \"\\f0c2\"; } .fa-flask:before { content: \"\\f0c3\"; } .fa-cut:before, .fa-scissors:before { content: \"\\f0c4\"; } .fa-copy:before, .fa-files-o:before { content: \"\\f0c5\"; } .fa-paperclip:before { content: \"\\f0c6\"; } .fa-save:before, .fa-floppy-o:before { content: \"\\f0c7\"; } .fa-square:before { content: \"\\f0c8\"; } .fa-navicon:before, .fa-reorder:before, .fa-bars:before { content: \"\\f0c9\"; } .fa-list-ul:before { content: \"\\f0ca\"; } .fa-list-ol:before { content: \"\\f0cb\"; } .fa-strikethrough:before { content: \"\\f0cc\"; } .fa-underline:before { content: \"\\f0cd\"; } .fa-table:before { content: \"\\f0ce\"; } .fa-magic:before { content: \"\\f0d0\"; } .fa-truck:before { content: \"\\f0d1\"; } .fa-pinterest:before { content: \"\\f0d2\"; } .fa-pinterest-square:before { content: \"\\f0d3\"; } .fa-google-plus-square:before { content: \"\\f0d4\"; } .fa-google-plus:before { content: \"\\f0d5\"; } .fa-money:before { content: \"\\f0d6\"; } .fa-caret-down:before { content: \"\\f0d7\"; } .fa-caret-up:before { content: \"\\f0d8\"; } .fa-caret-left:before { content: \"\\f0d9\"; } .fa-caret-right:before { content: \"\\f0da\"; } .fa-columns:before { content: \"\\f0db\"; } .fa-unsorted:before, .fa-sort:before { content: \"\\f0dc\"; } .fa-sort-down:before, .fa-sort-desc:before { content: \"\\f0dd\"; } .fa-sort-up:before, .fa-sort-asc:before { content: \"\\f0de\"; } .fa-envelope:before { content: \"\\f0e0\"; } .fa-linkedin:before { content: \"\\f0e1\"; } .fa-rotate-left:before, .fa-undo:before { content: \"\\f0e2\"; } .fa-legal:before, .fa-gavel:before { content: \"\\f0e3\"; } .fa-dashboard:before, .fa-tachometer:before { content: \"\\f0e4\"; } .fa-comment-o:before { content: \"\\f0e5\"; } .fa-comments-o:before { content: \"\\f0e6\"; } .fa-flash:before, .fa-bolt:before { content: \"\\f0e7\"; } .fa-sitemap:before { content: \"\\f0e8\"; } .fa-umbrella:before { content: \"\\f0e9\"; } .fa-paste:before, .fa-clipboard:before { content: \"\\f0ea\"; } .fa-lightbulb-o:before { content: \"\\f0eb\"; } .fa-exchange:before { content: \"\\f0ec\"; } .fa-cloud-download:before { content: \"\\f0ed\"; } .fa-cloud-upload:before { content: \"\\f0ee\"; } .fa-user-md:before { content: \"\\f0f0\"; } .fa-stethoscope:before { content: \"\\f0f1\"; } .fa-suitcase:before { content: \"\\f0f2\"; } .fa-bell-o:before { content: \"\\f0a2\"; } .fa-coffee:before { content: \"\\f0f4\"; } .fa-cutlery:before { content: \"\\f0f5\"; } .fa-file-text-o:before { content: \"\\f0f6\"; } .fa-building-o:before { content: \"\\f0f7\"; } .fa-hospital-o:before { content: \"\\f0f8\"; } .fa-ambulance:before { content: \"\\f0f9\"; } .fa-medkit:before { content: \"\\f0fa\"; } .fa-fighter-jet:before { content: \"\\f0fb\"; } .fa-beer:before { content: \"\\f0fc\"; } .fa-h-square:before { content: \"\\f0fd\"; } .fa-plus-square:before { content: \"\\f0fe\"; } .fa-angle-double-left:before { content: \"\\f100\"; } .fa-angle-double-right:before { content: \"\\f101\"; } .fa-angle-double-up:before { content: \"\\f102\"; } .fa-angle-double-down:before { content: \"\\f103\"; } .fa-angle-left:before { content: \"\\f104\"; } .fa-angle-right:before { content: \"\\f105\"; } .fa-angle-up:before { content: \"\\f106\"; } .fa-angle-down:before { content: \"\\f107\"; } .fa-desktop:before { content: \"\\f108\"; } .fa-laptop:before { content: \"\\f109\"; } .fa-tablet:before { content: \"\\f10a\"; } .fa-mobile-phone:before, .fa-mobile:before { content: \"\\f10b\"; } .fa-circle-o:before { content: \"\\f10c\"; } .fa-quote-left:before { content: \"\\f10d\"; } .fa-quote-right:before { content: \"\\f10e\"; } .fa-spinner:before { content: \"\\f110\"; } .fa-circle:before { content: \"\\f111\"; } .fa-mail-reply:before, .fa-reply:before { content: \"\\f112\"; } .fa-github-alt:before { content: \"\\f113\"; } .fa-folder-o:before { content: \"\\f114\"; } .fa-folder-open-o:before { content: \"\\f115\"; } .fa-smile-o:before { content: \"\\f118\"; } .fa-frown-o:before { content: \"\\f119\"; } .fa-meh-o:before { content: \"\\f11a\"; } .fa-gamepad:before { content: \"\\f11b\"; } .fa-keyboard-o:before { content: \"\\f11c\"; } .fa-flag-o:before { content: \"\\f11d\"; } .fa-flag-checkered:before { content: \"\\f11e\"; } .fa-terminal:before { content: \"\\f120\"; } .fa-code:before { content: \"\\f121\"; } .fa-mail-reply-all:before, .fa-reply-all:before { content: \"\\f122\"; } .fa-star-half-empty:before, .fa-star-half-full:before, .fa-star-half-o:before { content: \"\\f123\"; } .fa-location-arrow:before { content: \"\\f124\"; } .fa-crop:before { content: \"\\f125\"; } .fa-code-fork:before { content: \"\\f126\"; } .fa-unlink:before, .fa-chain-broken:before { content: \"\\f127\"; } .fa-question:before { content: \"\\f128\"; } .fa-info:before { content: \"\\f129\"; } .fa-exclamation:before { content: \"\\f12a\"; } .fa-superscript:before { content: \"\\f12b\"; } .fa-subscript:before { content: \"\\f12c\"; } .fa-eraser:before { content: \"\\f12d\"; } .fa-puzzle-piece:before { content: \"\\f12e\"; } .fa-microphone:before { content: \"\\f130\"; } .fa-microphone-slash:before { content: \"\\f131\"; } .fa-shield:before { content: \"\\f132\"; } .fa-calendar-o:before { content: \"\\f133\"; } .fa-fire-extinguisher:before { content: \"\\f134\"; } .fa-rocket:before { content: \"\\f135\"; } .fa-maxcdn:before { content: \"\\f136\"; } .fa-chevron-circle-left:before { content: \"\\f137\"; } .fa-chevron-circle-right:before { content: \"\\f138\"; } .fa-chevron-circle-up:before { content: \"\\f139\"; } .fa-chevron-circle-down:before { content: \"\\f13a\"; } .fa-html5:before { content: \"\\f13b\"; } .fa-css3:before { content: \"\\f13c\"; } .fa-anchor:before { content: \"\\f13d\"; } .fa-unlock-alt:before { content: \"\\f13e\"; } .fa-bullseye:before { content: \"\\f140\"; } .fa-ellipsis-h:before { content: \"\\f141\"; } .fa-ellipsis-v:before { content: \"\\f142\"; } .fa-rss-square:before { content: \"\\f143\"; } .fa-play-circle:before { content: \"\\f144\"; } .fa-ticket:before { content: \"\\f145\"; } .fa-minus-square:before { content: \"\\f146\"; } .fa-minus-square-o:before { content: \"\\f147\"; } .fa-level-up:before { content: \"\\f148\"; } .fa-level-down:before { content: \"\\f149\"; } .fa-check-square:before { content: \"\\f14a\"; } .fa-pencil-square:before { content: \"\\f14b\"; } .fa-external-link-square:before { content: \"\\f14c\"; } .fa-share-square:before { content: \"\\f14d\"; } .fa-compass:before { content: \"\\f14e\"; } .fa-toggle-down:before, .fa-caret-square-o-down:before { content: \"\\f150\"; } .fa-toggle-up:before, .fa-caret-square-o-up:before { content: \"\\f151\"; } .fa-toggle-right:before, .fa-caret-square-o-right:before { content: \"\\f152\"; } .fa-euro:before, .fa-eur:before { content: \"\\f153\"; } .fa-gbp:before { content: \"\\f154\"; } .fa-dollar:before, .fa-usd:before { content: \"\\f155\"; } .fa-rupee:before, .fa-inr:before { content: \"\\f156\"; } .fa-cny:before, .fa-rmb:before, .fa-yen:before, .fa-jpy:before { content: \"\\f157\"; } .fa-ruble:before, .fa-rouble:before, .fa-rub:before { content: \"\\f158\"; } .fa-won:before, .fa-krw:before { content: \"\\f159\"; } .fa-bitcoin:before, .fa-btc:before { content: \"\\f15a\"; } .fa-file:before { content: \"\\f15b\"; } .fa-file-text:before { content: \"\\f15c\"; } .fa-sort-alpha-asc:before { content: \"\\f15d\"; } .fa-sort-alpha-desc:before { content: \"\\f15e\"; } .fa-sort-amount-asc:before { content: \"\\f160\"; } .fa-sort-amount-desc:before { content: \"\\f161\"; } .fa-sort-numeric-asc:before { content: \"\\f162\"; } .fa-sort-numeric-desc:before { content: \"\\f163\"; } .fa-thumbs-up:before { content: \"\\f164\"; } .fa-thumbs-down:before { content: \"\\f165\"; } .fa-youtube-square:before { content: \"\\f166\"; } .fa-youtube:before { content: \"\\f167\"; } .fa-xing:before { content: \"\\f168\"; } .fa-xing-square:before { content: \"\\f169\"; } .fa-youtube-play:before { content: \"\\f16a\"; } .fa-dropbox:before { content: \"\\f16b\"; } .fa-stack-overflow:before { content: \"\\f16c\"; } .fa-instagram:before { content: \"\\f16d\"; } .fa-flickr:before { content: \"\\f16e\"; } .fa-adn:before { content: \"\\f170\"; } .fa-bitbucket:before { content: \"\\f171\"; } .fa-bitbucket-square:before { content: \"\\f172\"; } .fa-tumblr:before { content: \"\\f173\"; } .fa-tumblr-square:before { content: \"\\f174\"; } .fa-long-arrow-down:before { content: \"\\f175\"; } .fa-long-arrow-up:before { content: \"\\f176\"; } .fa-long-arrow-left:before { content: \"\\f177\"; } .fa-long-arrow-right:before { content: \"\\f178\"; } .fa-apple:before { content: \"\\f179\"; } .fa-windows:before { content: \"\\f17a\"; } .fa-android:before { content: \"\\f17b\"; } .fa-linux:before { content: \"\\f17c\"; } .fa-dribbble:before { content: \"\\f17d\"; } .fa-skype:before { content: \"\\f17e\"; } .fa-foursquare:before { content: \"\\f180\"; } .fa-trello:before { content: \"\\f181\"; } .fa-female:before { content: \"\\f182\"; } .fa-male:before { content: \"\\f183\"; } .fa-gittip:before, .fa-gratipay:before { content: \"\\f184\"; } .fa-sun-o:before { content: \"\\f185\"; } .fa-moon-o:before { content: \"\\f186\"; } .fa-archive:before { content: \"\\f187\"; } .fa-bug:before { content: \"\\f188\"; } .fa-vk:before { content: \"\\f189\"; } .fa-weibo:before { content: \"\\f18a\"; } .fa-renren:before { content: \"\\f18b\"; } .fa-pagelines:before { content: \"\\f18c\"; } .fa-stack-exchange:before { content: \"\\f18d\"; } .fa-arrow-circle-o-right:before { content: \"\\f18e\"; } .fa-arrow-circle-o-left:before { content: \"\\f190\"; } .fa-toggle-left:before, .fa-caret-square-o-left:before { content: \"\\f191\"; } .fa-dot-circle-o:before { content: \"\\f192\"; } .fa-wheelchair:before { content: \"\\f193\"; } .fa-vimeo-square:before { content: \"\\f194\"; } .fa-turkish-lira:before, .fa-try:before { content: \"\\f195\"; } .fa-plus-square-o:before { content: \"\\f196\"; } .fa-space-shuttle:before { content: \"\\f197\"; } .fa-slack:before { content: \"\\f198\"; } .fa-envelope-square:before { content: \"\\f199\"; } .fa-wordpress:before { content: \"\\f19a\"; } .fa-openid:before { content: \"\\f19b\"; } .fa-institution:before, .fa-bank:before, .fa-university:before { content: \"\\f19c\"; } .fa-mortar-board:before, .fa-graduation-cap:before { content: \"\\f19d\"; } .fa-yahoo:before { content: \"\\f19e\"; } .fa-google:before { content: \"\\f1a0\"; } .fa-reddit:before { content: \"\\f1a1\"; } .fa-reddit-square:before { content: \"\\f1a2\"; } .fa-stumbleupon-circle:before { content: \"\\f1a3\"; } .fa-stumbleupon:before { content: \"\\f1a4\"; } .fa-delicious:before { content: \"\\f1a5\"; } .fa-digg:before { content: \"\\f1a6\"; } .fa-pied-piper-pp:before { content: \"\\f1a7\"; } .fa-pied-piper-alt:before { content: \"\\f1a8\"; } .fa-drupal:before { content: \"\\f1a9\"; } .fa-joomla:before { content: \"\\f1aa\"; } .fa-language:before { content: \"\\f1ab\"; } .fa-fax:before { content: \"\\f1ac\"; } .fa-building:before { content: \"\\f1ad\"; } .fa-child:before { content: \"\\f1ae\"; } .fa-paw:before { content: \"\\f1b0\"; } .fa-spoon:before { content: \"\\f1b1\"; } .fa-cube:before { content: \"\\f1b2\"; } .fa-cubes:before { content: \"\\f1b3\"; } .fa-behance:before { content: \"\\f1b4\"; } .fa-behance-square:before { content: \"\\f1b5\"; } .fa-steam:before { content: \"\\f1b6\"; } .fa-steam-square:before { content: \"\\f1b7\"; } .fa-recycle:before { content: \"\\f1b8\"; } .fa-automobile:before, .fa-car:before { content: \"\\f1b9\"; } .fa-cab:before, .fa-taxi:before { content: \"\\f1ba\"; } .fa-tree:before { content: \"\\f1bb\"; } .fa-spotify:before { content: \"\\f1bc\"; } .fa-deviantart:before { content: \"\\f1bd\"; } .fa-soundcloud:before { content: \"\\f1be\"; } .fa-database:before { content: \"\\f1c0\"; } .fa-file-pdf-o:before { content: \"\\f1c1\"; } .fa-file-word-o:before { content: \"\\f1c2\"; } .fa-file-excel-o:before { content: \"\\f1c3\"; } .fa-file-powerpoint-o:before { content: \"\\f1c4\"; } .fa-file-photo-o:before, .fa-file-picture-o:before, .fa-file-image-o:before { content: \"\\f1c5\"; } .fa-file-zip-o:before, .fa-file-archive-o:before { content: \"\\f1c6\"; } .fa-file-sound-o:before, .fa-file-audio-o:before { content: \"\\f1c7\"; } .fa-file-movie-o:before, .fa-file-video-o:before { content: \"\\f1c8\"; } .fa-file-code-o:before { content: \"\\f1c9\"; } .fa-vine:before { content: \"\\f1ca\"; } .fa-codepen:before { content: \"\\f1cb\"; } .fa-jsfiddle:before { content: \"\\f1cc\"; } .fa-life-bouy:before, .fa-life-buoy:before, .fa-life-saver:before, .fa-support:before, .fa-life-ring:before { content: \"\\f1cd\"; } .fa-circle-o-notch:before { content: \"\\f1ce\"; } .fa-ra:before, .fa-resistance:before, .fa-rebel:before { content: \"\\f1d0\"; } .fa-ge:before, .fa-empire:before { content: \"\\f1d1\"; } .fa-git-square:before { content: \"\\f1d2\"; } .fa-git:before { content: \"\\f1d3\"; } .fa-y-combinator-square:before, .fa-yc-square:before, .fa-hacker-news:before { content: \"\\f1d4\"; } .fa-tencent-weibo:before { content: \"\\f1d5\"; } .fa-qq:before { content: \"\\f1d6\"; } .fa-wechat:before, .fa-weixin:before { content: \"\\f1d7\"; } .fa-send:before, .fa-paper-plane:before { content: \"\\f1d8\"; } .fa-send-o:before, .fa-paper-plane-o:before { content: \"\\f1d9\"; } .fa-history:before { content: \"\\f1da\"; } .fa-circle-thin:before { content: \"\\f1db\"; } .fa-header:before { content: \"\\f1dc\"; } .fa-paragraph:before { content: \"\\f1dd\"; } .fa-sliders:before { content: \"\\f1de\"; } .fa-share-alt:before { content: \"\\f1e0\"; } .fa-share-alt-square:before { content: \"\\f1e1\"; } .fa-bomb:before { content: \"\\f1e2\"; } .fa-soccer-ball-o:before, .fa-futbol-o:before { content: \"\\f1e3\"; } .fa-tty:before { content: \"\\f1e4\"; } .fa-binoculars:before { content: \"\\f1e5\"; } .fa-plug:before { content: \"\\f1e6\"; } .fa-slideshare:before { content: \"\\f1e7\"; } .fa-twitch:before { content: \"\\f1e8\"; } .fa-yelp:before { content: \"\\f1e9\"; } .fa-newspaper-o:before { content: \"\\f1ea\"; } .fa-wifi:before { content: \"\\f1eb\"; } .fa-calculator:before { content: \"\\f1ec\"; } .fa-paypal:before { content: \"\\f1ed\"; } .fa-google-wallet:before { content: \"\\f1ee\"; } .fa-cc-visa:before { content: \"\\f1f0\"; } .fa-cc-mastercard:before { content: \"\\f1f1\"; } .fa-cc-discover:before { content: \"\\f1f2\"; } .fa-cc-amex:before { content: \"\\f1f3\"; } .fa-cc-paypal:before { content: \"\\f1f4\"; } .fa-cc-stripe:before { content: \"\\f1f5\"; } .fa-bell-slash:before { content: \"\\f1f6\"; } .fa-bell-slash-o:before { content: \"\\f1f7\"; } .fa-trash:before { content: \"\\f1f8\"; } .fa-copyright:before { content: \"\\f1f9\"; } .fa-at:before { content: \"\\f1fa\"; } .fa-eyedropper:before { content: \"\\f1fb\"; } .fa-paint-brush:before { content: \"\\f1fc\"; } .fa-birthday-cake:before { content: \"\\f1fd\"; } .fa-area-chart:before { content: \"\\f1fe\"; } .fa-pie-chart:before { content: \"\\f200\"; } .fa-line-chart:before { content: \"\\f201\"; } .fa-lastfm:before { content: \"\\f202\"; } .fa-lastfm-square:before { content: \"\\f203\"; } .fa-toggle-off:before { content: \"\\f204\"; } .fa-toggle-on:before { content: \"\\f205\"; } .fa-bicycle:before { content: \"\\f206\"; } .fa-bus:before { content: \"\\f207\"; } .fa-ioxhost:before { content: \"\\f208\"; } .fa-angellist:before { content: \"\\f209\"; } .fa-cc:before { content: \"\\f20a\"; } .fa-shekel:before, .fa-sheqel:before, .fa-ils:before { content: \"\\f20b\"; } .fa-meanpath:before { content: \"\\f20c\"; } .fa-buysellads:before { content: \"\\f20d\"; } .fa-connectdevelop:before { content: \"\\f20e\"; } .fa-dashcube:before { content: \"\\f210\"; } .fa-forumbee:before { content: \"\\f211\"; } .fa-leanpub:before { content: \"\\f212\"; } .fa-sellsy:before { content: \"\\f213\"; } .fa-shirtsinbulk:before { content: \"\\f214\"; } .fa-simplybuilt:before { content: \"\\f215\"; } .fa-skyatlas:before { content: \"\\f216\"; } .fa-cart-plus:before { content: \"\\f217\"; } .fa-cart-arrow-down:before { content: \"\\f218\"; } .fa-diamond:before { content: \"\\f219\"; } .fa-ship:before { content: \"\\f21a\"; } .fa-user-secret:before { content: \"\\f21b\"; } .fa-motorcycle:before { content: \"\\f21c\"; } .fa-street-view:before { content: \"\\f21d\"; } .fa-heartbeat:before { content: \"\\f21e\"; } .fa-venus:before { content: \"\\f221\"; } .fa-mars:before { content: \"\\f222\"; } .fa-mercury:before { content: \"\\f223\"; } .fa-intersex:before, .fa-transgender:before { content: \"\\f224\"; } .fa-transgender-alt:before { content: \"\\f225\"; } .fa-venus-double:before { content: \"\\f226\"; } .fa-mars-double:before { content: \"\\f227\"; } .fa-venus-mars:before { content: \"\\f228\"; } .fa-mars-stroke:before { content: \"\\f229\"; } .fa-mars-stroke-v:before { content: \"\\f22a\"; } .fa-mars-stroke-h:before { content: \"\\f22b\"; } .fa-neuter:before { content: \"\\f22c\"; } .fa-genderless:before { content: \"\\f22d\"; } .fa-facebook-official:before { content: \"\\f230\"; } .fa-pinterest-p:before { content: \"\\f231\"; } .fa-whatsapp:before { content: \"\\f232\"; } .fa-server:before { content: \"\\f233\"; } .fa-user-plus:before { content: \"\\f234\"; } .fa-user-times:before { content: \"\\f235\"; } .fa-hotel:before, .fa-bed:before { content: \"\\f236\"; } .fa-viacoin:before { content: \"\\f237\"; } .fa-train:before { content: \"\\f238\"; } .fa-subway:before { content: \"\\f239\"; } .fa-medium:before { content: \"\\f23a\"; } .fa-yc:before, .fa-y-combinator:before { content: \"\\f23b\"; } .fa-optin-monster:before { content: \"\\f23c\"; } .fa-opencart:before { content: \"\\f23d\"; } .fa-expeditedssl:before { content: \"\\f23e\"; } .fa-battery-4:before, .fa-battery:before, .fa-battery-full:before { content: \"\\f240\"; } .fa-battery-3:before, .fa-battery-three-quarters:before { content: \"\\f241\"; } .fa-battery-2:before, .fa-battery-half:before { content: \"\\f242\"; } .fa-battery-1:before, .fa-battery-quarter:before { content: \"\\f243\"; } .fa-battery-0:before, .fa-battery-empty:before { content: \"\\f244\"; } .fa-mouse-pointer:before { content: \"\\f245\"; } .fa-i-cursor:before { content: \"\\f246\"; } .fa-object-group:before { content: \"\\f247\"; } .fa-object-ungroup:before { content: \"\\f248\"; } .fa-sticky-note:before { content: \"\\f249\"; } .fa-sticky-note-o:before { content: \"\\f24a\"; } .fa-cc-jcb:before { content: \"\\f24b\"; } .fa-cc-diners-club:before { content: \"\\f24c\"; } .fa-clone:before { content: \"\\f24d\"; } .fa-balance-scale:before { content: \"\\f24e\"; } .fa-hourglass-o:before { content: \"\\f250\"; } .fa-hourglass-1:before, .fa-hourglass-start:before { content: \"\\f251\"; } .fa-hourglass-2:before, .fa-hourglass-half:before { content: \"\\f252\"; } .fa-hourglass-3:before, .fa-hourglass-end:before { content: \"\\f253\"; } .fa-hourglass:before { content: \"\\f254\"; } .fa-hand-grab-o:before, .fa-hand-rock-o:before { content: \"\\f255\"; } .fa-hand-stop-o:before, .fa-hand-paper-o:before { content: \"\\f256\"; } .fa-hand-scissors-o:before { content: \"\\f257\"; } .fa-hand-lizard-o:before { content: \"\\f258\"; } .fa-hand-spock-o:before { content: \"\\f259\"; } .fa-hand-pointer-o:before { content: \"\\f25a\"; } .fa-hand-peace-o:before { content: \"\\f25b\"; } .fa-trademark:before { content: \"\\f25c\"; } .fa-registered:before { content: \"\\f25d\"; } .fa-creative-commons:before { content: \"\\f25e\"; } .fa-gg:before { content: \"\\f260\"; } .fa-gg-circle:before { content: \"\\f261\"; } .fa-tripadvisor:before { content: \"\\f262\"; } .fa-odnoklassniki:before { content: \"\\f263\"; } .fa-odnoklassniki-square:before { content: \"\\f264\"; } .fa-get-pocket:before { content: \"\\f265\"; } .fa-wikipedia-w:before { content: \"\\f266\"; } .fa-safari:before { content: \"\\f267\"; } .fa-chrome:before { content: \"\\f268\"; } .fa-firefox:before { content: \"\\f269\"; } .fa-opera:before { content: \"\\f26a\"; } .fa-internet-explorer:before { content: \"\\f26b\"; } .fa-tv:before, .fa-television:before { content: \"\\f26c\"; } .fa-contao:before { content: \"\\f26d\"; } .fa-500px:before { content: \"\\f26e\"; } .fa-amazon:before { content: \"\\f270\"; } .fa-calendar-plus-o:before { content: \"\\f271\"; } .fa-calendar-minus-o:before { content: \"\\f272\"; } .fa-calendar-times-o:before { content: \"\\f273\"; } .fa-calendar-check-o:before { content: \"\\f274\"; } .fa-industry:before { content: \"\\f275\"; } .fa-map-pin:before { content: \"\\f276\"; } .fa-map-signs:before { content: \"\\f277\"; } .fa-map-o:before { content: \"\\f278\"; } .fa-map:before { content: \"\\f279\"; } .fa-commenting:before { content: \"\\f27a\"; } .fa-commenting-o:before { content: \"\\f27b\"; } .fa-houzz:before { content: \"\\f27c\"; } .fa-vimeo:before { content: \"\\f27d\"; } .fa-black-tie:before { content: \"\\f27e\"; } .fa-fonticons:before { content: \"\\f280\"; } .fa-reddit-alien:before { content: \"\\f281\"; } .fa-edge:before { content: \"\\f282\"; } .fa-credit-card-alt:before { content: \"\\f283\"; } .fa-codiepie:before { content: \"\\f284\"; } .fa-modx:before { content: \"\\f285\"; } .fa-fort-awesome:before { content: \"\\f286\"; } .fa-usb:before { content: \"\\f287\"; } .fa-product-hunt:before { content: \"\\f288\"; } .fa-mixcloud:before { content: \"\\f289\"; } .fa-scribd:before { content: \"\\f28a\"; } .fa-pause-circle:before { content: \"\\f28b\"; } .fa-pause-circle-o:before { content: \"\\f28c\"; } .fa-stop-circle:before { content: \"\\f28d\"; } .fa-stop-circle-o:before { content: \"\\f28e\"; } .fa-shopping-bag:before { content: \"\\f290\"; } .fa-shopping-basket:before { content: \"\\f291\"; } .fa-hashtag:before { content: \"\\f292\"; } .fa-bluetooth:before { content: \"\\f293\"; } .fa-bluetooth-b:before { content: \"\\f294\"; } .fa-percent:before { content: \"\\f295\"; } .fa-gitlab:before { content: \"\\f296\"; } .fa-wpbeginner:before { content: \"\\f297\"; } .fa-wpforms:before { content: \"\\f298\"; } .fa-envira:before { content: \"\\f299\"; } .fa-universal-access:before { content: \"\\f29a\"; } .fa-wheelchair-alt:before { content: \"\\f29b\"; } .fa-question-circle-o:before { content: \"\\f29c\"; } .fa-blind:before { content: \"\\f29d\"; } .fa-audio-description:before { content: \"\\f29e\"; } .fa-volume-control-phone:before { content: \"\\f2a0\"; } .fa-braille:before { content: \"\\f2a1\"; } .fa-assistive-listening-systems:before { content: \"\\f2a2\"; } .fa-asl-interpreting:before, .fa-american-sign-language-interpreting:before { content: \"\\f2a3\"; } .fa-deafness:before, .fa-hard-of-hearing:before, .fa-deaf:before { content: \"\\f2a4\"; } .fa-glide:before { content: \"\\f2a5\"; } .fa-glide-g:before { content: \"\\f2a6\"; } .fa-signing:before, .fa-sign-language:before { content: \"\\f2a7\"; } .fa-low-vision:before { content: \"\\f2a8\"; } .fa-viadeo:before { content: \"\\f2a9\"; } .fa-viadeo-square:before { content: \"\\f2aa\"; } .fa-snapchat:before { content: \"\\f2ab\"; } .fa-snapchat-ghost:before { content: \"\\f2ac\"; } .fa-snapchat-square:before { content: \"\\f2ad\"; } .fa-pied-piper:before { content: \"\\f2ae\"; } .fa-first-order:before { content: \"\\f2b0\"; } .fa-yoast:before { content: \"\\f2b1\"; } .fa-themeisle:before { content: \"\\f2b2\"; } .fa-google-plus-circle:before, .fa-google-plus-official:before { content: \"\\f2b3\"; } .fa-fa:before, .fa-font-awesome:before { content: \"\\f2b4\"; } .fa-handshake-o:before { content: \"\\f2b5\"; } .fa-envelope-open:before { content: \"\\f2b6\"; } .fa-envelope-open-o:before { content: \"\\f2b7\"; } .fa-linode:before { content: \"\\f2b8\"; } .fa-address-book:before { content: \"\\f2b9\"; } .fa-address-book-o:before { content: \"\\f2ba\"; } .fa-vcard:before, .fa-address-card:before { content: \"\\f2bb\"; } .fa-vcard-o:before, .fa-address-card-o:before { content: \"\\f2bc\"; } .fa-user-circle:before { content: \"\\f2bd\"; } .fa-user-circle-o:before { content: \"\\f2be\"; } .fa-user-o:before { content: \"\\f2c0\"; } .fa-id-badge:before { content: \"\\f2c1\"; } .fa-drivers-license:before, .fa-id-card:before { content: \"\\f2c2\"; } .fa-drivers-license-o:before, .fa-id-card-o:before { content: \"\\f2c3\"; } .fa-quora:before { content: \"\\f2c4\"; } .fa-free-code-camp:before { content: \"\\f2c5\"; } .fa-telegram:before { content: \"\\f2c6\"; } .fa-thermometer-4:before, .fa-thermometer:before, .fa-thermometer-full:before { content: \"\\f2c7\"; } .fa-thermometer-3:before, .fa-thermometer-three-quarters:before { content: \"\\f2c8\"; } .fa-thermometer-2:before, .fa-thermometer-half:before { content: \"\\f2c9\"; } .fa-thermometer-1:before, .fa-thermometer-quarter:before { content: \"\\f2ca\"; } .fa-thermometer-0:before, .fa-thermometer-empty:before { content: \"\\f2cb\"; } .fa-shower:before { content: \"\\f2cc\"; } .fa-bathtub:before, .fa-s15:before, .fa-bath:before { content: \"\\f2cd\"; } .fa-podcast:before { content: \"\\f2ce\"; } .fa-window-maximize:before { content: \"\\f2d0\"; } .fa-window-minimize:before { content: \"\\f2d1\"; } .fa-window-restore:before { content: \"\\f2d2\"; } .fa-times-rectangle:before, .fa-window-close:before { content: \"\\f2d3\"; } .fa-times-rectangle-o:before, .fa-window-close-o:before { content: \"\\f2d4\"; } .fa-bandcamp:before { content: \"\\f2d5\"; } .fa-grav:before { content: \"\\f2d6\"; } .fa-etsy:before { content: \"\\f2d7\"; } .fa-imdb:before { content: \"\\f2d8\"; } .fa-ravelry:before { content: \"\\f2d9\"; } .fa-eercast:before { content: \"\\f2da\"; } .fa-microchip:before { content: \"\\f2db\"; } .fa-snowflake-o:before { content: \"\\f2dc\"; } .fa-superpowers:before { content: \"\\f2dd\"; } .fa-wpexplorer:before { content: \"\\f2de\"; } .fa-meetup:before { content: \"\\f2e0\"; } .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; } .sr-only-focusable:active, .sr-only-focusable:focus { position: static; width: auto; height: auto; margin: 0; overflow: visible; clip: auto; } .sr-only-focusable:active, .sr-only-focusable:focus { position: static; width: auto; height: auto; margin: 0; overflow: visible; clip: auto; } /*! * * IPython base * */ .modal.fade .modal-dialog { -webkit-transform: translate(0, 0); -ms-transform: translate(0, 0); -o-transform: translate(0, 0); transform: translate(0, 0); } code { color: #000; } pre { font-size: inherit; line-height: inherit; } label { font-weight: normal; } /* Make the page background atleast 100% the height of the view port */ /* Make the page itself atleast 70% the height of the view port */ .border-box-sizing { box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } .corner-all { border-radius: 2px; } .no-padding { padding: 0px; } /* Flexible box model classes */ /* Taken from Alex Russell http://infrequently.org/2009/08/css-3-progress/ */ /* This file is a compatability layer. It allows the usage of flexible box model layouts accross multiple browsers, including older browsers. The newest, universal implementation of the flexible box model is used when available (see `Modern browsers` comments below). Browsers that are known to implement this new spec completely include: Firefox 28.0+ Chrome 29.0+ Internet Explorer 11+ Opera 17.0+ Browsers not listed, including Safari, are supported via the styling under the `Old browsers` comments below. */ .hbox { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } .hbox > * { /* Old browsers */ -webkit-box-flex: 0; -moz-box-flex: 0; box-flex: 0; /* Modern browsers */ flex: none; } .vbox { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } .vbox > * { /* Old browsers */ -webkit-box-flex: 0; -moz-box-flex: 0; box-flex: 0; /* Modern browsers */ flex: none; } .hbox.reverse, .vbox.reverse, .reverse { /* Old browsers */ -webkit-box-direction: reverse; -moz-box-direction: reverse; box-direction: reverse; /* Modern browsers */ flex-direction: row-reverse; } .hbox.box-flex0, .vbox.box-flex0, .box-flex0 { /* Old browsers */ -webkit-box-flex: 0; -moz-box-flex: 0; box-flex: 0; /* Modern browsers */ flex: none; width: auto; } .hbox.box-flex1, .vbox.box-flex1, .box-flex1 { /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } .hbox.box-flex, .vbox.box-flex, .box-flex { /* Old browsers */ /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } .hbox.box-flex2, .vbox.box-flex2, .box-flex2 { /* Old browsers */ -webkit-box-flex: 2; -moz-box-flex: 2; box-flex: 2; /* Modern browsers */ flex: 2; } .box-group1 { /* Deprecated */ -webkit-box-flex-group: 1; -moz-box-flex-group: 1; box-flex-group: 1; } .box-group2 { /* Deprecated */ -webkit-box-flex-group: 2; -moz-box-flex-group: 2; box-flex-group: 2; } .hbox.start, .vbox.start, .start { /* Old browsers */ -webkit-box-pack: start; -moz-box-pack: start; box-pack: start; /* Modern browsers */ justify-content: flex-start; } .hbox.end, .vbox.end, .end { /* Old browsers */ -webkit-box-pack: end; -moz-box-pack: end; box-pack: end; /* Modern browsers */ justify-content: flex-end; } .hbox.center, .vbox.center, .center { /* Old browsers */ -webkit-box-pack: center; -moz-box-pack: center; box-pack: center; /* Modern browsers */ justify-content: center; } .hbox.baseline, .vbox.baseline, .baseline { /* Old browsers */ -webkit-box-pack: baseline; -moz-box-pack: baseline; box-pack: baseline; /* Modern browsers */ justify-content: baseline; } .hbox.stretch, .vbox.stretch, .stretch { /* Old browsers */ -webkit-box-pack: stretch; -moz-box-pack: stretch; box-pack: stretch; /* Modern browsers */ justify-content: stretch; } .hbox.align-start, .vbox.align-start, .align-start { /* Old browsers */ -webkit-box-align: start; -moz-box-align: start; box-align: start; /* Modern browsers */ align-items: flex-start; } .hbox.align-end, .vbox.align-end, .align-end { /* Old browsers */ -webkit-box-align: end; -moz-box-align: end; box-align: end; /* Modern browsers */ align-items: flex-end; } .hbox.align-center, .vbox.align-center, .align-center { /* Old browsers */ -webkit-box-align: center; -moz-box-align: center; box-align: center; /* Modern browsers */ align-items: center; } .hbox.align-baseline, .vbox.align-baseline, .align-baseline { /* Old browsers */ -webkit-box-align: baseline; -moz-box-align: baseline; box-align: baseline; /* Modern browsers */ align-items: baseline; } .hbox.align-stretch, .vbox.align-stretch, .align-stretch { /* Old browsers */ -webkit-box-align: stretch; -moz-box-align: stretch; box-align: stretch; /* Modern browsers */ align-items: stretch; } div.error { margin: 2em; text-align: center; } div.error > h1 { font-size: 500%; line-height: normal; } div.error > p { font-size: 200%; line-height: normal; } div.traceback-wrapper { text-align: left; max-width: 800px; margin: auto; } div.traceback-wrapper pre.traceback { max-height: 600px; overflow: auto; } /** * Primary styles * * Author: Jupyter Development Team */ body { background-color: #fff; /* This makes sure that the body covers the entire window and needs to be in a different element than the display: box in wrapper below */ position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; overflow: visible; } body > #header { /* Initially hidden to prevent FLOUC */ display: none; background-color: #fff; /* Display over codemirror */ position: relative; z-index: 100; } body > #header #header-container { display: flex; flex-direction: row; justify-content: space-between; padding: 5px; padding-bottom: 5px; padding-top: 5px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } body > #header .header-bar { width: 100%; height: 1px; background: #e7e7e7; margin-bottom: -1px; } @media print { body > #header { display: none !important; } } #header-spacer { width: 100%; visibility: hidden; } @media print { #header-spacer { display: none; } } #ipython_notebook { padding-left: 0px; padding-top: 1px; padding-bottom: 1px; } [dir=\"rtl\"] #ipython_notebook { margin-right: 10px; margin-left: 0; } [dir=\"rtl\"] #ipython_notebook.pull-left { float: right !important; float: right; } .flex-spacer { flex: 1; } #noscript { width: auto; padding-top: 16px; padding-bottom: 16px; text-align: center; font-size: 22px; color: red; font-weight: bold; } #ipython_notebook img { height: 28px; } #site { width: 100%; display: none; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; overflow: auto; } @media print { #site { height: auto !important; } } /* Smaller buttons */ .ui-button .ui-button-text { padding: 0.2em 0.8em; font-size: 77%; } input.ui-button { padding: 0.3em 0.9em; } span#kernel_logo_widget { margin: 0 10px; } span#login_widget { float: right; } [dir=\"rtl\"] span#login_widget { float: left; } span#login_widget > .button, #logout { color: #333; background-color: #fff; border-color: #ccc; } span#login_widget > .button:focus, #logout:focus, span#login_widget > .button.focus, #logout.focus { color: #333; background-color: #e6e6e6; border-color: #8c8c8c; } span#login_widget > .button:hover, #logout:hover { color: #333; background-color: #e6e6e6; border-color: #adadad; } span#login_widget > .button:active, #logout:active, span#login_widget > .button.active, #logout.active, .open > .dropdown-togglespan#login_widget > .button, .open > .dropdown-toggle#logout { color: #333; background-color: #e6e6e6; border-color: #adadad; } span#login_widget > .button:active:hover, #logout:active:hover, span#login_widget > .button.active:hover, #logout.active:hover, .open > .dropdown-togglespan#login_widget > .button:hover, .open > .dropdown-toggle#logout:hover, span#login_widget > .button:active:focus, #logout:active:focus, span#login_widget > .button.active:focus, #logout.active:focus, .open > .dropdown-togglespan#login_widget > .button:focus, .open > .dropdown-toggle#logout:focus, span#login_widget > .button:active.focus, #logout:active.focus, span#login_widget > .button.active.focus, #logout.active.focus, .open > .dropdown-togglespan#login_widget > .button.focus, .open > .dropdown-toggle#logout.focus { color: #333; background-color: #d4d4d4; border-color: #8c8c8c; } span#login_widget > .button:active, #logout:active, span#login_widget > .button.active, #logout.active, .open > .dropdown-togglespan#login_widget > .button, .open > .dropdown-toggle#logout { background-image: none; } span#login_widget > .button.disabled:hover, #logout.disabled:hover, span#login_widget > .button[disabled]:hover, #logout[disabled]:hover, fieldset[disabled] span#login_widget > .button:hover, fieldset[disabled] #logout:hover, span#login_widget > .button.disabled:focus, #logout.disabled:focus, span#login_widget > .button[disabled]:focus, #logout[disabled]:focus, fieldset[disabled] span#login_widget > .button:focus, fieldset[disabled] #logout:focus, span#login_widget > .button.disabled.focus, #logout.disabled.focus, span#login_widget > .button[disabled].focus, #logout[disabled].focus, fieldset[disabled] span#login_widget > .button.focus, fieldset[disabled] #logout.focus { background-color: #fff; border-color: #ccc; } span#login_widget > .button .badge, #logout .badge { color: #fff; background-color: #333; } .nav-header { text-transform: none; } #header > span { margin-top: 10px; } .modal_stretch .modal-dialog { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; min-height: 80vh; } .modal_stretch .modal-dialog .modal-body { max-height: calc(100vh - 200px); overflow: auto; flex: 1; } .modal-header { cursor: move; } @media (min-width: 768px) { .modal .modal-dialog { width: 700px; } } @media (min-width: 768px) { select.form-control { margin-left: 12px; margin-right: 12px; } } /*! * * IPython auth * */ .center-nav { display: inline-block; margin-bottom: -4px; } [dir=\"rtl\"] .center-nav form.pull-left { float: right !important; float: right; } [dir=\"rtl\"] .center-nav .navbar-text { float: right; } [dir=\"rtl\"] .navbar-inner { text-align: right; } [dir=\"rtl\"] div.text-left { text-align: right; } /*! * * IPython tree view * */ /* We need an invisible input field on top of the sentense*/ /* \"Drag file onto the list ...\" */ .alternate_upload { background-color: none; display: inline; } .alternate_upload.form { padding: 0; margin: 0; } .alternate_upload input.fileinput { position: absolute; display: block; width: 100%; height: 100%; overflow: hidden; cursor: pointer; opacity: 0; z-index: 2; } .alternate_upload .btn-xs > input.fileinput { margin: -1px -5px; } .alternate_upload .btn-upload { position: relative; height: 22px; } ::-webkit-file-upload-button { cursor: pointer; } /** * Primary styles * * Author: Jupyter Development Team */ ul#tabs { margin-bottom: 4px; } ul#tabs a { padding-top: 6px; padding-bottom: 4px; } [dir=\"rtl\"] ul#tabs.nav-tabs > li { float: right; } [dir=\"rtl\"] ul#tabs.nav.nav-tabs { padding-right: 0; } ul.breadcrumb a:focus, ul.breadcrumb a:hover { text-decoration: none; } ul.breadcrumb i.icon-home { font-size: 16px; margin-right: 4px; } ul.breadcrumb span { color: #5e5e5e; } .list_toolbar { padding: 4px 0 4px 0; vertical-align: middle; } .list_toolbar .tree-buttons { padding-top: 1px; } [dir=\"rtl\"] .list_toolbar .tree-buttons .pull-right { float: left !important; float: left; } [dir=\"rtl\"] .list_toolbar .col-sm-4, [dir=\"rtl\"] .list_toolbar .col-sm-8 { float: right; } .dynamic-buttons { padding-top: 3px; display: inline-block; } .list_toolbar [class*=\"span\"] { min-height: 24px; } .list_header { font-weight: bold; background-color: #EEE; } .list_placeholder { font-weight: bold; padding-top: 4px; padding-bottom: 4px; padding-left: 7px; padding-right: 7px; } .list_container { margin-top: 4px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 2px; } .list_container > div { border-bottom: 1px solid #ddd; } .list_container > div:hover .list-item { background-color: red; } .list_container > div:last-child { border: none; } .list_item:hover .list_item { background-color: #ddd; } .list_item a { text-decoration: none; } .list_item:hover { background-color: #fafafa; } .list_header > div, .list_item > div { padding-top: 4px; padding-bottom: 4px; padding-left: 7px; padding-right: 7px; line-height: 22px; } .list_header > div input, .list_item > div input { margin-right: 7px; margin-left: 14px; vertical-align: text-bottom; line-height: 22px; position: relative; top: -1px; } .list_header > div .item_link, .list_item > div .item_link { margin-left: -1px; vertical-align: baseline; line-height: 22px; } [dir=\"rtl\"] .list_item > div input { margin-right: 0; } .new-file input[type=checkbox] { visibility: hidden; } .item_name { line-height: 22px; height: 24px; } .item_icon { font-size: 14px; color: #5e5e5e; margin-right: 7px; margin-left: 7px; line-height: 22px; vertical-align: baseline; } .item_modified { margin-right: 7px; margin-left: 7px; } [dir=\"rtl\"] .item_modified.pull-right { float: left !important; float: left; } .item_buttons { line-height: 1em; margin-left: -5px; } .item_buttons .btn, .item_buttons .btn-group, .item_buttons .input-group { float: left; } .item_buttons > .btn, .item_buttons > .btn-group, .item_buttons > .input-group { margin-left: 5px; } .item_buttons .btn { min-width: 13ex; } .item_buttons .running-indicator { padding-top: 4px; color: #5cb85c; } .item_buttons .kernel-name { padding-top: 4px; color: #5bc0de; margin-right: 7px; float: left; } [dir=\"rtl\"] .item_buttons.pull-right { float: left !important; float: left; } [dir=\"rtl\"] .item_buttons .kernel-name { margin-left: 7px; float: right; } .toolbar_info { height: 24px; line-height: 24px; } .list_item input:not([type=checkbox]) { padding-top: 3px; padding-bottom: 3px; height: 22px; line-height: 14px; margin: 0px; } .highlight_text { color: blue; } #project_name { display: inline-block; padding-left: 7px; margin-left: -2px; } #project_name > .breadcrumb { padding: 0px; margin-bottom: 0px; background-color: transparent; font-weight: bold; } .sort_button { display: inline-block; padding-left: 7px; } [dir=\"rtl\"] .sort_button.pull-right { float: left !important; float: left; } #tree-selector { padding-right: 0px; } #button-select-all { min-width: 50px; } [dir=\"rtl\"] #button-select-all.btn { float: right ; } #select-all { margin-left: 7px; margin-right: 2px; margin-top: 2px; height: 16px; } [dir=\"rtl\"] #select-all.pull-left { float: right !important; float: right; } .menu_icon { margin-right: 2px; } .tab-content .row { margin-left: 0px; margin-right: 0px; } .folder_icon:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f114\"; } .folder_icon:before.fa-pull-left { margin-right: .3em; } .folder_icon:before.fa-pull-right { margin-left: .3em; } .folder_icon:before.pull-left { margin-right: .3em; } .folder_icon:before.pull-right { margin-left: .3em; } .notebook_icon:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f02d\"; position: relative; top: -1px; } .notebook_icon:before.fa-pull-left { margin-right: .3em; } .notebook_icon:before.fa-pull-right { margin-left: .3em; } .notebook_icon:before.pull-left { margin-right: .3em; } .notebook_icon:before.pull-right { margin-left: .3em; } .running_notebook_icon:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f02d\"; position: relative; top: -1px; color: #5cb85c; } .running_notebook_icon:before.fa-pull-left { margin-right: .3em; } .running_notebook_icon:before.fa-pull-right { margin-left: .3em; } .running_notebook_icon:before.pull-left { margin-right: .3em; } .running_notebook_icon:before.pull-right { margin-left: .3em; } .file_icon:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f016\"; position: relative; top: -2px; } .file_icon:before.fa-pull-left { margin-right: .3em; } .file_icon:before.fa-pull-right { margin-left: .3em; } .file_icon:before.pull-left { margin-right: .3em; } .file_icon:before.pull-right { margin-left: .3em; } #notebook_toolbar .pull-right { padding-top: 0px; margin-right: -1px; } ul#new-menu { left: auto; right: 0; } #new-menu .dropdown-header { font-size: 10px; border-bottom: 1px solid #e5e5e5; padding: 0 0 3px; margin: -3px 20px 0; } .kernel-menu-icon { padding-right: 12px; width: 24px; content: \"\\f096\"; } .kernel-menu-icon:before { content: \"\\f096\"; } .kernel-menu-icon-current:before { content: \"\\f00c\"; } #tab_content { padding-top: 20px; } #running .panel-group .panel { margin-top: 3px; margin-bottom: 1em; } #running .panel-group .panel .panel-heading { background-color: #EEE; padding-top: 4px; padding-bottom: 4px; padding-left: 7px; padding-right: 7px; line-height: 22px; } #running .panel-group .panel .panel-heading a:focus, #running .panel-group .panel .panel-heading a:hover { text-decoration: none; } #running .panel-group .panel .panel-body { padding: 0px; } #running .panel-group .panel .panel-body .list_container { margin-top: 0px; margin-bottom: 0px; border: 0px; border-radius: 0px; } #running .panel-group .panel .panel-body .list_container .list_item { border-bottom: 1px solid #ddd; } #running .panel-group .panel .panel-body .list_container .list_item:last-child { border-bottom: 0px; } .delete-button { display: none; } .duplicate-button { display: none; } .rename-button { display: none; } .move-button { display: none; } .download-button { display: none; } .shutdown-button { display: none; } .dynamic-instructions { display: inline-block; padding-top: 4px; } /*! * * IPython text editor webapp * */ .selected-keymap i.fa { padding: 0px 5px; } .selected-keymap i.fa:before { content: \"\\f00c\"; } #mode-menu { overflow: auto; max-height: 20em; } .edit_app #header { -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); } .edit_app #menubar .navbar { /* Use a negative 1 bottom margin, so the border overlaps the border of the header */ margin-bottom: -1px; } .dirty-indicator { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; width: 20px; } .dirty-indicator.fa-pull-left { margin-right: .3em; } .dirty-indicator.fa-pull-right { margin-left: .3em; } .dirty-indicator.pull-left { margin-right: .3em; } .dirty-indicator.pull-right { margin-left: .3em; } .dirty-indicator-dirty { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; width: 20px; } .dirty-indicator-dirty.fa-pull-left { margin-right: .3em; } .dirty-indicator-dirty.fa-pull-right { margin-left: .3em; } .dirty-indicator-dirty.pull-left { margin-right: .3em; } .dirty-indicator-dirty.pull-right { margin-left: .3em; } .dirty-indicator-clean { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; width: 20px; } .dirty-indicator-clean.fa-pull-left { margin-right: .3em; } .dirty-indicator-clean.fa-pull-right { margin-left: .3em; } .dirty-indicator-clean.pull-left { margin-right: .3em; } .dirty-indicator-clean.pull-right { margin-left: .3em; } .dirty-indicator-clean:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f00c\"; } .dirty-indicator-clean:before.fa-pull-left { margin-right: .3em; } .dirty-indicator-clean:before.fa-pull-right { margin-left: .3em; } .dirty-indicator-clean:before.pull-left { margin-right: .3em; } .dirty-indicator-clean:before.pull-right { margin-left: .3em; } #filename { font-size: 16pt; display: table; padding: 0px 5px; } #current-mode { padding-left: 5px; padding-right: 5px; } #texteditor-backdrop { padding-top: 20px; padding-bottom: 20px; } @media not print { #texteditor-backdrop { background-color: #EEE; } } @media print { #texteditor-backdrop #texteditor-container .CodeMirror-gutter, #texteditor-backdrop #texteditor-container .CodeMirror-gutters { background-color: #fff; } } @media not print { #texteditor-backdrop #texteditor-container .CodeMirror-gutter, #texteditor-backdrop #texteditor-container .CodeMirror-gutters { background-color: #fff; } } @media not print { #texteditor-backdrop #texteditor-container { padding: 0px; background-color: #fff; -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); } } .CodeMirror-dialog { background-color: #fff; } /*! * * IPython notebook * */ /* CSS font colors for translated ANSI escape sequences */ /* The color values are a mix of http://www.xcolors.net/dl/baskerville-ivorylight and http://www.xcolors.net/dl/euphrasia */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } /* The following styles are deprecated an will be removed in a future version */ .ansibold { font-weight: bold; } .ansi-inverse { outline: 0.5px dotted; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; position: relative; overflow: visible; } div.cell:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: transparent; } div.cell.jupyter-soft-selected { border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: #ababab; } div.cell.selected:before, div.cell.selected.jupyter-soft-selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #42A5F5; } @media print { div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: transparent; } } .edit_mode div.cell.selected { border-color: #66BB6A; } .edit_mode div.cell.selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #66BB6A; } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { min-width: 0; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ /* Note that this should set vertical padding only, since CodeMirror assumes that horizontal padding will be set on CodeMirror pre */ padding: 0.4em 0; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only, use .CodeMirror-lines for vertical */ padding: 0 0.4em; border: 0; border-radius: 0; } .CodeMirror-cursor { border-left: 1.4px solid black; } @media screen and (min-width: 2138px) and (max-width: 4319px) { .CodeMirror-cursor { border-left: 2px solid black; } } @media screen and (min-width: 4320px) { .CodeMirror-cursor { border-left: 4px solid black; } } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area .rendered_html table { margin-left: 0; margin-right: 0; } div.output_area .rendered_html img { margin-left: 0; margin-right: 0; } div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } div.output_area .mglyph > img { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 1px 0 1px 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html em { font-style: italic; } .rendered_html strong { font-weight: bold; } .rendered_html u { text-decoration: underline; } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1 { font-size: 185.7%; margin: 1.08em 0 0 0; font-weight: bold; line-height: 1.0; } .rendered_html h2 { font-size: 157.1%; margin: 1.27em 0 0 0; font-weight: bold; line-height: 1.0; } .rendered_html h3 { font-size: 128.6%; margin: 1.55em 0 0 0; font-weight: bold; line-height: 1.0; } .rendered_html h4 { font-size: 100%; margin: 2em 0 0 0; font-weight: bold; line-height: 1.0; } .rendered_html h5 { font-size: 100%; margin: 2em 0 0 0; font-weight: bold; line-height: 1.0; font-style: italic; } .rendered_html h6 { font-size: 100%; margin: 2em 0 0 0; font-weight: bold; line-height: 1.0; font-style: italic; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html ul:not(.list-inline), .rendered_html ol:not(.list-inline) { padding-left: 2em; } .rendered_html ul { list-style: disc; } .rendered_html ul ul { list-style: square; margin-top: 0; } .rendered_html ul ul ul { list-style: circle; } .rendered_html ol { list-style: decimal; } .rendered_html ol ol { list-style: upper-alpha; margin-top: 0; } .rendered_html ol ol ol { list-style: lower-alpha; } .rendered_html ol ol ol ol { list-style: lower-roman; } .rendered_html ol ol ol ol ol { list-style: decimal; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html hr { color: black; background-color: black; } .rendered_html pre { margin: 1em 2em; padding: 0px; background-color: #fff; } .rendered_html code { background-color: #eff0f1; } .rendered_html p code { padding: 1px 5px; } .rendered_html pre code { background-color: #fff; } .rendered_html pre, .rendered_html code { border: 0; color: #000; font-size: 100%; } .rendered_html blockquote { margin: 1em 2em; } .rendered_html table { margin-left: auto; margin-right: auto; border: none; border-collapse: collapse; border-spacing: 0; color: black; font-size: 12px; table-layout: fixed; } .rendered_html thead { border-bottom: 1px solid black; vertical-align: bottom; } .rendered_html tr, .rendered_html th, .rendered_html td { text-align: right; vertical-align: middle; padding: 0.5em 0.5em; line-height: normal; white-space: normal; max-width: none; border: none; } .rendered_html th { font-weight: bold; } .rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } .rendered_html * + table { margin-top: 1em; } .rendered_html p { text-align: left; } .rendered_html * + p { margin-top: 1em; } .rendered_html img { display: block; margin-left: auto; margin-right: auto; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html svg { max-width: 100%; height: auto; } .rendered_html img.unconfined, .rendered_html svg.unconfined { max-width: none; } .rendered_html .alert { margin-bottom: initial; } .rendered_html * + .alert { margin-top: 1em; } [dir=\"rtl\"] .rendered_html p { text-align: right; } div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .rendered_html { overflow-x: auto; overflow-y: hidden; } .text_cell.rendered .rendered_html tr, .text_cell.rendered .rendered_html th, .text_cell.rendered .rendered_html td { max-width: none; } .text_cell.unrendered .text_cell_render { display: none; } .text_cell .dropzone .input_area { border: 2px dashed #bababa; margin: -1px; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } /*! * * IPython notebook webapp * */ @media (max-width: 767px) { .notebook_app { padding-left: 0px; padding-right: 0px; } } #ipython-main-app { box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; height: 100%; } div#notebook_panel { margin: 0px; padding: 0px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; height: 100%; } div#notebook { font-size: 14px; line-height: 20px; overflow-y: hidden; overflow-x: auto; width: 100%; /* This spaces the page away from the edge of the notebook area */ padding-top: 20px; margin: 0px; outline: none; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; min-height: 100%; } @media not print { #notebook-container { padding: 15px; background-color: #fff; min-height: 0; -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); } } @media print { #notebook-container { width: 100%; } } div.ui-widget-content { border: 1px solid #ababab; outline: none; } pre.dialog { background-color: #f7f7f7; border: 1px solid #ddd; border-radius: 2px; padding: 0.4em; padding-left: 2em; } p.dialog { padding: 0.2em; } /* Word-wrap output correctly. This is the CSS3 spelling, though Firefox seems to not honor it correctly. Webkit browsers (Chrome, rekonq, Safari) do. */ pre, code, kbd, samp { white-space: pre-wrap; } #fonttest { font-family: monospace; } p { margin-bottom: 0; } .end_space { min-height: 100px; transition: height .2s ease; } .notebook_app > #header { -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); } @media not print { .notebook_app { background-color: #EEE; } } kbd { border-style: solid; border-width: 1px; box-shadow: none; margin: 2px; padding-left: 2px; padding-right: 2px; padding-top: 1px; padding-bottom: 1px; } .jupyter-keybindings { padding: 1px; line-height: 24px; border-bottom: 1px solid gray; } .jupyter-keybindings input { margin: 0; padding: 0; border: none; } .jupyter-keybindings i { padding: 6px; } .well code { background-color: #ffffff; border-color: #ababab; border-width: 1px; border-style: solid; padding: 2px; padding-top: 1px; padding-bottom: 1px; } /* CSS for the cell toolbar */ .celltoolbar { border: thin solid #CFCFCF; border-bottom: none; background: #EEE; border-radius: 2px 2px 0px 0px; width: 100%; height: 29px; padding-right: 4px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; /* Old browsers */ -webkit-box-pack: end; -moz-box-pack: end; box-pack: end; /* Modern browsers */ justify-content: flex-end; display: -webkit-flex; } @media print { .celltoolbar { display: none; } } .ctb_hideshow { display: none; vertical-align: bottom; } /* ctb_show is added to the ctb_hideshow div to show the cell toolbar. Cell toolbars are only shown when the ctb_global_show class is also set. */ .ctb_global_show .ctb_show.ctb_hideshow { display: block; } .ctb_global_show .ctb_show + .input_area, .ctb_global_show .ctb_show + div.text_cell_input, .ctb_global_show .ctb_show ~ div.text_cell_render { border-top-right-radius: 0px; border-top-left-radius: 0px; } .ctb_global_show .ctb_show ~ div.text_cell_render { border: 1px solid #cfcfcf; } .celltoolbar { font-size: 87%; padding-top: 3px; } .celltoolbar select { display: block; width: 100%; height: 32px; padding: 6px 12px; font-size: 13px; line-height: 1.42857143; color: #555555; background-color: #fff; background-image: none; border: 1px solid #ccc; border-radius: 2px; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; height: 30px; padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 1px; width: inherit; font-size: inherit; height: 22px; padding: 0px; display: inline-block; } .celltoolbar select:focus { border-color: #66afe9; outline: 0; -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6); box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6); } .celltoolbar select::-moz-placeholder { color: #999; opacity: 1; } .celltoolbar select:-ms-input-placeholder { color: #999; } .celltoolbar select::-webkit-input-placeholder { color: #999; } .celltoolbar select::-ms-expand { border: 0; background-color: transparent; } .celltoolbar select[disabled], .celltoolbar select[readonly], fieldset[disabled] .celltoolbar select { background-color: #eeeeee; opacity: 1; } .celltoolbar select[disabled], fieldset[disabled] .celltoolbar select { cursor: not-allowed; } textarea.celltoolbar select { height: auto; } select.celltoolbar select { height: 30px; line-height: 30px; } textarea.celltoolbar select, select[multiple].celltoolbar select { height: auto; } .celltoolbar label { margin-left: 5px; margin-right: 5px; } .tags_button_container { width: 100%; display: flex; } .tag-container { display: flex; flex-direction: row; flex-grow: 1; overflow: hidden; position: relative; } .tag-container > * { margin: 0 4px; } .remove-tag-btn { margin-left: 4px; } .tags-input { display: flex; } .cell-tag:last-child:after { content: \"\"; position: absolute; right: 0; width: 40px; height: 100%; /* Fade to background color of cell toolbar */ background: linear-gradient(to right, rgba(0, 0, 0, 0), #EEE); } .tags-input > * { margin-left: 4px; } .cell-tag, .tags-input input, .tags-input button { display: block; width: 100%; height: 32px; padding: 6px 12px; font-size: 13px; line-height: 1.42857143; color: #555555; background-color: #fff; background-image: none; border: 1px solid #ccc; border-radius: 2px; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; height: 30px; padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 1px; box-shadow: none; width: inherit; font-size: inherit; height: 22px; line-height: 22px; padding: 0px 4px; display: inline-block; } .cell-tag:focus, .tags-input input:focus, .tags-input button:focus { border-color: #66afe9; outline: 0; -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6); box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6); } .cell-tag::-moz-placeholder, .tags-input input::-moz-placeholder, .tags-input button::-moz-placeholder { color: #999; opacity: 1; } .cell-tag:-ms-input-placeholder, .tags-input input:-ms-input-placeholder, .tags-input button:-ms-input-placeholder { color: #999; } .cell-tag::-webkit-input-placeholder, .tags-input input::-webkit-input-placeholder, .tags-input button::-webkit-input-placeholder { color: #999; } .cell-tag::-ms-expand, .tags-input input::-ms-expand, .tags-input button::-ms-expand { border: 0; background-color: transparent; } .cell-tag[disabled], .tags-input input[disabled], .tags-input button[disabled], .cell-tag[readonly], .tags-input input[readonly], .tags-input button[readonly], fieldset[disabled] .cell-tag, fieldset[disabled] .tags-input input, fieldset[disabled] .tags-input button { background-color: #eeeeee; opacity: 1; } .cell-tag[disabled], .tags-input input[disabled], .tags-input button[disabled], fieldset[disabled] .cell-tag, fieldset[disabled] .tags-input input, fieldset[disabled] .tags-input button { cursor: not-allowed; } textarea.cell-tag, textarea.tags-input input, textarea.tags-input button { height: auto; } select.cell-tag, select.tags-input input, select.tags-input button { height: 30px; line-height: 30px; } textarea.cell-tag, textarea.tags-input input, textarea.tags-input button, select[multiple].cell-tag, select[multiple].tags-input input, select[multiple].tags-input button { height: auto; } .cell-tag, .tags-input button { padding: 0px 4px; } .cell-tag { background-color: #fff; white-space: nowrap; } .tags-input input[type=text]:focus { outline: none; box-shadow: none; border-color: #ccc; } .completions { position: absolute; z-index: 110; overflow: hidden; border: 1px solid #ababab; border-radius: 2px; -webkit-box-shadow: 0px 6px 10px -1px #adadad; box-shadow: 0px 6px 10px -1px #adadad; line-height: 1; } .completions select { background: white; outline: none; border: none; padding: 0px; margin: 0px; overflow: auto; font-family: monospace; font-size: 110%; color: #000; width: auto; } .completions select option.context { color: #286090; } #kernel_logo_widget .current_kernel_logo { display: none; margin-top: -1px; margin-bottom: -1px; width: 32px; height: 32px; } [dir=\"rtl\"] #kernel_logo_widget { float: left !important; float: left; } .modal .modal-body .move-path { display: flex; flex-direction: row; justify-content: space; align-items: center; } .modal .modal-body .move-path .server-root { padding-right: 20px; } .modal .modal-body .move-path .path-input { flex: 1; } #menubar { box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; margin-top: 1px; } #menubar .navbar { border-top: 1px; border-radius: 0px 0px 2px 2px; margin-bottom: 0px; } #menubar .navbar-toggle { float: left; padding-top: 7px; padding-bottom: 7px; border: none; } #menubar .navbar-collapse { clear: left; } [dir=\"rtl\"] #menubar .navbar-toggle { float: right; } [dir=\"rtl\"] #menubar .navbar-collapse { clear: right; } [dir=\"rtl\"] #menubar .navbar-nav { float: right; } [dir=\"rtl\"] #menubar .nav { padding-right: 0px; } [dir=\"rtl\"] #menubar .navbar-nav > li { float: right; } [dir=\"rtl\"] #menubar .navbar-right { float: left !important; } [dir=\"rtl\"] ul.dropdown-menu { text-align: right; left: auto; } [dir=\"rtl\"] ul#new-menu.dropdown-menu { right: auto; left: 0; } .nav-wrapper { border-bottom: 1px solid #e7e7e7; } i.menu-icon { padding-top: 4px; } [dir=\"rtl\"] i.menu-icon.pull-right { float: left !important; float: left; } ul#help_menu li a { overflow: hidden; padding-right: 2.2em; } ul#help_menu li a i { margin-right: -1.2em; } [dir=\"rtl\"] ul#help_menu li a { padding-left: 2.2em; } [dir=\"rtl\"] ul#help_menu li a i { margin-right: 0; margin-left: -1.2em; } [dir=\"rtl\"] ul#help_menu li a i.pull-right { float: left !important; float: left; } .dropdown-submenu { position: relative; } .dropdown-submenu > .dropdown-menu { top: 0; left: 100%; margin-top: -6px; margin-left: -1px; } [dir=\"rtl\"] .dropdown-submenu > .dropdown-menu { right: 100%; margin-right: -1px; } .dropdown-submenu:hover > .dropdown-menu { display: block; } .dropdown-submenu > a:after { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; display: block; content: \"\\f0da\"; float: right; color: #333333; margin-top: 2px; margin-right: -10px; } .dropdown-submenu > a:after.fa-pull-left { margin-right: .3em; } .dropdown-submenu > a:after.fa-pull-right { margin-left: .3em; } .dropdown-submenu > a:after.pull-left { margin-right: .3em; } .dropdown-submenu > a:after.pull-right { margin-left: .3em; } [dir=\"rtl\"] .dropdown-submenu > a:after { float: left; content: \"\\f0d9\"; margin-right: 0; margin-left: -10px; } .dropdown-submenu:hover > a:after { color: #262626; } .dropdown-submenu.pull-left { float: none; } .dropdown-submenu.pull-left > .dropdown-menu { left: -100%; margin-left: 10px; } #notification_area { float: right !important; float: right; z-index: 10; } [dir=\"rtl\"] #notification_area { float: left !important; float: left; } .indicator_area { float: right !important; float: right; color: #777; margin-left: 5px; margin-right: 5px; width: 11px; z-index: 10; text-align: center; width: auto; } [dir=\"rtl\"] .indicator_area { float: left !important; float: left; } #kernel_indicator { float: right !important; float: right; color: #777; margin-left: 5px; margin-right: 5px; width: 11px; z-index: 10; text-align: center; width: auto; border-left: 1px solid; } #kernel_indicator .kernel_indicator_name { padding-left: 5px; padding-right: 5px; } [dir=\"rtl\"] #kernel_indicator { float: left !important; float: left; border-left: 0; border-right: 1px solid; } #modal_indicator { float: right !important; float: right; color: #777; margin-left: 5px; margin-right: 5px; width: 11px; z-index: 10; text-align: center; width: auto; } [dir=\"rtl\"] #modal_indicator { float: left !important; float: left; } #readonly-indicator { float: right !important; float: right; color: #777; margin-left: 5px; margin-right: 5px; width: 11px; z-index: 10; text-align: center; width: auto; margin-top: 2px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; display: none; } .modal_indicator:before { width: 1.28571429em; text-align: center; } .edit_mode .modal_indicator:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f040\"; } .edit_mode .modal_indicator:before.fa-pull-left { margin-right: .3em; } .edit_mode .modal_indicator:before.fa-pull-right { margin-left: .3em; } .edit_mode .modal_indicator:before.pull-left { margin-right: .3em; } .edit_mode .modal_indicator:before.pull-right { margin-left: .3em; } .command_mode .modal_indicator:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: ' '; } .command_mode .modal_indicator:before.fa-pull-left { margin-right: .3em; } .command_mode .modal_indicator:before.fa-pull-right { margin-left: .3em; } .command_mode .modal_indicator:before.pull-left { margin-right: .3em; } .command_mode .modal_indicator:before.pull-right { margin-left: .3em; } .kernel_idle_icon:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f10c\"; } .kernel_idle_icon:before.fa-pull-left { margin-right: .3em; } .kernel_idle_icon:before.fa-pull-right { margin-left: .3em; } .kernel_idle_icon:before.pull-left { margin-right: .3em; } .kernel_idle_icon:before.pull-right { margin-left: .3em; } .kernel_busy_icon:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f111\"; } .kernel_busy_icon:before.fa-pull-left { margin-right: .3em; } .kernel_busy_icon:before.fa-pull-right { margin-left: .3em; } .kernel_busy_icon:before.pull-left { margin-right: .3em; } .kernel_busy_icon:before.pull-right { margin-left: .3em; } .kernel_dead_icon:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f1e2\"; } .kernel_dead_icon:before.fa-pull-left { margin-right: .3em; } .kernel_dead_icon:before.fa-pull-right { margin-left: .3em; } .kernel_dead_icon:before.pull-left { margin-right: .3em; } .kernel_dead_icon:before.pull-right { margin-left: .3em; } .kernel_disconnected_icon:before { display: inline-block; font: normal normal normal 14px/1 FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; content: \"\\f127\"; } .kernel_disconnected_icon:before.fa-pull-left { margin-right: .3em; } .kernel_disconnected_icon:before.fa-pull-right { margin-left: .3em; } .kernel_disconnected_icon:before.pull-left { margin-right: .3em; } .kernel_disconnected_icon:before.pull-right { margin-left: .3em; } .notification_widget { color: #777; z-index: 10; background: rgba(240, 240, 240, 0.5); margin-right: 4px; color: #333; background-color: #fff; border-color: #ccc; } .notification_widget:focus, .notification_widget.focus { color: #333; background-color: #e6e6e6; border-color: #8c8c8c; } .notification_widget:hover { color: #333; background-color: #e6e6e6; border-color: #adadad; } .notification_widget:active, .notification_widget.active, .open > .dropdown-toggle.notification_widget { color: #333; background-color: #e6e6e6; border-color: #adadad; } .notification_widget:active:hover, .notification_widget.active:hover, .open > .dropdown-toggle.notification_widget:hover, .notification_widget:active:focus, .notification_widget.active:focus, .open > .dropdown-toggle.notification_widget:focus, .notification_widget:active.focus, .notification_widget.active.focus, .open > .dropdown-toggle.notification_widget.focus { color: #333; background-color: #d4d4d4; border-color: #8c8c8c; } .notification_widget:active, .notification_widget.active, .open > .dropdown-toggle.notification_widget { background-image: none; } .notification_widget.disabled:hover, .notification_widget[disabled]:hover, fieldset[disabled] .notification_widget:hover, .notification_widget.disabled:focus, .notification_widget[disabled]:focus, fieldset[disabled] .notification_widget:focus, .notification_widget.disabled.focus, .notification_widget[disabled].focus, fieldset[disabled] .notification_widget.focus { background-color: #fff; border-color: #ccc; } .notification_widget .badge { color: #fff; background-color: #333; } .notification_widget.warning { color: #fff; background-color: #f0ad4e; border-color: #eea236; } .notification_widget.warning:focus, .notification_widget.warning.focus { color: #fff; background-color: #ec971f; border-color: #985f0d; } .notification_widget.warning:hover { color: #fff; background-color: #ec971f; border-color: #d58512; } .notification_widget.warning:active, .notification_widget.warning.active, .open > .dropdown-toggle.notification_widget.warning { color: #fff; background-color: #ec971f; border-color: #d58512; } .notification_widget.warning:active:hover, .notification_widget.warning.active:hover, .open > .dropdown-toggle.notification_widget.warning:hover, .notification_widget.warning:active:focus, .notification_widget.warning.active:focus, .open > .dropdown-toggle.notification_widget.warning:focus, .notification_widget.warning:active.focus, .notification_widget.warning.active.focus, .open > .dropdown-toggle.notification_widget.warning.focus { color: #fff; background-color: #d58512; border-color: #985f0d; } .notification_widget.warning:active, .notification_widget.warning.active, .open > .dropdown-toggle.notification_widget.warning { background-image: none; } .notification_widget.warning.disabled:hover, .notification_widget.warning[disabled]:hover, fieldset[disabled] .notification_widget.warning:hover, .notification_widget.warning.disabled:focus, .notification_widget.warning[disabled]:focus, fieldset[disabled] .notification_widget.warning:focus, .notification_widget.warning.disabled.focus, .notification_widget.warning[disabled].focus, fieldset[disabled] .notification_widget.warning.focus { background-color: #f0ad4e; border-color: #eea236; } .notification_widget.warning .badge { color: #f0ad4e; background-color: #fff; } .notification_widget.success { color: #fff; background-color: #5cb85c; border-color: #4cae4c; } .notification_widget.success:focus, .notification_widget.success.focus { color: #fff; background-color: #449d44; border-color: #255625; } .notification_widget.success:hover { color: #fff; background-color: #449d44; border-color: #398439; } .notification_widget.success:active, .notification_widget.success.active, .open > .dropdown-toggle.notification_widget.success { color: #fff; background-color: #449d44; border-color: #398439; } .notification_widget.success:active:hover, .notification_widget.success.active:hover, .open > .dropdown-toggle.notification_widget.success:hover, .notification_widget.success:active:focus, .notification_widget.success.active:focus, .open > .dropdown-toggle.notification_widget.success:focus, .notification_widget.success:active.focus, .notification_widget.success.active.focus, .open > .dropdown-toggle.notification_widget.success.focus { color: #fff; background-color: #398439; border-color: #255625; } .notification_widget.success:active, .notification_widget.success.active, .open > .dropdown-toggle.notification_widget.success { background-image: none; } .notification_widget.success.disabled:hover, .notification_widget.success[disabled]:hover, fieldset[disabled] .notification_widget.success:hover, .notification_widget.success.disabled:focus, .notification_widget.success[disabled]:focus, fieldset[disabled] .notification_widget.success:focus, .notification_widget.success.disabled.focus, .notification_widget.success[disabled].focus, fieldset[disabled] .notification_widget.success.focus { background-color: #5cb85c; border-color: #4cae4c; } .notification_widget.success .badge { color: #5cb85c; background-color: #fff; } .notification_widget.info { color: #fff; background-color: #5bc0de; border-color: #46b8da; } .notification_widget.info:focus, .notification_widget.info.focus { color: #fff; background-color: #31b0d5; border-color: #1b6d85; } .notification_widget.info:hover { color: #fff; background-color: #31b0d5; border-color: #269abc; } .notification_widget.info:active, .notification_widget.info.active, .open > .dropdown-toggle.notification_widget.info { color: #fff; background-color: #31b0d5; border-color: #269abc; } .notification_widget.info:active:hover, .notification_widget.info.active:hover, .open > .dropdown-toggle.notification_widget.info:hover, .notification_widget.info:active:focus, .notification_widget.info.active:focus, .open > .dropdown-toggle.notification_widget.info:focus, .notification_widget.info:active.focus, .notification_widget.info.active.focus, .open > .dropdown-toggle.notification_widget.info.focus { color: #fff; background-color: #269abc; border-color: #1b6d85; } .notification_widget.info:active, .notification_widget.info.active, .open > .dropdown-toggle.notification_widget.info { background-image: none; } .notification_widget.info.disabled:hover, .notification_widget.info[disabled]:hover, fieldset[disabled] .notification_widget.info:hover, .notification_widget.info.disabled:focus, .notification_widget.info[disabled]:focus, fieldset[disabled] .notification_widget.info:focus, .notification_widget.info.disabled.focus, .notification_widget.info[disabled].focus, fieldset[disabled] .notification_widget.info.focus { background-color: #5bc0de; border-color: #46b8da; } .notification_widget.info .badge { color: #5bc0de; background-color: #fff; } .notification_widget.danger { color: #fff; background-color: #d9534f; border-color: #d43f3a; } .notification_widget.danger:focus, .notification_widget.danger.focus { color: #fff; background-color: #c9302c; border-color: #761c19; } .notification_widget.danger:hover { color: #fff; background-color: #c9302c; border-color: #ac2925; } .notification_widget.danger:active, .notification_widget.danger.active, .open > .dropdown-toggle.notification_widget.danger { color: #fff; background-color: #c9302c; border-color: #ac2925; } .notification_widget.danger:active:hover, .notification_widget.danger.active:hover, .open > .dropdown-toggle.notification_widget.danger:hover, .notification_widget.danger:active:focus, .notification_widget.danger.active:focus, .open > .dropdown-toggle.notification_widget.danger:focus, .notification_widget.danger:active.focus, .notification_widget.danger.active.focus, .open > .dropdown-toggle.notification_widget.danger.focus { color: #fff; background-color: #ac2925; border-color: #761c19; } .notification_widget.danger:active, .notification_widget.danger.active, .open > .dropdown-toggle.notification_widget.danger { background-image: none; } .notification_widget.danger.disabled:hover, .notification_widget.danger[disabled]:hover, fieldset[disabled] .notification_widget.danger:hover, .notification_widget.danger.disabled:focus, .notification_widget.danger[disabled]:focus, fieldset[disabled] .notification_widget.danger:focus, .notification_widget.danger.disabled.focus, .notification_widget.danger[disabled].focus, fieldset[disabled] .notification_widget.danger.focus { background-color: #d9534f; border-color: #d43f3a; } .notification_widget.danger .badge { color: #d9534f; background-color: #fff; } div#pager { background-color: #fff; font-size: 14px; line-height: 20px; overflow: hidden; display: none; position: fixed; bottom: 0px; width: 100%; max-height: 50%; padding-top: 8px; -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); /* Display over codemirror */ z-index: 100; /* Hack which prevents jquery ui resizable from changing top. */ top: auto !important; } div#pager pre { line-height: 1.21429em; color: #000; background-color: #f7f7f7; padding: 0.4em; } div#pager #pager-button-area { position: absolute; top: 8px; right: 20px; } div#pager #pager-contents { position: relative; overflow: auto; width: 100%; height: 100%; } div#pager #pager-contents #pager-container { position: relative; padding: 15px 0px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } div#pager .ui-resizable-handle { top: 0px; height: 8px; background: #f7f7f7; border-top: 1px solid #cfcfcf; border-bottom: 1px solid #cfcfcf; /* This injects handle bars (a short, wide = symbol) for the resize handle. */ } div#pager .ui-resizable-handle::after { content: ''; top: 2px; left: 50%; height: 3px; width: 30px; margin-left: -15px; position: absolute; border-top: 1px solid #cfcfcf; } .quickhelp { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; line-height: 1.8em; } .shortcut_key { display: inline-block; width: 21ex; text-align: right; font-family: monospace; } .shortcut_descr { display: inline-block; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } span.save_widget { height: 30px; margin-top: 4px; display: flex; justify-content: flex-start; align-items: baseline; width: 50%; flex: 1; } span.save_widget span.filename { height: 100%; line-height: 1em; margin-left: 16px; border: none; font-size: 146.5%; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; border-radius: 2px; } span.save_widget span.filename:hover { background-color: #e6e6e6; } [dir=\"rtl\"] span.save_widget.pull-left { float: right !important; float: right; } [dir=\"rtl\"] span.save_widget span.filename { margin-left: 0; margin-right: 16px; } span.checkpoint_status, span.autosave_status { font-size: small; white-space: nowrap; padding: 0 5px; } @media (max-width: 767px) { span.save_widget { font-size: small; padding: 0 0 0 5px; } span.checkpoint_status, span.autosave_status { display: none; } } @media (min-width: 768px) and (max-width: 991px) { span.checkpoint_status { display: none; } span.autosave_status { font-size: x-small; } } .toolbar { padding: 0px; margin-left: -5px; margin-top: 2px; margin-bottom: 5px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } .toolbar select, .toolbar label { width: auto; vertical-align: middle; margin-right: 2px; margin-bottom: 0px; display: inline; font-size: 92%; margin-left: 0.3em; margin-right: 0.3em; padding: 0px; padding-top: 3px; } .toolbar .btn { padding: 2px 8px; } .toolbar .btn-group { margin-top: 0px; margin-left: 5px; } .toolbar-btn-label { margin-left: 6px; } #maintoolbar { margin-bottom: -3px; margin-top: -8px; border: 0px; min-height: 27px; margin-left: 0px; padding-top: 11px; padding-bottom: 3px; } #maintoolbar .navbar-text { float: none; vertical-align: middle; text-align: right; margin-left: 5px; margin-right: 0px; margin-top: 0px; } .select-xs { height: 24px; } [dir=\"rtl\"] .btn-group > .btn, .btn-group-vertical > .btn { float: right; } .pulse, .dropdown-menu > li > a.pulse, li.pulse > a.dropdown-toggle, li.pulse.open > a.dropdown-toggle { background-color: #F37626; color: white; } /** * Primary styles * * Author: Jupyter Development Team */ /** WARNING IF YOU ARE EDITTING THIS FILE, if this is a .css file, It has a lot * of chance of beeing generated from the ../less/[samename].less file, you can * try to get back the less file by reverting somme commit in history **/ /* * We'll try to get something pretty, so we * have some strange css to have the scroll bar on * the left with fix button on the top right of the tooltip */ @-moz-keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } } @-webkit-keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } } @-moz-keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } @-webkit-keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } /*properties of tooltip after \"expand\"*/ .bigtooltip { overflow: auto; height: 200px; -webkit-transition-property: height; -webkit-transition-duration: 500ms; -moz-transition-property: height; -moz-transition-duration: 500ms; transition-property: height; transition-duration: 500ms; } /*properties of tooltip before \"expand\"*/ .smalltooltip { -webkit-transition-property: height; -webkit-transition-duration: 500ms; -moz-transition-property: height; -moz-transition-duration: 500ms; transition-property: height; transition-duration: 500ms; text-overflow: ellipsis; overflow: hidden; height: 80px; } .tooltipbuttons { position: absolute; padding-right: 15px; top: 0px; right: 0px; } .tooltiptext { /*avoid the button to overlap on some docstring*/ padding-right: 30px; } .ipython_tooltip { max-width: 700px; /*fade-in animation when inserted*/ -webkit-animation: fadeOut 400ms; -moz-animation: fadeOut 400ms; animation: fadeOut 400ms; -webkit-animation: fadeIn 400ms; -moz-animation: fadeIn 400ms; animation: fadeIn 400ms; vertical-align: middle; background-color: #f7f7f7; overflow: visible; border: #ababab 1px solid; outline: none; padding: 3px; margin: 0px; padding-left: 7px; font-family: monospace; min-height: 50px; -moz-box-shadow: 0px 6px 10px -1px #adadad; -webkit-box-shadow: 0px 6px 10px -1px #adadad; box-shadow: 0px 6px 10px -1px #adadad; border-radius: 2px; position: absolute; z-index: 1000; } .ipython_tooltip a { float: right; } .ipython_tooltip .tooltiptext pre { border: 0; border-radius: 0; font-size: 100%; background-color: #f7f7f7; } .pretooltiparrow { left: 0px; margin: 0px; top: -16px; width: 40px; height: 16px; overflow: hidden; position: absolute; } .pretooltiparrow:before { background-color: #f7f7f7; border: 1px #ababab solid; z-index: 11; content: \"\"; position: absolute; left: 15px; top: 10px; width: 25px; height: 25px; -webkit-transform: rotate(45deg); -moz-transform: rotate(45deg); -ms-transform: rotate(45deg); -o-transform: rotate(45deg); } ul.typeahead-list i { margin-left: -10px; width: 18px; } [dir=\"rtl\"] ul.typeahead-list i { margin-left: 0; margin-right: -10px; } ul.typeahead-list { max-height: 80vh; overflow: auto; } ul.typeahead-list > li > a { /** Firefox bug **/ /* see https://github.com/jupyter/notebook/issues/559 */ white-space: normal; } ul.typeahead-list > li > a.pull-right { float: left !important; float: left; } [dir=\"rtl\"] .typeahead-list { text-align: right; } .cmd-palette .modal-body { padding: 7px; } .cmd-palette form { background: white; } .cmd-palette input { outline: none; } .no-shortcut { min-width: 20px; color: transparent; } [dir=\"rtl\"] .no-shortcut.pull-right { float: left !important; float: left; } [dir=\"rtl\"] .command-shortcut.pull-right { float: left !important; float: left; } .command-shortcut:before { content: \"(command mode)\"; padding-right: 3px; color: #777777; } .edit-shortcut:before { content: \"(edit)\"; padding-right: 3px; color: #777777; } [dir=\"rtl\"] .edit-shortcut.pull-right { float: left !important; float: left; } #find-and-replace #replace-preview .match, #find-and-replace #replace-preview .insert { background-color: #BBDEFB; border-color: #90CAF9; border-style: solid; border-width: 1px; border-radius: 0px; } [dir=\"ltr\"] #find-and-replace .input-group-btn + .form-control { border-left: none; } [dir=\"rtl\"] #find-and-replace .input-group-btn + .form-control { border-right: none; } #find-and-replace #replace-preview .replace .match { background-color: #FFCDD2; border-color: #EF9A9A; border-radius: 0px; } #find-and-replace #replace-preview .replace .insert { background-color: #C8E6C9; border-color: #A5D6A7; border-radius: 0px; } #find-and-replace #replace-preview { max-height: 60vh; overflow: auto; } #find-and-replace #replace-preview pre { padding: 5px 10px; } .terminal-app { background: #EEE; } .terminal-app #header { background: #fff; -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2); } .terminal-app .terminal { width: 100%; float: left; font-family: monospace; color: white; background: black; padding: 0.4em; border-radius: 2px; -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.4); box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.4); } .terminal-app .terminal, .terminal-app .terminal dummy-screen { line-height: 1em; font-size: 14px; } .terminal-app .terminal .xterm-rows { padding: 10px; } .terminal-app .terminal-cursor { color: black; background: white; } .terminal-app #terminado-container { margin-top: 20px; } /*# sourceMappingURL=style.min.css.map */ .highlight .hll { background-color: #ffffcc } .highlight { background: #f8f8f8; } .highlight .c { color: #408080; font-style: italic } /* Comment */ .highlight .err { border: 1px solid #FF0000 } /* Error */ .highlight .k { color: #008000; font-weight: bold } /* Keyword */ .highlight .o { color: #666666 } /* Operator */ .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight .gd { color: #A00000 } /* Generic.Deleted */ .highlight .ge { font-style: italic } /* Generic.Emph */ .highlight .gr { color: #FF0000 } /* Generic.Error */ .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight .gi { color: #00A000 } /* Generic.Inserted */ .highlight .go { color: #888888 } /* Generic.Output */ .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight .gs { font-weight: bold } /* Generic.Strong */ .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight .gt { color: #0044DD } /* Generic.Traceback */ .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight .kp { color: #008000 } /* Keyword.Pseudo */ .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight .kt { color: #B00040 } /* Keyword.Type */ .highlight .m { color: #666666 } /* Literal.Number */ .highlight .s { color: #BA2121 } /* Literal.String */ .highlight .na { color: #7D9029 } /* Name.Attribute */ .highlight .nb { color: #008000 } /* Name.Builtin */ .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight .no { color: #880000 } /* Name.Constant */ .highlight .nd { color: #AA22FF } /* Name.Decorator */ .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight .nf { color: #0000FF } /* Name.Function */ .highlight .nl { color: #A0A000 } /* Name.Label */ .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight .nv { color: #19177C } /* Name.Variable */ .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight .w { color: #bbbbbb } /* Text.Whitespace */ .highlight .mb { color: #666666 } /* Literal.Number.Bin */ .highlight .mf { color: #666666 } /* Literal.Number.Float */ .highlight .mh { color: #666666 } /* Literal.Number.Hex */ .highlight .mi { color: #666666 } /* Literal.Number.Integer */ .highlight .mo { color: #666666 } /* Literal.Number.Oct */ .highlight .sa { color: #BA2121 } /* Literal.String.Affix */ .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight .sc { color: #BA2121 } /* Literal.String.Char */ .highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */ .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight .sx { color: #008000 } /* Literal.String.Other */ .highlight .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight .ss { color: #19177C } /* Literal.String.Symbol */ .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight .fm { color: #0000FF } /* Name.Function.Magic */ .highlight .vc { color: #19177C } /* Name.Variable.Class */ .highlight .vg { color: #19177C } /* Name.Variable.Global */ .highlight .vi { color: #19177C } /* Name.Variable.Instance */ .highlight .vm { color: #19177C } /* Name.Variable.Magic */ .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */ /* Temporary definitions which will become obsolete with Notebook release 5.0 */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-bold { font-weight: bold; } /*This file contains any manual css for this page that needs to override the global styles. This is only required when different pages style the same element differently. This is just a hack to deal with our current css styles and no new styling should be added in this file.*/ #ipython-main-app { position: relative; } #jupyter-main-app { position: relative; } /* Overrides of notebook CSS for static HTML export */ body { overflow: visible; padding: 8px; } div#notebook { overflow: visible; border-top: none; }@media print { div.cell { display: block; page-break-inside: avoid; } div.output_wrapper { display: block; page-break-inside: avoid; } div.output { display: block; page-break-inside: avoid; } } MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ], displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to left justify single line equations in code cells. displayAlign: 'center', \"HTML-CSS\": { styles: {'.MathJax_Display': {\"margin\": 0}}, linebreaks: { automatic: true } } }); Import Packages&#182; In&nbsp;[7]: import json import numpy as np import pandas as pd import matplotlib.pyplot as plt from scipy.stats import norm from urllib.request import urlopen from scipy.optimize import minimize from sklearn.neighbors import KernelDensity from mpl_toolkits.mplot3d import Axes3D import warnings warnings.filterwarnings(&#39;ignore&#39;)# Presentation - OLS Declare Functions&#182; In&nbsp;[8]: def yahoo_parser(url): response = urlopen(url) data = json.loads(response.read().decode(&quot;utf-8&quot;))[&#39;chart&#39;][&#39;result&#39;][0] t = pd.to_datetime(data[&#39;timestamp&#39;], unit=&#39;s&#39;).date c = data[&#39;indicators&#39;][&#39;quote&#39;][0][&#39;close&#39;] return pd.DataFrame({&#39;close&#39;: c}, index=t) def default_parser(url): return pd.read_csv(url, index_col=0, parse_dates=True) def retrieve(source, code, label, column=None): query = { &#39;yahoo&#39;: &#39;https://query1.finance.yahoo.com/v8/finance/chart/{}?period1=0&amp;period2=5000000000&amp;interval=1d&#39;, } parser = { &#39;yahoo&#39;: yahoo_parser, } url = query.get(source).format(code) df = parser.get(source, default_parser)(url) df.index.name = None df.columns = [col.lower() for col in df.columns] if df.shape[1] &gt; 1 else [label] if not column: column = df.columns all_dates = pd.date_range(df.index.min(), df.index.max(), freq=&#39;D&#39;) df = df.replace(&#39;.&#39;, None).reindex(all_dates).fillna(method=&#39;ffill&#39;) return df.astype(&#39;float&#39;)[column].squeeze() def calc_call_premium(K, T, sigma): sigma = np.where(sigma&gt;0, sigma, 1e-4) d1 = (np.log(1/K) + sigma**2 / 2 * T) / (sigma * np.sqrt(T)) d2 = (np.log(1/K) - sigma**2 / 2 * T) / (sigma * np.sqrt(T)) c = norm.cdf(d1) - K * norm.cdf(d2) return c In&nbsp;[9]: # load yahoo data raw_df = retrieve(&#39;yahoo&#39;, &#39;^GSPC&#39;, &#39;SPX&#39;).to_frame() In&nbsp;[10]: # remove all weekends df = raw_df.copy() df = df.reindex(pd.date_range(start=&quot;1970-01-02&quot;, end=&quot;2018-12-31&quot;, freq=&#39;B&#39;)) # take the log price df[&#39;log_SPX&#39;] = np.log(df[&quot;SPX&quot;]) # compute daily log return df[&#39;r&#39;] = df[&#39;log_SPX&#39;].diff() term_days = [5] + list(range(20, 521, 20)) term_name = [str(i) + &quot;D&quot; for i in term_days] terms = dict(zip(term_name, term_days)) # calculate rolling period return for k, v in terms.items(): df[k + &#39;_ret&#39;] = df[&quot;r&quot;].rolling(v).sum() df[&#39;vol_&#39; + k] = df[&quot;r&quot;].rolling(v).std() * np.sqrt(260) df[k + &#39;_ret&#39;] = df[k + &#39;_ret&#39;] - np.log(np.exp(df[k + &#39;_ret&#39;]).mean()) Fit Volatility Surface - Least Sequare Method&#182; In&nbsp;[11]: def calc_density(x, r, T, params, delta_x=0.001, method=&#39;linear&#39;): &quot;&quot;&quot; Approximate the density of x = log(K) using butterfly :param x: float / np.array(dtype=float), log return :param r: float :param params: array-like object, linear: a, b quad: a, b, c quad_diff: a, b, c, a2 :delta_x: float, default 0.001 :method: str, the analytical form of volatility function, can be &#39;linear&#39;/&#39;quad&#39;/&#39;quad_diff&#39;/&#39;svi&#39; :return: float / np.array(dtype=float), a series of density &quot;&quot;&quot; # params: a, b, c, a2 if method == &#39;linear&#39; and len(params) == 2: x1, x2, a, b = x + np.log(1 + delta_x), x + np.log(1 - delta_x), params[0], params[1] sigma1, sigma, sigma2 = a * x1 + b,\\ a * x + b,\\ a * x2 + b elif method == &#39;quad&#39; and len(params) == 3: x1, x2, a, b, c = x + np.log(1 + delta_x), x + np.log(1 - delta_x), params[0], params[1], params[2] sigma1, sigma, sigma2 = a * x1**2 + b * x1 + c,\\ a * x**2 + b * x + c,\\ a * x2**2 + b * x2 + c elif method == &#39;quad_diff&#39; and len(params) == 4: x1, x2, a, b, c, a2 = x + np.log(1 + delta_x), x + np.log(1 - delta_x), params[0], params[1], params[2], params[3] sigma1, sigma, sigma2 = a * x1**2 * (x1 &gt;= 0) + a2 * x1**2 * (x1 &lt; 0) + b * x1 + c,\\ a * x**2 * (x &gt;= 0) + a2 * x**2 * (x &lt; 0) + b * x + c,\\ a * x2**2 * (x2 &gt;= 0) + a2 * x2**2 * (x2 &lt; 0) + b * x2 + c else: raise Exception(&quot;Wrong param dimension or fit method!&quot;) f = np.exp(r * T) * (calc_call_premium(np.exp(x1), T, sigma1) - 2 * calc_call_premium(np.exp(x), T, sigma) + calc_call_premium(np.exp(x2), T, sigma2)) / (np.exp(x) * delta_x**2) return f def obj_func_least_square(params, r_series, r_density, term_day, method): &quot;&quot;&quot; Compute mean of squared errors (avg(SSE)) given the true density :param params: parameters in volatility function :r_series: array-like, the input in the volatility function, used to predict density :r_density: array-like, true density :term_day: int, T :method: str, the analytical form of volatility function &quot;&quot;&quot; density = calc_density(r_series, r=0, T=term_day/260, params=params, delta_x=0.001, method=method) return np.mean((r_density - density)**2) In&nbsp;[12]: def full_model(terms, df, plot=True, method=&#39;ols&#39;): &quot;&quot;&quot; Fit the vol curve for all terms :param terms: dict, {&#39;term_str&#39;: term_day} :param df: pd.DataFrame, index: dates; columns: rolling period return, columns names [&quot;20D_ret&quot;, ...] :param plot: bool, whether to plot the fitted density of x=logK :param method: &#39;ols&#39; / &#39;mle&#39; :return result: pd.DataFrame, index: terms.keys, values, optimal parameters in volatility function &quot;&quot;&quot; coef_linear_list = [] coef_quad_list = [] coef_quad_diff_list = [] coef_svi_list = [] if plot: fig = plt.figure(figsize=(18, len(terms) * 6)) index = 1 for term_str, term_day in terms.items(): raw_series = df[term_str+&#39;_ret&#39;].dropna() r_series = raw_series.copy() # fit kernel density raw_series = np.array(sorted(raw_series)) avg, std = r_series.mean(), r_series.std() bandwidth = np.round(1.06 * std * (len(r_series))**(-0.2), 4) kde = KernelDensity(bandwidth = bandwidth) kde.fit(np.array(r_series).reshape(-1, 1)) r_series = np.arange(avg - 5 * std, avg + 5 * std, 0.2 * std) r_density = np.exp(kde.score_samples(r_series.reshape(-1, 1))) tmp = minimize(obj_func_least_square, (-1, 1), args=(r_series, r_density, term_day, &#39;linear&#39;), method=&quot;BFGS&quot;) coef_linear_list.append(tmp.x) linear_fit = np.round(calc_density(raw_series, r=0, T=term_day/260, params=tmp.x, delta_x=0.001, method=&#39;linear&#39;), 4) tmp = minimize(obj_func_least_square, (1, -1, 1), args=(r_series, r_density, term_day, &#39;quad&#39;), method=&quot;BFGS&quot;) coef_quad_list.append(tmp.x) quad_fit = np.round(calc_density(raw_series, r=0, T=term_day/260, params=tmp.x, delta_x=0.001, method=&#39;quad&#39;), 4) tmp = minimize(obj_func_least_square, (1, -1, 1, 1), args=(r_series, r_density, term_day, &#39;quad_diff&#39;), method=&quot;BFGS&quot;) coef_quad_diff_list.append(tmp.x) quad_diff_fit = np.round(calc_density(raw_series, r=0, T=term_day/260, params=tmp.x, delta_x=0.001, method=&#39;quad_diff&#39;), 4) if plot: # plotting results plt.subplot(len(terms), 3, index) plt.hist(raw_series, bins=300, density=True, color=&#39;grey&#39;) plt.plot(raw_series, linear_fit, linewidth=2, color=&#39;salmon&#39;) plt.plot(raw_series, quad_fit, linewidth=2, color=&#39;skyblue&#39;) plt.plot(raw_series, quad_diff_fit, linewidth=2, color=&#39;burlywood&#39;) plt.legend([&#39;linear fit&#39;, &#39;quad fit&#39;, &#39;quad_diff fit&#39;, &#39;empirical density&#39;], loc=&#39;upper left&#39;) plt.title(term_str+&quot; fitted density&quot;) index += 1 result = pd.concat([pd.DataFrame(coef_linear_list), pd.DataFrame(coef_quad_list), pd.DataFrame(coef_quad_diff_list)], axis=1) result.columns=[&#39;linear_a&#39;, &#39;linear_b&#39;, &#39;quad_a&#39;, &#39;quad_b&#39;, &#39;quad_c&#39;, &#39;quad_diff_a&#39;, &#39;quad_diff_b&#39;, &#39;quad_diff_c&#39;, &#39;quad_diff_a2&#39;] result.index = list(terms.keys()) return result In&nbsp;[13]: ols_result = full_model(terms, df, method=&#39;ols&#39;) In&nbsp;[14]: ols_result Out[14]: .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } linear_a linear_b quad_a quad_b quad_c quad_diff_a quad_diff_b quad_diff_c quad_diff_a2 5D -0.384758 0.136671 17.139927 -0.471025 0.147748 22.628546 -0.484432 0.147474 11.008452 20D -0.275135 0.129910 4.340637 -0.337145 0.139920 6.185233 -0.348405 0.140706 3.251778 40D -0.186361 0.131342 2.015341 -0.228069 0.140659 1.924107 -0.227141 0.140432 2.012410 60D -0.167698 0.128794 1.510926 -0.205523 0.138557 1.486953 -0.205046 0.138452 1.508781 80D -0.115145 0.131771 1.051253 -0.143463 0.141839 0.801218 -0.139618 0.140849 1.104362 100D -0.066928 0.129410 0.986380 -0.087550 0.140559 0.760719 -0.084565 0.139564 1.027468 120D -0.093013 0.131620 0.801029 -0.118347 0.142057 1.086626 -0.123450 0.143141 0.689021 140D -0.103167 0.135051 0.648174 -0.129623 0.145092 0.961173 -0.135407 0.146501 0.509531 160D -0.126710 0.135048 0.552229 -0.156170 0.144891 0.902756 -0.163932 0.146491 0.340358 180D -0.136048 0.134943 0.490000 -0.166140 0.144471 0.795912 -0.175711 0.147043 0.364189 200D -0.152693 0.135995 0.411233 -0.183025 0.144967 0.743591 -0.192843 0.147483 0.205254 220D -0.153306 0.135832 0.377625 -0.184945 0.144608 0.704113 -0.194929 0.146872 0.142553 240D -0.161936 0.136732 0.329470 -0.192691 0.145179 0.623727 -0.204787 0.148568 0.172904 260D -0.157064 0.137885 0.308360 -0.187172 0.146230 0.590038 -0.200464 0.150050 0.181977 280D -0.155566 0.139030 0.269324 -0.183774 0.147166 0.494934 -0.196109 0.150965 0.194725 300D -0.152914 0.139729 0.249631 -0.181678 0.148027 0.471397 -0.193989 0.151875 0.158885 320D -0.148770 0.141261 0.223580 -0.175895 0.149468 0.409354 -0.186999 0.152958 0.146455 340D -0.138989 0.143015 0.203267 -0.164246 0.151092 0.301910 -0.170956 0.153179 0.168636 360D -0.132516 0.145082 0.173954 -0.154477 0.152595 0.171216 -0.154288 0.152551 0.176651 380D -0.126110 0.145845 0.156008 -0.145764 0.153000 0.098585 -0.141238 0.151766 0.180744 400D -0.112800 0.145669 0.157720 -0.130467 0.153138 0.033660 -0.120156 0.150132 0.196417 420D -0.098359 0.145004 0.166167 -0.114116 0.153022 -0.032628 -0.096958 0.147934 0.217661 440D -0.088220 0.143348 0.170898 -0.102314 0.151725 -0.070142 -0.081066 0.145311 0.227623 460D -0.080602 0.140426 0.180126 -0.093342 0.149221 -0.056917 -0.072535 0.142461 0.229911 480D -0.073698 0.137796 0.186277 -0.085300 0.146717 -0.020837 -0.067833 0.140687 0.226454 500D -0.072350 0.135853 0.185735 -0.083703 0.144777 0.011833 -0.068722 0.139391 0.218251 520D -0.069407 0.133100 0.188556 -0.081356 0.141961 0.073295 -0.071619 0.138367 0.208655 In&nbsp;[15]: def plot_result(terms, full_model_output): df = full_model_output # plot the vol curve seperately, x_axis: K col_names = full_model_output.columns.tolist() fig = plt.figure(2, figsize=(18, len(terms) * 6)) index = 1 for term_str, term_day in terms.items(): plt.subplot(len(terms), 3, index) x = np.linspace(-0.8, 0.7, 41) K = np.exp(x) params = df.loc[term_str, :].values.tolist() if &#39;linear_a&#39; in col_names: a, b = params[0:2] plt.plot(K, a*x+b, color=&#39;salmon&#39;) a, b, c = params[2:5] plt.plot(K, a*x**2 + b*x + c, color=&#39;skyblue&#39;) a, b, c, a2 = params[5:9] plt.plot(K, (a*(x&gt;=0)+a2*(x&lt;0))*x**2+b*x+c, color=&#39;burlywood&#39;) plt.legend([&#39;linear&#39;, &#39;quad&#39;, &#39;quad diff&#39;]) plt.xlabel(&#39;moneyness(K/S)&#39;) plt.ylabel(&#39;volatility&#39;) plt.title(term_str+&quot; volatility plot against moneyness&quot;) index += 1 return In&nbsp;[16]: plot_result(terms, ols_result) In&nbsp;[17]: def full_model_plot(terms, df, plot=True, method=&#39;ols&#39;): &quot;&quot;&quot; Fit the vol curve for all terms :param terms: dict, {&#39;term_str&#39;: term_day} :param df: pd.DataFrame, index: dates; columns: rolling period return, columns names [&quot;20D_ret&quot;, ...] :param plot: bool, whether to plot the fitted density of x=logK :param method: &#39;ols&#39; / &#39;mle&#39; :return result: pd.DataFrame, index: terms.keys, values, optimal parameters in volatility function &quot;&quot;&quot; coef_linear_list = [] coef_quad_list = [] coef_quad_diff_list = [] coef_svi_list = [] cm = {&#39;g&#39;:&#39;#60854B&#39;, &#39;r&#39;:&#39;#C75B56&#39;, &#39;b&#39;:&#39;#6C8DBF&#39;} if plot: fig = plt.figure(figsize=(18, len(terms) * 6)) index = 1 for term_str, term_day in terms.items(): raw_series = df[term_str+&#39;_ret&#39;].dropna() r_series = raw_series.copy() # fit kernel density raw_series = np.array(sorted(raw_series)) avg, std = r_series.mean(), r_series.std() bandwidth = np.round(1.06 * std * (len(r_series))**(-0.2), 4) kde = KernelDensity(bandwidth = bandwidth) kde.fit(np.array(r_series).reshape(-1, 1)) r_series = np.arange(avg - 5 * std, avg + 5 * std, 0.2 * std) r_density = np.exp(kde.score_samples(r_series.reshape(-1, 1))) tmp = minimize(obj_func_least_square, (-1, 1), args=(r_series, r_density, term_day, &#39;linear&#39;), method=&quot;BFGS&quot;) coef_linear_list.append(tmp.x) linear_fit = np.round(calc_density(raw_series, r=0, T=term_day/260, params=tmp.x, delta_x=0.001, method=&#39;linear&#39;), 4) tmp = minimize(obj_func_least_square, (1, -1, 1), args=(r_series, r_density, term_day, &#39;quad&#39;), method=&quot;BFGS&quot;) coef_quad_list.append(tmp.x) quad_fit = np.round(calc_density(raw_series, r=0, T=term_day/260, params=tmp.x, delta_x=0.001, method=&#39;quad&#39;), 4) tmp = minimize(obj_func_least_square, (1, -1, 1, 1), args=(r_series, r_density, term_day, &#39;quad_diff&#39;), method=&quot;BFGS&quot;) coef_quad_diff_list.append(tmp.x) quad_diff_fit = np.round(calc_density(raw_series, r=0, T=term_day/260, params=tmp.x, delta_x=0.001, method=&#39;quad_diff&#39;), 4) if plot: # plotting results plt.subplot(len(terms), 2, index) plt.hist(raw_series, bins=300, density=True, color=&#39;grey&#39;) plt.plot(raw_series, linear_fit, linewidth=2, color=cm[&#39;r&#39;]) plt.plot(raw_series, quad_fit, linewidth=2, color=cm[&#39;b&#39;]) plt.plot(raw_series, quad_diff_fit, linewidth=2, color=cm[&#39;g&#39;]) plt.legend([&#39;linear fit&#39;, &#39;quad fit&#39;, &#39;quad_diff fit&#39;, &#39;empirical density&#39;], loc=&#39;upper left&#39;) plt.title(term_str+&quot; fitted density&quot;) index += 2 result = pd.concat([pd.DataFrame(coef_linear_list), pd.DataFrame(coef_quad_list), pd.DataFrame(coef_quad_diff_list)], axis=1) result.columns=[&#39;linear_a&#39;, &#39;linear_b&#39;, &#39;quad_a&#39;, &#39;quad_b&#39;, &#39;quad_c&#39;, &#39;quad_diff_a&#39;, &#39;quad_diff_b&#39;, &#39;quad_diff_c&#39;, &#39;quad_diff_a2&#39;] result.index = list(terms.keys()) # plot the vol curve seperately, x_axis: K col_names = result.columns.tolist() index = 2 for term_str, term_day in terms.items(): plt.subplot(len(terms), 2, index) x = np.linspace(-0.5, 0.5, 41) K = np.exp(x) params = result.loc[term_str, :].values.tolist() if &#39;linear_a&#39; in col_names: a, b = params[0:2] plt.plot(x, a*x+b, color=cm[&#39;r&#39;]) a, b, c = params[2:5] plt.plot(x, a*x**2 + b*x + c, color=cm[&#39;b&#39;]) a, b, c, a2 = params[5:9] plt.plot(x, (a*(x&gt;=0)+a2*(x&lt;0))*x**2+b*x+c, color=cm[&#39;g&#39;]) plt.legend([&#39;linear&#39;, &#39;quad&#39;, &#39;quad diff&#39;]) plt.xlabel(&#39;log moneyness(K/S)&#39;) plt.ylabel(&#39;volatility&#39;) plt.title(term_str+&quot; volatility plot against log moneyness&quot;) index += 2 return result In&nbsp;[18]: sampled_ols_result = full_model_plot({&#39;20D&#39;: 20, &#39;260D&#39;: 260}, df, method=&#39;ols&#39;) In&nbsp;[87]: def plot_skew_term_structure(params_avg, params_std=None, delta_skew=True, ylim=(-0.5, 0)): &quot;&quot;&quot; :params_avg: list of pd.DataFrame, mean of optimal parameters (pd.DataFrame) for different regimes each DataFrame: index, [&#39;5D&#39;, &#39;10D&#39;, ...]; columns: [&#39;linear_a&#39;, ..., &#39;quad_diff_a2&#39;] If a single DataFrame is inputed, automatically transform it to a list. :params_std: default None, list of pd.DataFrame, standard deviation of optimal parameters for different regimes each DataFrame: index, [&#39;5D&#39;, &#39;10D&#39;, ...]; columns: [&#39;linear_a&#39;, ..., &#39;quad_diff_a2&#39;] If a single DataFrame is inputed, automatically transform it to a list. :param legend: input of plt.legend(), for example can be [&#39;high_vol regime&#39;, &#39;mid_vol regime&#39;, &#39;low_vol regime&#39;] :param delta_skew: bool, how to compute skewness If True, use the slope between 20 delta of call and put, delta_vol / delta_K, where K1, K2 = exp(\\Phi^{-1}(x)), x = 0.2 and 0.8 if False, simply plot the first derivative of the vol curve, delta_vol / delta_ln(K) &quot;&quot;&quot; if not isinstance(params_avg, list): params_avg = [params_avg] if params_std is not None and not isinstance(params_std, list): params_std = [params_std] x_axis = [int(str(i)[:-1]) for i in params_avg[0].index.tolist()] T = np.reshape(np.array(x_axis), (1, -1)) / 260 colors = [&#39;#C75B56&#39;, &#39;#6C8DBF&#39;, &#39;#60854B&#39;] cm = {&#39;g&#39;:&#39;#60854B&#39;, &#39;r&#39;:&#39;#C75B56&#39;, &#39;b&#39;:&#39;#6C8DBF&#39;} plt.subplot(1, 1, 1) for i in range(len(params_avg)): params = (params_avg[i].values[:, 2:5]).T if delta_skew: y = list(delta_skewness(params, T, method=&#39;quad&#39;)[0]) plt.plot(x_axis, y, color=colors[1]) else: plt.plot(x_axis, params[1], color=colors[1]) if params_std is not None: tmp = (2 * params_std[i].values[:, 2:5]).T if delta_skew: y_lower = list(delta_skewness(params-tmp, T, method=&#39;quad&#39;)[0]) y_upper = list(delta_skewness(params+tmp, T, method=&#39;quad&#39;)[0]) else: y_lower = params[1] - tmp[1] y_upper = params[1] + tmp[1] plt.fill_between(x_axis, y_lower, y_upper, color=colors[1], alpha=0.2) plt.title(&quot;term structure of skewness&quot;) plt.xlabel(&#39;term&#39;) plt.ylabel(&#39;skewness&#39;) plt.ylim(ylim) In&nbsp;[88]: plot_skew_term_structure(ols_result, ylim=(-0.5, 0), delta_skew=False) In&nbsp;[96]: def plot_vol(X, Y): z = [] for i in range(len(Y)): a, b, c = ols_result[&#39;quad_a&#39;][i], ols_result[&#39;quad_b&#39;][i], ols_result[&#39;quad_c&#39;][i] for j in range(len(X[0])): vol = a*X[0][j]**2 + b*X[0][j] + c vol_annualized = vol * np.sqrt(term_days[i]/260) z.append(vol_annualized) return np.array(z) x = np.linspace(-0.5, 0.5, 41) y = term_days X, Y = np.meshgrid(x, y) Z = plot_vol(X, Y).reshape(X.shape) fig = plt.figure(figsize=(16, 12)) ax = plt.axes(projection=&#39;3d&#39;) ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=&#39;viridis&#39;, edgecolor=&#39;none&#39;) ax.set_xlabel(&#39;Log(K)&#39;) ax.set_ylabel(&#39;T: Business Days&#39;) ax.set_zlabel(&#39;Volatility * Sqrt(T)&#39;); ax.title.set_text(&#39;volatility surface&#39;)","tags":""},{"title":"Archive","url":"/archive/index.html","text":"","tags":""},{"title":"","url":"/search/index.html","text":"","tags":""},{"title":"Tags","url":"/tags/index.html","text":"","tags":""}]}