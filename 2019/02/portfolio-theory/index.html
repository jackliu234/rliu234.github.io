<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Notes on Portfolio Theory · Rongjia Liu</title><meta name="description" content="Notes on Portfolio Theory - Rongjia Liu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/arctic.css"><link rel="search" type="application/opensearchdescription+xml" href="http://jackliu234.com/atom.xml" title="Rongjia Liu"><script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archive/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/search/" target="_self" class="nav-list-link">SEARCH</a></li><!-- li.nav-list-item--><!--    a.nav-list-link(class="search" href=url_for("search") target="_self") <i class="fa fa-search" aria-hidden="true"></i>--></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Notes on Portfolio Theory</h1><div class="post-info">Feb 11, 2019</div><div class="post-content"><a id="more"></a>

<h1 id="Portfolio-Diversification"><a href="#Portfolio-Diversification" class="headerlink" title="Portfolio Diversification"></a>Portfolio Diversification</h1><h2 id="Two-Asset-Portfolio"><a href="#Two-Asset-Portfolio" class="headerlink" title="Two-Asset Portfolio"></a>Two-Asset Portfolio</h2><p>Consider an investment portfolio $V$ on two assets:</p>
<p>$$ P = wB + (1-w)S $$</p>
<p>We can calculate the mean and variance of the return on the portfolio, based on the mean and variance of the return on each asset.</p>
<p>$$\begin{align}
\mu_p &amp;= w\mu_b + (1-w)\mu_s \
\sigma^2_p &amp;= w^2\sigma^2_b + (1-w)^2\sigma^2_s + 2w(1-w)\rho\sigma_s\sigma_b
\end{align}$$</p>
<p>We can see that if $\rho&lt;1$, we have <code>diversification</code>, where $\mu_p$ is linear in the portfolio allocation $w$ while the standard deviation is <code>convex</code>.</p>
<p>$$\begin{align} \mu_p &amp;= w\mu_b + (1-w)\mu_s \
\sigma_p &amp;&lt; w\sigma_b + (1-w)\sigma_s \end{align}$$  </p>
<p>When $\rho=-1$, the portfolio variance can be as small as desired. If we set $w=\sigma_s/(\sigma_b+\sigma_s)$ then $\sigma_p=0$ and the portfolio becomes riskless.</p>
<p>In this following chart we can see a two-asset portfolio return volatility plotted against different weights and correlation.</p>
<p><img src="portfolio-theory-img1.png" alt="img1.png"></p>
<p>We see that to as long as the correlation is not perfect between the two assets, there exist a weight that would minimize the portfolio variance (not taking portfolio return into consideration, yet)</p>
<h2 id="Multi-Asset-Portfolio"><a href="#Multi-Asset-Portfolio" class="headerlink" title="Multi-Asset Portfolio"></a>Multi-Asset Portfolio</h2><p>Consider $n$ assets with return volatility $\sigma_i$ and covariance $\sigma_{i, j}$. Let $w^i$ denote the allocation to asset $i$. Then the variance of portfolio return becomes:</p>
<p>$$ \sigma^2_{p} = \sum_{j=1}^n\sum_{i=1}^nw^iw^j\sigma_{i, j} \
\text{or simply, } \boldsymbol{w’\Sigma w}$$</p>
<p>In the case of an equally-weighted portfolio with $w^i=1/n$.</p>
<p>$$ \sigma^2_p = \dfrac{1}{n^2}\sum_{i=1}^n\sigma_i^2 + \dfrac{1}{n^2}\sum_{j \neq i}\sum_{i=1}^n\sigma_{i, j} $$</p>
<p>We define:</p>
<p>$$ \textbf{avg_ret_vol} := \dfrac{1}{n}\sum_{i=1}^n\sigma_i^2 \
\textbf{avg_ret_cov} := \dfrac{1}{n^2-n}\sum_{j \neq i}\sum_{i=1}^n\sigma_{i, j} $$</p>
<p>Therefore,</p>
<p>$$\sigma^2_p = \dfrac{1}{n}\textbf{avg_ret_vol} + \dfrac{n-1}{n}\textbf{avg_ret_cov} \
\text{and that } \lim_{n\rightarrow \infty} \sigma^2_p = \textbf{avg_ret_cov}$$</p>
<p>We conclude that in a <code>equally weighted portfolio</code> (or a diversified portfolio where $\lim_{n\rightarrow\infty}w^i=0$) with a <code>large</code> number of assets,</p>
<ul>
<li>the individual asset return variances become unimportant to the portfolio return variance</li>
<li>the portfolio variance instead now depends on the <code>average covariances</code> between the assets.</li>
</ul>
<p>Here, the average return covariance is the <code>systematic risk</code> that cannot be eliminated through diversification, whereas the average return volatility is the <code>idiosyncratic risk</code> that is diversifiable.</p>
<p>Note that complete diversification ($\sigma^2_p=0$) is achieved when:</p>
<ul>
<li>$\textbf{avg_ret_cov}=0$ and $n\rightarrow 0$ for a multi-asset portfolio</li>
<li>$\rho=-1$ for a two-asset portfolio</li>
</ul>
<h1 id="Mean-Variance-Frontier"><a href="#Mean-Variance-Frontier" class="headerlink" title="Mean-Variance Frontier"></a>Mean-Variance Frontier</h1><p>In a mean-variance space, the set of all possible portfolio with $n$ assets form a <code>convex set</code>. The bounday of this set is known as the <code>mean-variance frontier</code> and forms a parabola.</p>
<p><img src="portfolio-theory-img2.png" alt="img2.png"></p>
<p>The top half of the MV frontier is the set of <code>efficient MV portfolios</code> which maximize mean return given return variance.</p>
<p>Let us define $\boldsymbol{r}$ as the random variable vector of asset returns on $n$ assets:</p>
<p>$$\begin{align} \boldsymbol{\mu} &amp;= \mathbb{E}[\boldsymbol{r}] \
\boldsymbol{\Sigma} &amp;= var[\boldsymbol{r}] =\mathbb{E}[(\boldsymbol{r}-\boldsymbol{\mu})(\boldsymbol{r}-\boldsymbol{\mu})’]
\end{align}$$</p>
<p>A particular portfolio is defined by the weights assigned to various assets, and we denote the weights vector $\boldsymbol{w}$. The portfolio return $r_p$ is also a random variable, where:</p>
<p>$$\begin{align}
r_p &amp;= \boldsymbol{w’r} \
\mu_p &amp;= \mathbb{E}[r_p] = \boldsymbol{w’\mu} \
\sigma^2_p &amp;= var[r_p] = \boldsymbol{w’\Sigma w}
\end{align}$$</p>
<p>Also,</p>
<p>$$ cov(\boldsymbol{r}, r_p) = cov(\boldsymbol{r}, \boldsymbol{w’r})  = \boldsymbol{\Sigma w} $$</p>
<h2 id="The-GMV-and-Tangent-Portfolios"><a href="#The-GMV-and-Tangent-Portfolios" class="headerlink" title="The GMV and Tangent Portfolios"></a>The GMV and Tangent Portfolios</h2><p>The <code>Global Minimum Variance</code> (GMV) portfolio has the <code>lowest return variance</code> among all possible portfolios, characterized by the leftmost point on the MV frontier. It can be constructed with weight $\boldsymbol{w}_v$ which minimizes the objective function $\boldsymbol{w’\Sigma w}$ under the constraint of $\boldsymbol{w’1}=1$:</p>
<p>$$ \boldsymbol{w}_v := \dfrac{1}{\boldsymbol{1’\Sigma^{-1}\mu}} \boldsymbol{\Sigma^{-1}1} $$</p>
<p>The <code>Tangent</code> portfolio is a portfolio $\boldsymbol{w}_t$ with the <code>highest mean/variance ratio</code> among all possible portfolios, characterized by the point that is tangent to the MV frontier and going through the origin:</p>
<p>$$ \boldsymbol{w}_t := \dfrac{1}{\boldsymbol{1’\Sigma^{-1}\mu}} \boldsymbol{\Sigma^{-1}\mu} $$</p>
<p><img src="portfolio-theory-img3.png" alt="img3.png"></p>
<h2 id="The-MV-Portfolio"><a href="#The-MV-Portfolio" class="headerlink" title="The MV Portfolio"></a>The MV Portfolio</h2><p>It turns out that any portfolios on the efficient MV frontier can be constructed based off a linear combination of the GMV and tangent portfolios, which solves the following optimization:</p>
<p>$$\text{given }\mu_p \
\text{minimizes }\boldsymbol{w’\Sigma w} \
\text{s.t. } \boldsymbol{w’\mu}=\mu_p \
\text{and } \boldsymbol{w’1}=1$$</p>
<p>Thus a portfolio $\boldsymbol{w}^{\ast}$ is a <code>MV portfolio</code> if and only if there exists $\delta$ such that:</p>
<p>$$ \boldsymbol{w}^{\ast} = \delta\boldsymbol{w}_t + (1-\delta)\boldsymbol{w}_v $$</p>
<p>Consider <code>MV investors</code> that only focus on the mean and variance of a portfolio, then such investors will only hold MV portfolios (which are linear combination of two funds only).</p>
<h2 id="Excess-Return-with-Risk-Free-Asset"><a href="#Excess-Return-with-Risk-Free-Asset" class="headerlink" title="Excess Return with Risk-Free Asset"></a>Excess Return with Risk-Free Asset</h2><p>Consider the existence of a risk-free asset with return $r_f$ that has zero variance and correlation with other assets. The <code>mean excess return</code> is defined as:</p>
<p> $$ \tilde{\boldsymbol{\mu}} = \boldsymbol{\mu-1}r_f $$</p>
<p>And the mean excess return of a portfolio with weight $\boldsymbol{w}$ is:</p>
<p>$$ \tilde{\mu}_p = \boldsymbol{w’}\tilde{\boldsymbol{\mu}}$$</p>
<p>Since the risk-free asset has no variance, the return variance of the portfolio is still $\boldsymbol{w’\Sigma\ w}$</p>
<p>A <code>MV portfolio</code> with a risk-free asset is a vector $\boldsymbol{w}^{\ast}$ which solves the following optimization:</p>
<p>$$\text{given }\tilde{\mu}_p \
\text{minimizes }\boldsymbol{w’\Sigma w} \
\text{s.t. } \boldsymbol{w’\tilde{\mu}}=\tilde{\mu}_p$$</p>
<p>Note that the constraint that weights sum up to $1$ is now dropped, with the inclusion of the risk-free asset.</p>
<p>Thus a portfolio $\boldsymbol{w}^{\ast}$ with mean excess return $\tilde{\mu}_p$ is a <code>MV portfolio</code> with a risk-free asset if:</p>
<p>$$ \boldsymbol{w}^{\ast} = \tilde{\delta}\boldsymbol{w}_t $$</p>
<p>Where,</p>
<p>$$ \boldsymbol{w}_t := (\dfrac{1}{\boldsymbol{1’\Sigma^{-1}\tilde{\mu}}}) \boldsymbol{\Sigma^{-1}\tilde{\mu}} \
\text{and } \tilde{\delta} = (\dfrac{\boldsymbol{1’\Sigma^{-1}\tilde{\mu}}}{\boldsymbol{\tilde{\mu}’\Sigma^{-1}\tilde{\mu}}})\tilde{\mu}_p$$</p>
<p>This result show that with a risk-free asset, any MV portfolio simply contains a position in the tangency portfolio $\boldsymbol{w}_t$ and a position in the risk-less asset (a.k.a the <code>Two Fund Separation</code>).</p>
<p>Interesting facts w.r.t. the tangency portfolio $\boldsymbol{w}_t$:</p>
<ul>
<li>$\boldsymbol{w}_t$ is the <code>unique</code> portfolio that is on both the risky and risk-less MV frontiers</li>
<li>$\boldsymbol{w}_t$ is the point on the <code>risky MV frontier</code> at which the tangency line goes through point (0, risk-free rate).</li>
</ul>
<p><img src="portfolio-theory-img4.png" alt="img4.png"></p>
<h2 id="Sharpe-Ratio"><a href="#Sharpe-Ratio" class="headerlink" title="Sharpe Ratio"></a>Sharpe Ratio</h2><p>We define the <code>Sharpe ratio</code> (SR) of a portfolio $\boldsymbol{w}$ as:</p>
<p>$$ \text{Sharpe Ratio}(\boldsymbol{w}) = \dfrac{\tilde{\mu_p}}{\sigma_p} $$</p>
<p>Therefore, the tangency portfolio $\boldsymbol{w}_t$ is the portfolio on the risky MV frontier with the maximum Sharpe ratio.</p>
<p>$$ \text{Sharpe Ratio}(\boldsymbol{w}^{\ast}) = \sqrt{\boldsymbol{\tilde{\mu}’\Sigma^{-1}\tilde{\mu}}} $$</p>
<p>On the risk-free efficient MV frontier (a.k.a the <code>Capital Market Line</code>) all portfolio has the same SR the tangency portfolio, since the frontier itself is a straight line.</p>
<h2 id="Sortino-Ratio"><a href="#Sortino-Ratio" class="headerlink" title="Sortino Ratio"></a>Sortino Ratio</h2><p>The <code>Sortino ratio</code> improves upon the Sharpe ratio by penalizing the down-side volatility only.</p>
<p>$$ \text{Sortino Ratio}(\boldsymbol{w}) = \dfrac{\tilde{\mu_p}}{\sigma_p^{down}} $$</p>
<h1 id="Linear-Factor-Model"><a href="#Linear-Factor-Model" class="headerlink" title="Linear Factor Model"></a>Linear Factor Model</h1><p>Based on the First Fundamental Theorem of Asset Pricing, given no arbitrage there exists a risk neutral probability measure $\mathbb{P}$ and a change of measure $m$ (R-N derivative) such that for any tradable asset $i$,</p>
<p>$$ r_f = \mathbb{E}[r_i] = \text{E}[mr_i] $$</p>
<p><strong><em>proposition</em></strong> $m$ is a linear function of $r_t$:</p>
<p>$$\begin{align}
m &amp;= a + br_t \
&amp;= 1 - (r_t - \text{E}[r_t])\dfrac{\text{E}[r_t - r_f]}{var[r_t]}
\end{align}$$</p>
<p>Such that all portfolio returns have a <code>factor-beta</code> representation w.r.t. the tangency portfolio,</p>
<p>$$\text{E}[\tilde{r}<em>i] = \beta</em>{p, t}\text{E}[\tilde{r}<em>t] \
\text{where }\beta</em>{i, t} := \dfrac{cov[\tilde{r}_i, \tilde{r}_t]}{var[\tilde{r}_t]}$$</p>
<p>By mathematical identity, this will hold in sample exactly.</p>
<p><strong><em>proof</em></strong> Consider the tangency portfolio from the risk-free MV frontier:
$$ \boldsymbol{w}_t = \boldsymbol{\Sigma^{-1}\tilde{\mu}}\dfrac{1}{\phi} $$</p>
<p>Therefore,
$$ \tilde{\mu}_t = \boldsymbol{w}_t\boldsymbol{\tilde{\mu}} =  \boldsymbol{\tilde{\mu}’\Sigma^{-1}\tilde{\mu}}\dfrac{1}{\phi} $$</p>
<p>And since,
$$var[\tilde{r}_t] = \boldsymbol{w_t’\Sigma w_t} $$</p>
<p>We can show that,
$$\phi = \dfrac{\tilde{\mu}_t}{var[\tilde{r}_t]} $$</p>
<p>In addition, the covariance can be shown as,</p>
<p>$$\begin{align} cov[\tilde{r}_i, \tilde{r}_t] &amp;= \boldsymbol{w_i’\Sigma w_t} = \mu_i\dfrac{1}{\phi}
\end{align}$$</p>
<p>Thus,</p>
<p>$$\tilde{\mu}<em>i = cov[\tilde{r}_i, \tilde{r}_t]\phi = \beta</em>{i, t}\tilde{\mu}_t ;;\text{q.e.d.}$$</p>
<h2 id="Genaralization"><a href="#Genaralization" class="headerlink" title="Genaralization"></a>Genaralization</h2><p>The factor-beta representation is not unique to the tengancy portfolio. In fact, it holds for any arbitraty <code>MV portfolio</code>, $\boldsymbol{w}^{\ast}$</p>
<p>$$ \text{E}[\tilde{r}<em>i] = \beta</em>{i, \ast}\text{E}[\tilde{r}^{\ast}] $$</p>
<p>We will focus on the tangancy portfolio, W.L.O.G.</p>
<h2 id="Practical-Consideration"><a href="#Practical-Consideration" class="headerlink" title="Practical Consideration"></a>Practical Consideration</h2><p>The factor-beta representation seems to provde a way to estimate the mean return for any given portfolio. However, it difficult to calculate the tangency weight $\boldsymbol{w}_t$ in practice, due to either circularity (direct estimation) or imprecision (inverting $\boldsymbol{\Sigma})$</p>
<p>The <code>Linear Factor Model</code> makes an assumption regarding the identify of the tangency portfolio, which avoids the issues stated above.</p>
<p>The LFM assumed tangency portfolio is only used for <code>the pricing of expected returns</code>. However, additional assumptions can be made regarding investor’s MV preference, such that the assumed tangency portfolio will also be used in actual <code>asset allocation</code>.</p>
<h2 id="CAPM"><a href="#CAPM" class="headerlink" title="CAPM"></a>CAPM</h2><p>The most famous LFM is the <code>Capital Asset Pricing Model</code>, which assumes a value-weighted market portfolio of all available assets as the tangency portfolio.</p>
<p>$$ \text{E}[\tilde{r}<em>i] = \beta</em>{i, M}\text{E}[\tilde{r}<em>M] \
\text{where }\beta</em>{i, M} := \dfrac{cov[\tilde{r}_i, \tilde{r}_M]}{var[\tilde{r}_M]}$$</p>
<p>The CAPM is a relative pricing formula, which states that the expected return of any asset can be expressed as the sum of the risk-free rate and a portion of the <code>market risk premium</code>. In other words, it says that the <code>expected excess return/risk premium</code> of an asset is proportional to the market risk premium. The $\beta$ factor is estimated based on regression. CAPM also assets that market beta is the <code>only</code> risk associated with higher average returns, and that volatility, skewness, and other covariances do not matter in determining risk premium.</p>
<p>We can also re-write the formula as follow:</p>
<p>$$ \dfrac{\text{E}[\tilde{r}<em>i]}{\sigma_i} = \rho</em>{i, M}\dfrac{\text{E}[\tilde{r}<em>M]}{\sigma_M} \
SR_i = \rho</em>{i, M}SR_M$$</p>
<p>This shows that the Sharpe ratio earned on an asset depends only on the correlation between asset return and market returns.</p>
<p>There are two ways to derive CAPM:</p>
<ol>
<li>If we assume that <code>returns</code> are jointly normal, then the mean and variance are the sufficient statistics for the return distribution, and thus every investor holds a portfolio on the risk-less MV frontier, which is a combination of the tangency portfolio and the risk-free asset. Therefore aggregating across all investors, the market portfolio of all investments is the tangency portfolio.</li>
<li>If we do not assume jointly normal returns, but instead that investors only care about mean and variance of returns. In this case all investor will also choose MV portfolios, and therefore CAPM holds.</li>
</ol>
<h2 id="Treynor’s-Ratio"><a href="#Treynor’s-Ratio" class="headerlink" title="Treynor’s Ratio"></a>Treynor’s Ratio</h2><p>$$ \text{Treynor Ratio}<em>i = \dfrac{\text{E}[\tilde{r}_i]}{\beta</em>{i, M}} $$</p>
<h2 id="Fama-French-Model"><a href="#Fama-French-Model" class="headerlink" title="Fama-French Model"></a>Fama-French Model</h2><p>The <code>Fama-French 3-factor model</code> is a well-known multi-factor models:</p>
<p>$$ \text{E}[\tilde{r}<em>i] = \beta</em>{i, M}\text{E}[\tilde{r}<em>M] + \beta</em>{i, s}\text{E}[\tilde{r}<em>s] + \beta</em>{i, v}\text{E}[\tilde{r}_v] $$</p>
<p>Where $\tilde{r}_M$ is the excess market return as in CAPM, $\tilde{r}_s$ is a portfolio that goes <code>long small stocks</code> and shorts large stocks, and $\tilde{r}_v$ is a portfolio that goes <code>long value</code> stocks (low market price per fundamental) and shorts growth stocks.</p>
<p>The FF model states that <code>beta</code> to value and small stocks earn premium, <code>NOT</code> <code>being</code> a value or small stock. In other words, the premium is earned on how a stock acts, not how it is classified.</p>
<p>Continue on L3</p>
<p><br><br><br></p>
<p>Reference:</p>
<ul>
<li>FINM 36700 Lecture Notes, Mark Hendricks, the University of Chicago</li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2019/02/portfolio-credit-risk-modeling/" class="prev">PREV</a><a href="/2019/01/guide-to-create-a-blog-with-hexo/" class="next">NEXT</a></div><div id="container"></div><!-- link(rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css")--><link rel="stylesheet" href="/css/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
    clientID: '4ec287ddd4ac34ff5087',
    clientSecret: 'ae45426765f12ac3e2f903662b8938dc4881f703',
    repo: 'jackliu234.github.io',
    owner: 'jackliu234',
    admin: ['jackliu234'],
    perPage: 100,
    id: 'Mon Feb 11 2019 00:00:00 GMT-0600 GMT'.split('GMT')[0].replace(/\s/g, '-'),
    distractionFreeMode: false,
    pagerDirection: 'first'
})

gitalk.render('container')</script><!-- block copyright--></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-133275176-1",'auto');ga('send','pageview');</script><link rel="stylesheet" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css" media="screen" type="text/css"><script src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script><script>$(function(){$('.datatable').dataTable( {"order": [[ 0, "desc" ]],"iDisplayLength": -1,"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]} );});</script></body></html>